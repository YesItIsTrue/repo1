<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN"><!-- <a href="patient_browse.html" target="_blank">YES</a> -->
          <h3></h3>
	 	                            
<html> 
<head>  

    <title>Patient Update Display</title>
    <META NAME="AUTHOR" CONTENT="Mark Jacobs">
    <META NAME="VERSION" CONTENT="1.5">
    <META NAME="COPYRIGHT" CONTENT="Solsource">
    <META NAME="CREATE_DATE" CONTENT="08/May/14">
    <META NAME="LAST_UPDATED" CONTENT="10/Feb/16">
    <LINK rel='stylesheet' type='text/css' href='/depot/src/HTMLContent/stylesheets/core.css' />
<script LANGUAGE="SpeedScript">
  /*------------------------------------------------------------------
 * File:patient_update4.html
 * Description:  
 * Created:Mark Jacobs
 *-------------------------------------------------------------------
 * Revision History:    
 * ---------------------
 * 1.2 - written by DOUG LUTTRELL on 01/Jun/15.  Added code to support the 
 *          pathing workaround.  Marked by 1dot2. 
 * 1.3 - written by DOUG LUTTRELL on 07/Jul/15.  Mark redid the whole
 *          thing to better support the RP stuff.  Turns out the DISABLED
 *          setting on an input field prevents the form from submitting 
 *          those values when you submit it.  Also some typos and things
 *          with quotes were causing wonky behavior.  Not marked.
 * 1.4 - written by Mark Jacobs on 09/22/15. Marked by 1dot4.
 *          Changed pathing code to use the RUN SEARCH stuff.
 *          Added preferred name to the forms, and the necessary workaround block of code.
 * 1.5 - written by Jacob Luttrell on 10Feb16.  Made changes for v11.1 deployment by    
 *          adding blank for pref name to SUBpeop-ucU input fields and added state and 
 *          cntry dropdown.i files Marked by 1dot5. 
 *-------------------------------------------------------------------- */
 
/* Create an unnamed pool to store all the widgets created by this procedure.
   This is a good default which assures that this procedure's triggers and
   internal procedures will execute in this procedure's storage, and that
   proper cleanup will occur on deletion of the procedure. */
CREATE WIDGET-POOL.
</script>
  
<script type="text/javascript"> 
// Popup window code
function patientPopup(url) {
    popupWindow = window.open(
        url,'popUpWindow','height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
}

</script>
</head>
<body class='inside'>
<!--  
<h1 style="text-align: center">
        <br>TestKit Tracker <span style="COLOR: #0000FF;">Patient Records UpDate</span><br>
    </h1>
    <hr style="width: 70%">
 -->   
<script LANGUAGE="SpeedScript">
{../depot/src/WebSpeed/menuname.i}. 

DEFINE VARIABLE codetorun       AS CHARACTER                        NO-UNDO.    /* 1dot2 */  
DEFINE VARIABLE depotcode       AS CHARACTER                        NO-UNDO.    /* 1dot2 */
DEFINE VARIABLE drive_letter    AS CHARACTER                        NO-UNDO.    /* 1dot2 */
         
ASSIGN drive_letter = SUBSTRING(THIS-PROCEDURE:FILE-NAME, 1, 1).                /* 1dot2 */

	DEFINE VARIABLE patID    LIKE patient_ID NO-UNDO.
	DEFINE VARIABLE patfstn  LIKE people_firstname NO-UNDO.
	DEFINE VARIABLE patlstn  LIKE people_lastname NO-UNDO.
	DEFINE VARIABLE patmidn  LIKE people_midname NO-UNDO.
	DEFINE VARIABLE pattitle LIKE people_prefix NO-UNDO.
	DEFINE VARIABLE patsuf   LIKE people_suffix NO-UNDO.
	DEFINE VARIABLE prefname LIKE people_mstr.people_prefname NO-UNDO.     /* 1dot4 */
	
	DEFINE VARIABLE pat-doc      LIKE patient_mstr.patient_doctor_ID NO-UNDO.
	DEFINE VARIABLE pat-cust-id  LIKE patient_mstr.patient_cust_ID NO-UNDO.
	DEFINE VARIABLE pat-verified LIKE patient_mstr.patient_verified NO-UNDO.
	
	 DEFINE VARIABLE pat-contact LIKE people_contact NO-UNDO.
	
	DEFINE VARIABLE add1 LIKE addr_addr1 NO-UNDO.
	DEFINE VARIABLE add2 LIKE addr_addr2 NO-UNDO.
	DEFINE VARIABLE add3 LIKE addr_addr3 NO-UNDO.
	DEFINE VARIABLE city LIKE addr_city NO-UNDO.
	DEFINE VARIABLE state-prov LIKE addr_stateprov NO-UNDO.
	DEFINE VARIABLE patzip LIKE addr_zip NO-UNDO.
	DEFINE VARIABLE county-type LIKE addr_mstr.addr_type NO-UNDO.
	DEFINE VARIABLE second-addr LIKE people_mstr.people_second_addr_ID NO-UNDO.
	
	
	DEFINE VARIABLE h-phone LIKE people_homephone NO-UNDO.
	DEFINE VARIABLE c-phone LIKE people_cellphone NO-UNDO.
	DEFINE VARIABLE w-phone LIKE people_workphone NO-UNDO.	
	DEFINE VARIABLE fax-phone LIKE people_fax NO-UNDO.
	
	DEFINE VARIABLE patgen LIKE people_gender NO-UNDO.
	DEFINE VARIABLE Gender   AS CHARACTER     NO-UNDO.
	
	DEFINE VARIABLE t-gender AS CHARACTER NO-UNDO.
	
	DEFINE VARIABLE patdob LIKE people_DOB NO-UNDO.
	DEFINE VARIABLE patage AS INTEGER NO-UNDO. /* patient_age */ 
	
	DEFINE VARIABLE patcon LIKE patient_condition NO-UNDO.
	DEFINE VARIABLE patcp LIKE patient_RP_ID NO-UNDO.  /* This needs to be made into a people record */
	DEFINE VARIABLE patnotes LIKE patient_notes NO-UNDO.
	
	DEFINE VARIABLE patemail LIKE people_email NO-UNDO.
	DEFINE VARIABLE patRPemail LIKE people_email NO-UNDO. /** @@@ This needs to be associated with the responsible party people record patient_RP_ID */
	DEFINE VARIABLE patdoc AS INTEGER  NO-UNDO. /* patient_doctorID */ 
	DEFINE VARIABLE patcomp LIKE people_company NO-UNDO.	
	DEFINE VARIABLE patdum AS LOGICAL NO-UNDO. /*patient_dummy1 */		
	DEFINE VARIABLE cntry LIKE addr_country NO-UNDO.                           /* 1dot5 */
	DEFINE VARIABLE patvflag AS LOGICAL  NO-UNDO. /* patient_verify_flag */	
		
		                 
	DEFINE VARIABLE email LIKE people_email NO-UNDO.
	DEFINE VARIABLE email2 LIKE people_email2 NO-UNDO.  	
	

	DEFINE VARIABLE male-ck AS CHARACTER NO-UNDO.
	DEFINE VARIABLE female-ck AS CHARACTER NO-UNDO.	
	DEFINE VARIABLE doc	LIKE patient_doctor_id NO-UNDO.       /* @@@@@@ need to add this to the from  @@@@@ */	
	DEFINE VARIABLE ddate LIKE patient_create_date NO-UNDO.
	DEFINE VARIABLE moddate LIKE patient_modified_date NO-UNDO.
	DEFINE VARIABLE cust-id LIKE cust_id NO-UNDO.  	
	 
     
	/*********************************************************************************************/	
	DEFINE VARIABLE act AS INTEGER NO-UNDO.
	DEFINE VARIABLE deleteblock AS INTEGER NO-UNDO.
	DEFINE VARIABLE un86 AS INTEGER NO-UNDO.
	DEFINE VARIABLE edit AS INTEGER NO-UNDO.
	DEFINE VARIABLE make AS INTEGER NO-UNDO.
	DEFINE VARIABLE crt AS INTEGER NO-UNDO.
	DEFINE VARIABLE sent-edit AS INTEGER NO-UNDO.
	
	DEFINE VARIABLE new-addr AS LOGICAL INITIAL NO  NO-UNDO.
	/*********************************************************************************************/
	
	
    DEFINE VARIABLE t-patID LIKE people_ID NO-UNDO.
    DEFINE VARIABLE t-patfstn LIKE people_firstname NO-UNDO.
    DEFINE VARIABLE t-patlstn LIKE people_lastname NO-UNDO.
    DEFINE VARIABLE t-patmidn LIKE people_midname NO-UNDO.
    DEFINE VARIABLE t-pattitle LIKE people_prefix NO-UNDO.
    DEFINE VARIABLE t-patsuf LIKE people_suffix NO-UNDO.
    
    DEFINE VARIABLE t-add1 LIKE addr_addr1 NO-UNDO.
    DEFINE VARIABLE t-add2 LIKE addr_addr2 NO-UNDO.
    DEFINE VARIABLE t-add3 LIKE addr_addr3 NO-UNDO.
    DEFINE VARIABLE t-city LIKE addr_city NO-UNDO.
    DEFINE VARIABLE t-state-prov LIKE addr_stateprov NO-UNDO.
    DEFINE VARIABLE t-zip LIKE addr_zip NO-UNDO.
    DEFINE VARIABLE t-country LIKE addr_country NO-UNDO.
    
    DEFINE VARIABLE t-h-phone LIKE people_homephone NO-UNDO.
    DEFINE VARIABLE t-c-phone LIKE people_cellphone NO-UNDO.
    DEFINE VARIABLE t-w-phone LIKE people_workphone NO-UNDO.    
    DEFINE VARIABLE t-fax-phone LIKE people_fax NO-UNDO.
    
    DEFINE VARIABLE t-patgen LIKE people_gender NO-UNDO.    
    DEFINE VARIABLE t-patdob LIKE people_DOB NO-UNDO.
    DEFINE VARIABLE t-patage AS INTEGER NO-UNDO. /* patient_age */ 
    
    DEFINE VARIABLE t-patcon LIKE patient_condition NO-UNDO.
    DEFINE VARIABLE t-patcp LIKE patient_RP_ID NO-UNDO.  /* This needs to be made into a people record <<<<<<<<<*/
    DEFINE VARIABLE t-patnotes LIKE patient_notes NO-UNDO.
    
    DEFINE VARIABLE t-email LIKE people_email NO-UNDO.
    DEFINE VARIABLE t-email2 LIKE people_email NO-UNDO.
    
    DEFINE VARIABLE t-patRPemail LIKE people_email NO-UNDO. /** @@@ This needs to be associated with the responsible party people record patient_RP_ID */
    DEFINE VARIABLE t-doc AS INTEGER  NO-UNDO. /* patient_doctorID */ 

    DEFINE VARIABLE t-patcomp LIKE people_company NO-UNDO.
    DEFINE VARIABLE t-patdum AS LOGICAL NO-UNDO. /*patient_dummy1 */
    DEFINE VARIABLE t-patwho AS CHARACTER  NO-UNDO. /* patient_whopay */ 
    
    DEFINE VARIABLE t-patcntry LIKE addr_country NO-UNDO.
    DEFINE VARIABLE t-patdoc LIKE patient_mstr.patient_doctor_ID NO-UNDO.
    
    DEFINE VARIABLE t-patvflag AS LOGICAL  NO-UNDO. /* patient_verify_flag */
/*    DEFINE VARIABLE t-email2 LIKE people_email2 NO-UNDO.                   /* @@@@ ????  @@@@ */ */
    
    
    DEFINE VARIABLE t-male-ck LIKE people_gender NO-UNDO.
    DEFINE VARIABLE t-female-ck LIKE people_gender NO-UNDO.
    
    DEFINE VARIABLE t-doc-fname LIKE people_mstr.people_firstname NO-UNDO.
    DEFINE VARIABLE t-doc-lname LIKE people_mstr.people_lastname NO-UNDO. 
 
 /*-------------------------------------------------------------------*/
    DEFINE VARIABLE c-patID LIKE people_ID NO-UNDO.
    DEFINE VARIABLE c-patfstn LIKE people_firstname NO-UNDO.
    DEFINE VARIABLE c-patlstn LIKE people_lastname NO-UNDO.
    DEFINE VARIABLE c-patmidn LIKE people_midname NO-UNDO.
    DEFINE VARIABLE c-pattitle LIKE people_prefix NO-UNDO.
    DEFINE VARIABLE c-patsuf LIKE people_suffix NO-UNDO.
    DEFINE VARIABLE c-prefname LIKE people_mstr.people_prefname NO-UNDO.   /* 1dot4 */
    
    DEFINE VARIABLE c-add1 LIKE addr_addr1 NO-UNDO.
    DEFINE VARIABLE c-add2 LIKE addr_addr2 NO-UNDO.
    DEFINE VARIABLE c-add3 LIKE addr_addr3 NO-UNDO.
    DEFINE VARIABLE c-city LIKE addr_city NO-UNDO.
    DEFINE VARIABLE c-state-prov LIKE addr_stateprov NO-UNDO.
    DEFINE VARIABLE c-zip LIKE addr_zip NO-UNDO.
    
    DEFINE VARIABLE c-h-phone LIKE people_homephone NO-UNDO.
    DEFINE VARIABLE c-c-phone LIKE people_cellphone NO-UNDO.
    DEFINE VARIABLE c-w-phone LIKE people_workphone NO-UNDO.    
    DEFINE VARIABLE c-fax-phone LIKE people_fax NO-UNDO.
    
    DEFINE VARIABLE c-patgen LIKE people_gender NO-UNDO.
    DEFINE VARIABLE c-patdob LIKE people_DOB NO-UNDO.
    DEFINE VARIABLE c-patage AS INTEGER NO-UNDO. /* patient_age */ 
    
    DEFINE VARIABLE c-patcon LIKE patient_condition NO-UNDO.
    DEFINE VARIABLE c-patcp LIKE patient_RP_ID NO-UNDO.  /* The needs to be made into a people record */
    DEFINE VARIABLE c-patnotes LIKE patient_notes NO-UNDO.
    
    DEFINE VARIABLE c-email LIKE people_email NO-UNDO.
    DEFINE VARIABLE c-email2 LIKE people_email NO-UNDO.
    
    DEFINE VARIABLE c-patRPemail LIKE people_email NO-UNDO. /** @@@ This needs to be associated with the responsible party people record patient_RP_ID */
    
    DEFINE VARIABLE c-patdoc AS INTEGER  NO-UNDO. /* patient_doctorID */ 

    DEFINE VARIABLE c-patcomp LIKE people_company NO-UNDO.  
    DEFINE VARIABLE c-country LIKE addr_country NO-UNDO.    
    DEFINE VARIABLE c-patvflag AS LOGICAL  NO-UNDO. /* patient_verify_flag */
/*    DEFINE VARIABLE c-email2 LIKE people_email2 NO-UNDO.                   /* @@@@ ????  @@@@ */    */
    
    DEFINE VARIABLE c-male-ck LIKE people_gender NO-UNDO.
    DEFINE VARIABLE c-female-ck LIKE people_gender NO-UNDO.
    DEFINE VARIABLE c-space AS CHARACTER NO-UNDO.
    DEFINE VARIABLE c-doc-fname LIKE t-doc-fname NO-UNDO.
    DEFINE VARIABLE c-doc-lname LIKE t-doc-lname NO-UNDO.
    
    /*---------------------------------------------------------------------------------------*/ 
 
    DEFINE VARIABLE sent-back AS INTEGER NO-UNDO. /* Am I going to keep this ???? YES*/
    DEFINE VARIABLE re-title AS INTEGER NO-UNDO.
    DEFINE VARIABLE brows AS INTEGER NO-UNDO. 
        
    DEFINE VARIABLE coname LIKE Country_Display_Name NO-UNDO.
    DEFINE VARIABLE coabbv LIKE Country_ISO NO-UNDO.
    
    DEFINE VARIABLE stname LIKE State_Display_Name NO-UNDO.
    DEFINE VARIABLE stabbv LIKE State_ISO NO-UNDO.
    
   /******************************* For age calculation *****************/
	DEFINE VARIABLE thisday AS DATE NO-UNDO.
    DEFINE VARIABLE thatday AS DATE NO-UNDO.
    DEFINE VARIABLE patientage AS DECIMAL FORMAT "->>9.99" NO-UNDO.
    DEFINE VARIABLE cont AS INTEGER NO-UNDO.
    DEFINE VARIABLE days AS INTEGER NO-UNDO.
    DEFINE VARIABLE formdate AS DATE NO-UNDO.   
  
	/********************************************************************/
	
	/*---------------------- Responsible party variable definitions -----------------------------*/
    DEFINE VARIABLE RP-peop-ID LIKE people_id NO-UNDO.
    DEFINE VARIABLE RP-fstn LIKE people_firstname NO-UNDO.
    DEFINE VARIABLE RP-lstn LIKE people_lastname NO-UNDO.
    DEFINE VARIABLE RP-midn LIKE people_midname NO-UNDO.
    DEFINE VARIABLE RP-title LIKE people_prefix NO-UNDO.
    DEFINE VARIABLE RP-suf LIKE people_suffix NO-UNDO.
    
    DEFINE VARIABLE RP-company LIKE people_mstr.people_company NO-UNDO.
    
    DEFINE VARIABLE RP-add1 LIKE addr_addr1 NO-UNDO.
    DEFINE VARIABLE RP-add2 LIKE addr_addr2 NO-UNDO.
    DEFINE VARIABLE RP-add3 LIKE addr_addr3 NO-UNDO.
    DEFINE VARIABLE RP-city LIKE addr_city NO-UNDO.
    DEFINE VARIABLE RP-state-prov LIKE addr_stateprov NO-UNDO.
    DEFINE VARIABLE RP-zip LIKE addr_zip NO-UNDO.
    DEFINE VARIABLE RP-country LIKE addr_country NO-UNDO.
    
    DEFINE VARIABLE RP-h-phone LIKE people_homephone NO-UNDO.
    DEFINE VARIABLE RP-c-phone LIKE people_cellphone NO-UNDO.
    DEFINE VARIABLE RP-w-phone LIKE people_workphone NO-UNDO.  
    DEFINE VARIABLE Rp-fax-phone LIKE people_fax NO-UNDO.
    DEFINE VARIABLE RP-email LIKE people_email NO-UNDO.
    DEFINE VARIABLE RP-email2 LIKE people_email2 NO-UNDO.
    
    DEFINE VARIABLE RP-add-id LIKE people_addr_id NO-UNDO.    
    DEFINE VARIABLE RP-patcon LIKE patient_mstr.patient_condition NO-UNDO.    
    DEFINE VARIABLE RP-dob LIKE people_mstr.people_DOB NO-UNDO.
    
    
    DEFINE VARIABLE RP-comp LIKE patient_condition NO-UNDO.
    DEFINE VARIABLE RP-gen LIKE people_gender NO-UNDO.
    DEFINE VARIABLE RP-peop-contact LIKE people_contact NO-UNDO.
    
    DEFINE VARIABLE RP-peop-addr-ID LIKE people_mstr.people_addr_id NO-UNDO.
    DEFINE VARIABLE RP-prefname LIKE people_mstr.people_prefname NO-UNDO.   /* 1dot5 */
    DEFINE VARIABLE o-RP-peop-id LIKE people_id NO-UNDO.
    DEFINE VARIABLE o-RP-peop-crate AS LOGICAL NO-UNDO. 
    DEFINE VARIABLE o-RP-peop-update AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-RP-peop-avail AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-RP-peop-success AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-RP-peop-addr-ID LIKE people_mstr.people_addr_id NO-UNDO.
    
    DEFINE VARIABLE o-RP-addr-id LIKE addr_id NO-UNDO.
    DEFINE VARIABLE o-RP-addr-create AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-RP-addr-update AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-RP-addr-avail AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-RP-addr-success AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-RP-peop-error AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-RP-peop-ran AS LOGICAL NO-UNDO.
    
    DEFINE VARIABLE o-f-RP-addr-id LIKE addr_id NO-UNDO.
    DEFINE VARIABLE o-f-RP-addr-error AS LOGICAL NO-UNDO.
    DEFINE VARIABLE o-f-RP-addr-ran AS LOGICAL NO-UNDO.

DEFINE VARIABLE o-fstate-disp-name AS CHARACTER NO-UNDO.                                    /* 1dot5 */
DEFINE VARIABLE o-fstate-disp-error AS LOGICAL NO-UNDO.                                     /* 1dot5 */
DEFINE VARIABLE o-fcountry-disp-name AS CHARACTER NO-UNDO.                                  /* 1dot5 */
DEFINE VARIABLE o-fcountry-disp-error AS LOGICAL NO-UNDO.                                   /* 1dot5 */ 
       
  /*-------------------------------------------------------*/
    DEFINE VARIABLE t-RP-peop-ID LIKE people_id NO-UNDO.
    DEFINE VARIABLE t-RP-fstn LIKE people_firstname NO-UNDO.
    DEFINE VARIABLE t-RP-lstn LIKE people_lastname NO-UNDO.
    DEFINE VARIABLE t-RP-midn LIKE people_midname NO-UNDO.
    DEFINE VARIABLE t-RP-title LIKE people_prefix NO-UNDO.
    DEFINE VARIABLE t-RP-suf LIKE people_suffix NO-UNDO.
    DEFINE VARIABLE t-prefname LIKE people_mstr.people_prefname NO-UNDO.  /* 1dot4 */
    
    DEFINE VARIABLE t-RP-add1 LIKE addr_addr1 NO-UNDO.
    DEFINE VARIABLE t-RP-add2 LIKE addr_addr2 NO-UNDO.
    DEFINE VARIABLE t-RP-add3 LIKE addr_addr3 NO-UNDO.
    DEFINE VARIABLE t-RP-city LIKE addr_city NO-UNDO.
    DEFINE VARIABLE t-RP-state-prov LIKE addr_stateprov NO-UNDO.
    DEFINE VARIABLE t-RP-zip LIKE addr_zip NO-UNDO.
    DEFINE VARIABLE t-RP-country LIKE addr_country NO-UNDO.
    
    DEFINE VARIABLE t-RP-h-phone LIKE people_homephone NO-UNDO.
    DEFINE VARIABLE t-RP-c-phone LIKE people_cellphone NO-UNDO.
    DEFINE VARIABLE t-RP-w-phone LIKE people_workphone NO-UNDO.  
    DEFINE VARIABLE t-Rp-fax-phone LIKE people_fax NO-UNDO.
    DEFINE VARIABLE t-RP-email LIKE people_email NO-UNDO.
    DEFINE VARIABLE t-RP-email2 LIKE people_email2 NO-UNDO.
    DEFINE VARIABLE t-RP-add-id LIKE people_addr_id NO-UNDO.
    DEFINE VARIABLE t-RP-dob LIKE people_dob NO-UNDO.               /* added this on 12/17 */
    /*------------------------------------------------------*/
    DEFINE VARIABLE c-RP-peop-ID LIKE people_id NO-UNDO.
    DEFINE VARIABLE c-RP-fstn LIKE people_firstname NO-UNDO.
    DEFINE VARIABLE c-RP-lstn LIKE people_lastname NO-UNDO.
    DEFINE VARIABLE c-RP-midn LIKE people_midname NO-UNDO.
    DEFINE VARIABLE c-RP-title LIKE people_prefix NO-UNDO.
    DEFINE VARIABLE c-RP-suf LIKE people_suffix NO-UNDO.
    
    DEFINE VARIABLE c-RP-add1 LIKE addr_addr1 NO-UNDO.
    DEFINE VARIABLE c-RP-add2 LIKE addr_addr2 NO-UNDO.
    DEFINE VARIABLE c-RP-add3 LIKE addr_addr3 NO-UNDO.
    DEFINE VARIABLE c-RP-city LIKE addr_city NO-UNDO.
    DEFINE VARIABLE c-RP-state-prov LIKE addr_stateprov NO-UNDO.
    DEFINE VARIABLE c-RP-zip LIKE addr_zip NO-UNDO.
    DEFINE VARIABLE c-RP-country LIKE addr_country NO-UNDO.
    
    DEFINE VARIABLE c-RP-h-phone LIKE people_homephone NO-UNDO.
    DEFINE VARIABLE c-RP-c-phone LIKE people_cellphone NO-UNDO.
    DEFINE VARIABLE c-RP-w-phone LIKE people_workphone NO-UNDO.  
    DEFINE VARIABLE c-Rp-fax-phone LIKE people_fax NO-UNDO.
    DEFINE VARIABLE c-RP-email LIKE people_email NO-UNDO.
    DEFINE VARIABLE c-RP-email2 LIKE people_email2 NO-UNDO.
    DEFINE VARIABLE c-RP-add-id LIKE people_addr_id NO-UNDO.  
    DEFINE VARIABLE c-RP-dob LIKE people_dob NO-UNDO.               /* added this on 12/17 */ 
    
    DEFINE VARIABLE old-doc-fname AS CHAR NO-UNDO.
    DEFINE VARIABLE old-doc-lname AS CHAR NO-UNDO.
    
    /*-------------------- End of Responsible party variable definitions -----------------------*/  
    
    DEFINE VARIABLE peop-ID      LIKE people_mstr.people_id NO-UNDO.
    DEFINE VARIABLE peop-addr-ID LIKE people_mstr.people_addr_id NO-UNDO.
    DEFINE VARIABLE pat-exist AS LOGICAL INITIAL NO NO-UNDO.
   
    
    DEFINE VARIABLE o-addr-id LIKE people_mstr.people_addr_id NO-UNDO.
    DEFINE VARIABLE o-addr-create  AS  LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-addr-update  AS  LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-addr-success AS  LOGICAL INITIAL NO NO-UNDO. 
    DEFINE VARIABLE o-addr-avail   AS  LOGICAL INITIAL NO NO-UNDO.
    
    DEFINE VARIABLE o-f-addr-id LIKE addr_mstr.addr_id NO-UNDO.
    DEFINE VARIABLE o-f-addr-error   AS  LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-f-addr-ran     AS  LOGICAL INITIAL NO NO-UNDO.
    
    DEFINE VARIABLE o-pat-id LIKE people_mstr.people_addr_id NO-UNDO.
    DEFINE VARIABLE o-pat-create AS LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-pat-updat  AS  LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-pat-error  AS  LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-patsuccess AS LOGICAL INITIAL NO NO-UNDO. 
    
    DEFINE VARIABLE o-peop-id LIKE people_mstr.people_addr_id NO-UNDO.    
    DEFINE VARIABLE o-peop-crate   AS  LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-peop-update  AS LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-peop-avail   AS LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE o-peop-success AS LOGICAL INITIAL NO NO-UNDO.     
    
	DEFINE VARIABLE peeprec AS RECID NO-UNDO. /* this NEW to me, and cool */
		
	DEFINE VARIABLE doc-fname LIKE people_mstr.people_firstname NO-UNDO.
    DEFINE VARIABLE doc-lname LIKE people_mstr.people_lastname  NO-UNDO.  
    DEFINE VARIABLE whattorun   AS CHARACTER NO-UNDO.
    DEFINE VARIABLE new-rp      AS LOGICAL   NO-UNDO. 
    DEFINE VARIABLE RP-stop     AS LOGICAL INITIAL NO NO-UNDO.
    
    DEFINE VARIABLE cout        AS INTEGER INITIAL 0  NO-UNDO.          /* added 4/17/15 */
    DEFINE VARIABLE pat-update  AS LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE RP-update   AS LOGICAL INITIAL NO NO-UNDO.
    DEFINE VARIABLE create-rp   AS LOGICAL INITIAL NO NO-UNDO.
    
    DEFINE VARIABLE act-edit AS CHARACTER NO-UNDO.  
    
    /*---------------------------------------------------------------*/
    DEFINE VARIABLE ITfeedback AS LOGICAL INITIAL NO NO-UNDO.        /*---< ITfeedback (YES or NO)  */
    /* --------------------------------------------------------------*/
    
			ASSIGN 
			
			new-rp     =  IF(LOGICAL (get-value("h-new-rp"))) = YES then 
                                  YES
                                  ELSE
                                  NO  
                                  
            RP-stop    = IF(LOGICAL (get-value ("h-rp-stop"))) = YES then
                                  YES
                                  ELSE
                                  NO                     
            
            edit       = INTEGER (get-value("mod"))
            
            pat-update     = IF(LOGICAL (get-value ("h-pat-update"))) = YES then
                                    YES
                                    ELSE
                                    NO 
             RP-update     = IF(LOGICAL (get-value ("h-RP-update"))) = YES then
                                    YES
                                    ELSE
                                    NO   
                                                          
            act-edit        =  get-value ("h-act-edit")                         
			whattorun       = get-value ("whattorun")			
			peop-ID         = INTEGER (get-value ("pep-id"))
		    peop-addr-ID    = INTEGER (get-value ("pep-addr"))
		    pat-exist       = LOGICAL (get-value ("pep-exist"))
		    sent-edit       = INTEGER (get-value ("sentedit"))  
			
		    patID       = INTEGER (get-value ("ID"))
		    patfstn     = TRIM(get-value ("fstn"))
		    patlstn     = TRIM(get-value ("lstn"))
		    patmidn     = TRIM(get-value ("midn"))
		    pattitle    = TRIM(get-value ("title"))
		    patsuf      = TRIM(get-value ("suffix"))
		    
		    prefname    = get-value ("h-prefname")     /* 1dot4 */
		    
		    add1        = TRIM(get-value ("addr1")) 
		    add2        = TRIM(get-value ("addr2"))
		    add3        = TRIM(get-value ("addr3"))
		    city        = TRIM(get-value ("patcity"))
		    state-prov  = get-value ("st")
		    patzip      = TRIM(get-value ("zip"))
		    
		    cntry       = get-value ("h-cntry")        /* 1dot5 */
		    
		    h-phone     = get-value ("home")
		    c-phone     = get-value ("cell")
		    w-phone     = get-value ("work")
		    fax-phone   = get-value ("fax")
		    
		    patgen      = LOGICAL (get-value ("gender")) /* @@ This used to be a character datatype @@ */ 
		    
	/*---------------------------------------------------------*/ 
	     /*	    
		    gender     =   IF patgen = TRUE THEN
		                           "Male"
		                           ELSE
		                           "Female"            
		 */                          
    /*---------------------------------------------------------*/		                             
		    patdob      = DATE (get-value ("dob")) 
		    patage      = INTEGER (get-value ("age"))  
		    patcon      = get-value ("condition")
		    patnotes    = get-value ("notes")
		    patcp       =  INTEGER (get-value ("contactperson"))
	/*	    
		    patemail    = get-value ("email")
		    patRPemail  = get-value ("RPemail")
	*/
	        email       = get-value ("e-mail")
            email2      = get-value ("e-mail2")               
              	    
     	    patdoc      = INTEGER (get-value ("doctor")) /* doctor  */

		    patcomp     = get-value ("company")
		    	   
		    patvflag    = LOGICAL (get-value ("flag"))
		    deleteblock = INTEGER (get-value("dblock"))
		    un86        = INTEGER (get-value("undorec"))
		    
		    thisday     = TODAY
		    c-space     =   "-"
		    sent-back   = INTEGER (get-value("sent"))
		    re-title    = INTEGER (get-value("undoth"))
		    brows       = INTEGER (get-value("browse"))
		    sent-back   = 0
		    make        = INTEGER (get-value("make-rec")) 
		    crt         = INTEGER (get-value("crt-rec"))
		  /*------------------------------------------------*/
            RP-add-id      = INTEGER   (get-value("RP-addr"))		   
		    RP-peop-id     = INTEGER   (get-value ("RP-id"))
		    RP-fstn        = get-value ("rpfstn")
		    RP-lstn        = get-value ("rplstn")
		    RP-midn        = get-value ("rpmidn")
		    RP-title       = get-value ("rptitle")
		    RP-suf         = get-value ("rpsuffix")
		    RP-add1        = get-value ("rpaddr1")
		    RP-add2        = get-value ("rpaddr2")
		    RP-add3        = get-value ("rpaddr3")
		    RP-city        = get-value ("rpcity")
		    RP-state-prov  = get-value ("rpst")  /* rpstate */
		    RP-zip         = get-value ("rpzip")
		    RP-h-phone     = get-value ("rphome")
		    RP-c-phone     = get-value ("rpcell")
		    RP-w-phone     = get-value ("rpwork")
		    RP-fax-phone   = get-value ("rpfax")
		    RP-country     = get-value ("rpcount")
            RP-email       = get-value ("rpemail")
            RP-email2      = get-value ("rpemail2")
            
            RP-dob         = DATE (get-value("h-RP-dob"))
                                               
  			create-rp      = LOGICAL (get-value ("h-creat-rp")).
  				     
/*	        IF new-rp = YES THEN*/
/*	           ASSIGN           */
/*	           RP-peop-id = 0   */
/*	           RP-add-id  = 0.  */
         
             IF patgen = ? THEN 
			    ASSIGN
			    gender = "" .
			    
			    ELSE
			    
			    IF patgen = TRUE THEN
			    ASSIGN
			    gender = "Male".
			    
			    ELSE
			    
			    IF patgen = FALSE THEN
			    ASSIGN
			    gender = "Female".
			    
  
            /*--------------------------------- start of update block -----------------------------------*/
         
	        IF edit = 1 THEN DO:
	            
																		              IF ITfeedback = YES THEN                  
																				       {&OUT} "<p> HI THERE..... your in the edit block Which is now its own procedure patientupdate4.r" SKIP
																				        "<br>My people_id is--- " peop-ID  SKIP
																				        "<br>MY addr id is -- "peop-addr-ID SKIP
																				        "<br>MY RP-peop-id is--- "RP-peop-id SKIP
																				        "<br>MY RP-add-id is--- "RP-add-id SKIP
																				        "<br>My Gender is-- " Gender SKIP
																				        "<br>patgen is -- " patgen SKIP 
																				        "<br>working on new-rp -- "new-rp SKIP
																				        "<br>MY RP-Gender is -- " RP-gen SKIP
																				        "<br>Just Checking something here RP-add1 -- " RP-add1 SKIP
																				        "<br>My patdoc is -- " patdoc  SKIP
																				        "<br>My patnotes is -- " patnotes SKIP
																				        "<br>here's the h-phon -- " h-phone SKIP
																				        "<br>My patdob is -- " patdob SKIP
																				        "<br>Here's add1 -- " add1 SKIP
																				        "<br>Here's city -- " city SKIP
																				        "<br>and state-prov -- " state-prov SKIP
																				        "<br>and country -- " cntry SKIP
																				        "<br>The patzip is -- " patzip  
																				        "<br>Heres new-rp -- " new-rp SKIP
																				        "<br>RP-stop is  -- " RP-stop SKIP
																				        "<br>mod is -- " edit SKIP
																				        "<br>pat-update -- " pat-update SKIP
																				        "<br>RP-update -- " RP-update SKIP
																				        "<br>edit -- " edit SKIP
																				        "<br>patdoc -- " patdoc SKIP
																				        "<br>prefname-- " prefname skip
																				        "</p>" SKIP.
																				        
				ASSIGN
				o-RP-peop-id = 	RP-peop-id.	 /* This is necessary when changing RP record when there's more than one people record to choose from */														        
					       
	        FIND people_mstr  WHERE people_id  = peop-id         NO-ERROR.
	      /*  FIND addr_mstr    WHERE addr_id    = people_addr_id  NO-ERROR. */
	        FIND patient_mstr WHERE patient_id = people_id       NO-ERROR. 
			       
			       
			                        IF 
			                            patsuf      = people_suffix  AND
	                                    pattitle    = people_prefix  AND                                     
/*	                                    patfstn     = people_firstname AND*/
/*	                                    patlstn     = people_lastname AND*/
	                                    patmidn     = people_midname AND 	                                    
/*	                                    patdob      = people_DOB   AND*/
	                                    patgen      = people_gender AND
/*	                                    email       = people_email AND*/
	                                    email2      = people_email2 AND
	                                    h-phone     = people_homephone AND  
	                                    fax-phone   = people_fax AND 
	                                    w-phone     = people_workphone AND
	                                    c-phone     = people_cellphone AND
	                                    patcomp     = people_company  AND 
	                                    prefname    = people_mstr.people_prefname     /* 1dot4 */
	                                    
					                    THEN DO:
					                        
					                        ASSIGN
					                        act = 1.
		                 
					                        ASSIGN                                     
		                                        t-patsuf     = people_suffix
		                                        t-pattitle   = people_prefix 
		                                        t-patfstn    = people_firstname
		                                        t-patlstn    = people_lastname
		                                        t-patmidn    = people_midname  
		                                        t-email      = people_email  
		                                        t-email2     = people_email2 
		                                        t-h-phone    = people_homephone 
		                                        t-c-phone    = people_cellphone
		                                        t-w-phone    = people_workphone
		                                        t-fax-phone  = people_fax 
		                                        t-patcomp    = people_company
		                                        t-prefname   = people_mstr.people_prefname   /* 1dot4 */		                                        
		                                        t-gender     = IF people_gender = ? THEN
                                                                   " "
                                                                   ELSE
                                                               IF people_gender = TRUE THEN
                                                                   "Male"
                                                                   ELSE
                                                                   "Female"           
                                                      
		                                        t-patdob     = people_DOB.
		                
											                                          IF ITfeedback = YES THEN            
									                                                    {&OUT} "<p> NO Changes to the people_mstr</p>".
                                                 
					                 END. /* THEN DO: */  
					           
					     
			                 
								     ELSE DO:    
								         
								                                                        IF ITfeedback = YES THEN            
                                                                                        {&OUT} "<p>I'm in the ELSE DO Changes to the people_mstr</p>" SKIP.
                                                                                                                                               
							                    ASSIGN
							                    t-patsuf     = people_suffix
                                                t-pattitle   = people_prefix 
                                                t-patfstn    = people_firstname
                                                t-patlstn    = people_lastname
                                                t-patmidn    = people_midname                                   
                                                t-email      = people_email  
                                                t-email2     = people_email2 
                                                t-h-phone    = people_homephone 
                                                t-c-phone    = people_cellphone
                                                t-w-phone    = people_workphone
                                                t-fax-phone  = people_fax 
                                                t-patcomp    = people_company 
                                                t-prefname   = people_mstr.people_prefname   /* 1dot4 */ 
                                                t-gender     = IF people_gender = ? THEN
                                                                   " "
                                                                   ELSE
                                                               IF people_gender = TRUE THEN
                                                                   "Male"
                                                                   ELSE
                                                                   "Female" 
                                                                                     
                                                t-patdob     = people_DOB
                                                act          = 2.
							              					                      IF ITfeedback = YES THEN            
                                                                                        {&OUT} "<p>I'm After the assigned with a t-prefname of -- " prefname "</p>".          
                                                                                          
		                                  /* -------------------------------------------*/  
		                                  
/*		                                        Changed pathing code to use the RUN SEARCH stuff. /* 1dot2 */*/
		                                                     
/*		                                         RUN "../depot/rcode/upcreate-people-mstr.r"*/                 /* 1dot2 */
/*                                                 RUN VALUE(depotcode)                                          /* 1dot2 */*/
                                                 RUN VALUE(SEARCH("SUBpeop-ucU.r"))               /* 1dot4 */ /* **This was a .p Changed it to a .r (13/Nov/15)**  */
		                                               (peop-id ,
		                                                patfstn,
		                                                patmidn,
		                                                patlstn,
		                                                pattitle,
		                                                patsuf,
		                                                patcomp,
		                                                patgen,
		                                                h-phone,
		                                                w-phone,
		                                                c-phone,
		                                                fax-phone,
		                                                email,
		                                                email2,
		                                                peop-addr-id,
		                                                pat-contact,
		                                                patdob,
		                                                second-addr,
		                                                prefname,
		                                                "",               /* title */                                                         /* 1dot5 */
		                                                OUTPUT o-peop-id,
		                                                OUTPUT o-peop-crate,
		                                                OUTPUT o-peop-update,
		                                                OUTPUT o-peop-avail,
		                                                OUTPUT o-peop-success). 
		                                                
		                                                
		                    /*********** Workaround for adding preferred name to people record creation *********/ 
		                               
								        FIND people_mstr WHERE people_mstr.people_id = o-peop-id EXCLUSIVE-LOCK NO-ERROR.  /* 1dot4 */
								        IF AVAILABLE (people_mstr) THEN DO:
								            ASSIGN
								              people_mstr.people_prefname = prefname.
								        END. /** of if avail people_mstr**/         
		                                                
										                                              IF ITfeedback = YES THEN     
								                                                       {&OUT} "<p>Back from else do: patient upcreate people master" SKIP
								                                                              "<br>with a people-id of -- " o-peop-id "</p>".   

                                     END.   /* ELSE DO:  */       
      
                                /* 1dot5 */
	                                FIND state_mstr WHERE state_mstr.state_ISO = RP-state-prov NO-LOCK NO-ERROR.
	                                    IF AVAILABLE (state_mstr) THEN   
	                                        ASSIGN RP-state-prov = state_mstr.state_display_name.
                                /* end of 1dot5 */
                                        
                                     FIND addr_mstr WHERE addr_mstr.addr_id = people_mstr.people_addr_id NO-LOCK NO-ERROR. 
                                      
                                                                                      IF ITfeedback = YES THEN     
                                                                                            {&OUT} "<p>here is addr_addr1 -- " addr_addr1 SKIP
                                                                                                    "<br>with a add1 of -- " add1 "</p>" SKIP.              
                     
                                     IF AVAILABLE (addr_mstr) AND                  
	                                        add1        = addr_addr1 AND               
	                                        add2        = addr_addr2 AND
	                                        add3        = addr_addr3  AND
	                                        city        = addr_city AND
	                                        patzip      = addr_zip AND
	                                        state-prov  = addr_stateprov AND                                    
	                                        cntry     = addr_country 
                                        
                                     THEN DO:
                                            
                                            ASSIGN
		                                    t-add1       = addr_addr1 
                                            t-add2       = addr_addr2  
                                            t-add3       = addr_addr3 
                                            t-city       = addr_city
                                            t-zip        = addr_zip                                     
                                            t-state-prov = addr_stateprov
                                            t-country    = addr_country.  
                                            
											                                          IF ITfeedback = YES THEN     
											                                                {&OUT} "<p>At end of Checking for address changes, NO UPDATES" SKIP
											                                                        "<br>with a addr-addr1 of -- " add1 "</p>".       
                                        END. /* then DO: */
                                        
                                     ELSE DO:
												                                      IF ITfeedback = YES THEN            
												                                             {&OUT} "<p> I HAVE changes to the address" SKIP
												                                                    "<br>peop-addr-ID is -- " peop-addr-ID  SKIP
												                                                    "<br>RP-add-id is -- " RP-add-id SKIP
												                                                    "<br>this is add1 -- " add1 SKIP
												                                                    "<br> and here is city -- " city "</p>" SKIP . 
	                                             
										IF AVAILABLE (addr_mstr) THEN DO:            
										    ASSIGN
										        t-add1       = addr_addr1 
										        t-add2       = addr_addr2  
										        t-add3       = addr_addr3 
										        t-city       = addr_city
										        t-zip        = addr_zip                                     
										        t-state-prov = addr_stateprov
										        t-country    = addr_country
										        act          = 2 .
										          
										    IF                       /* This keeps the RP address update from overwriting the changes here if RP and patient address are the same */
										    peop-addr-ID = RP-add-id THEN                                      
										        new-addr     = YES.
										          
										END.  /* IF AVAILABLE (addr_mstr) THEN DO: */
                                     
/*                                             {../datahub/src/webspeed/pathfix.i "find-addr.r"}. /* 1dot2 */*/
                                                            
/*                                             RUN "../depot/rcode/find-addr.r"*/               /* 1dot2 */
/*                                               RUN VALUE(depotcode)                             /* 1dot2 */*/
                                            RUN VALUE(SEARCH("SUBaddr-findR.r"))            /* 1dot4 */
								              (add1,
								               add2,
								               add3,
								               city,
								               state-prov,
								               patzip,
								               cntry,
								               OUTPUT o-f-addr-id,
								               OUTPUT o-f-addr-error,
								               OUTPUT o-f-addr-ran).    
								               
																		              IF ITfeedback = YES THEN            
																		                       {&OUT} "<p>Ran the fine address procedure<br>"SKIP
																		                              "with a Return o-f-addr-id value of -- " o-f-addr-id "</P>".
								                              
														               
								     IF o-f-addr-id > 0 AND
								        o-f-addr-id <> people_addr_id THEN DO:
								                   
								                   FIND addr_mstr WHERE addr_mstr.addr_id = o-f-addr-id NO-LOCK NO-ERROR.                   
								                     IF AVAILABLE (addr_mstr) THEN DO:
								                       ASSIGN
								                       add1                       = addr_mstr.addr_addr1 
								                       add2                       = addr_mstr.addr_addr2 
								                       add3                       = addr_mstr.addr_addr3  
								                       city                       = addr_mstr.addr_city  
								                       state-prov                 = addr_mstr.addr_state  
								                       cntry                    = addr_mstr.addr_country
								                       patzip                     = addr_mstr.addr_zip
								                       people_mstr.people_addr_id = addr_mstr.addr_id.
								                     
																                      IF ITfeedback = YES THEN            
																                          {&OUT} "<p>Just assigned addr values to variables</p>". 
								                       
								                     END.  /* IF AVAILABLE (addr_mstr) THEN DO: */                                           
                                    
                                    END. /* IF o-f-addr-id > 0 AND o-f-addr-id <> people_addr_id THEN DO:*/  
                                     
                                    ELSE /* DO: */
                                     
                                     IF add1 <> "" THEN DO:  /* This keeps from a record without an address creating a blank address record */ 
							                                                          IF ITfeedback = YES THEN            
							                                                              {&OUT} "<p>About to Ran upcreate-addr-mstr.r procedure" SKIP
							                                                                     "<br>This is o-f-addr-id --" o-f-addr-id  SKIP
							                                                                     "<br>This is peop-addr-ID -- " peop-addr-ID "</p>" SKIP.						          
							                                                                     
/*							                          {../datahub/src/webspeed/pathfix.i "upcreate-addr-mstr.r"}. /* 1dot2 */*/
               
/*									                  RUN "../depot/rcode/upcreate-addr-mstr.r"*/                 /* 1dot2 */
/*                                                      RUN VALUE(depotcode)                                        /* 1dot2 */*/
                                                     RUN VALUE(SEARCH("SUBaddr-ucU.r"))                  /* 1dot4 */
									                 (peop-addr-ID,        /* was here <-- o-f-addr-id >> I'm thinking this is either going to send the value of an existing address ID or Will send 0 which will create one*/                  
									                  add1,        
									                  add2,        
									                  add3,        
									                  city,       
									                  state-prov,  
									                  patzip,
									                  cntry,
									                  county-type,
									                  OUTPUT o-addr-id,
									                  OUTPUT o-addr-create,
									                  OUTPUT o-addr-update,
									                  OUTPUT o-addr-avail,
									                  OUTPUT o-addr-success). 
									                  
																		              IF ITfeedback = YES THEN            
																		                       {&OUT} "<p>Ran upcreate-addr-mstr.r procedure<br>"SKIP
																		                              "with a Return o-addr-id value of -- " o-addr-id "</P>". 
																		                              
									                  FIND addr_mstr WHERE addr_mstr.addr_id = o-addr-id NO-LOCK NO-ERROR.                    
									                     IF AVAILABLE (addr_mstr) THEN DO:              
									                  
									                  ASSIGN
									                   add1                       = addr_mstr.addr_addr1 
									                   add2                       = addr_mstr.addr_addr2 
									                   add3                       = addr_mstr.addr_addr3  
									                   city                       = addr_mstr.addr_city  
									                   state-prov                 = addr_mstr.addr_state  
									                   cntry                    = addr_mstr.addr_country
									                   patzip                     = addr_mstr.addr_zip
									                   people_mstr.people_addr_id = addr_mstr.addr_id
									                   act                        = 2. 
									                      
																	                  IF ITfeedback = YES THEN            
																	                       {&OUT} "<p>Just assigned addr values After creating addr record</p>".    
									                       
									                  END.  /* IF AVAILABLE (addr_mstr) THEN DO: */   
									   END.  /*  ELSE if  */ 
									   
                          END. /* of ELSE DO:    **IF addr1 <> "" THEN DO:**     */   
                             
                                       
               /*------------------------------------------ end of addr -----------------------------------------------------------*/
               
               
							                                                          IF ITfeedback = YES THEN            
							                                                               {&OUT} "<p>Starting to check for patient record updates</p>".
                                               IF 
                                                patcon     = patient_mstr.patient_condition AND
                                                patnotes   = patient_mstr.patient_notes AND
                                                patdoc     = patient_mstr.patient_doctor_ID 
                                                
                                                THEN DO:
                                                     ASSIGN
                                                     t-patcon     = patient_mstr.patient_condition
                                                     t-patnotes   = patient_mstr.patient_notes
                                                     t-patdoc     = patient_mstr.patient_doctor_ID.
                                                     
							                                                          IF ITfeedback = YES THEN            
							                                                               {&OUT} "<p>No patient updates and my t-patdoc is --" t-patdoc "</p>".
                                    /*----------------------------------------------------------------------------------------- */
                                                   IF t-patdoc > 0 THEN DO:   /* patdoc */  
                                                          
                                                           FIND people_mstr WHERE people_mstr.people_id = patient_mstr.patient_doctor_ID AND  /*patient_mstr.patient_doctor_ID*/
                                                                             people_mstr.people_deleted = ? NO-LOCK NO-ERROR.    
                                                    
			                                                  IF AVAILABLE (people_mstr) THEN                
			                                                     ASSIGN                                                         
			                                                     t-doc-fname  = people_mstr.people_firstname     /*(OLD doc names)*/
			                                                     t-doc-lname  = people_mstr.people_lastname.  
			                                                     
			                                        END. /* of IF t-patdoc > 0 then DO */
			                                       
			                                        ELSE
										                                              IF ITfeedback = YES THEN            
							                                                               {&OUT} "<p>NO Doc Rec Found</p>".        
			                                                    
                                                END.   /* THEN DO: */                      
                                              
                                     ELSE DO: 
							                                                          IF ITfeedback = YES THEN            
							                                                               {&OUT} "<p>Found patient updates</p>".
                                                               
                                     /*-----------------------------------------------------------------------------------------*/
                                        IF patdoc > 0 THEN  DO:   
                                                              
                                                               
                                                FIND people_mstr WHERE people_mstr.people_id = patient_mstr.patient_doctor_ID AND  /*patient_mstr.patient_doctor_ID*/
                                                                  people_mstr.people_deleted = ? NO-LOCK NO-ERROR.
                                                                  
							                                                          IF ITfeedback = YES THEN            
							                                                               {&OUT} "<p>Looking for a Doc Rec</p>". 
                                                                   
                                                IF AVAILABLE (people_mstr) THEN
                                                    ASSIGN
                                                    old-doc-fname = people_mstr.people_firstname     /*(OLD doc names)*/  
                                                    old-doc-lname = people_mstr.people_lastname. 
                         /*--------------------------------------------------------------------------------------------------------------------------*/
                                                FIND people_mstr WHERE people_mstr.people_id = patdoc AND  
                                                                  people_mstr.people_deleted = ? NO-LOCK NO-ERROR.
                                                                  
                                                IF AVAILABLE (people_mstr) THEN
                                                    ASSIGN
                                                    doc-fname = people_mstr.people_firstname     /*(NEW doc names)*/  
                                                    doc-lname = people_mstr.people_lastname. 
                         
                         /*--------------------------------------------------------------------------------------------------------------------------*/                           
                                             
							                                                          IF ITfeedback = YES THEN            
							                                                               {&OUT} "<p>Found Doc Rec with t-doc-fname of -- " old-doc-fname . /* t- */
                                        END.  /*  IF t-patdoc > 0 then  DO: */
                                        
                                        ELSE
										                                              IF ITfeedback = YES THEN            
										                                                               {&OUT} "<p>NO Doc Rec Found 2 </p>". 
                                                                      
                                                  ASSIGN
                                                   t-patcon     = patient_mstr.patient_condition
                                                   t-patnotes   = patient_mstr.patient_notes
                                                   t-patdoc     = patient_mstr.patient_doctor_ID.
                                             
                                               /*    t-doc-fname  = people_mstr.people_firstname
                                                     t-doc-lname  = people_mstr.people_lastname.   
                                               */
                                               
/*                                                  {../datahub/src/webspeed/pathfix.i "upcreate-patient-mstr.r"}. /* 1dot2 */*/
                                              
/*		                                          RUN "../depot/rcode/upcreate-patient-mstr.r"*/                 /* 1dot2 */
/*                                                  RUN VALUE(depotcode)                                           /* 1dot2 */*/
                                                     RUN VALUE(SEARCH("SUBpat-ucU.r"))    /* 1dot4 */			                                           (peop-id,
			                                            patcon,
			                                            patnotes,
			                                            RP-peop-id,
			                                            pat-doc,    
			                                            pat-cust-id,
			                                            pat-verified,
			                                            OUTPUT o-pat-id,
			                                            OUTPUT o-pat-create,
			                                            OUTPUT o-pat-updat,
			                                            OUTPUT o-pat-error,
			                                            OUTPUT o-patsuccess). 
			                                            
			                                            ASSIGN
			                                            act = 2
			                                            patient_mstr.patient_doctor_ID = patdoc. 
			                                         
			                                      FIND people_mstr WHERE people_mstr.people_id = patdoc AND
                                                                    people_mstr.people_deleted = ? NO-LOCK NO-ERROR.
                                                                    
                                                  IF AVAILABLE (people_mstr) THEN
                                                                 
                                                        ASSIGN
                                                        doc-fname = people_mstr.people_firstname
                                                        doc-lname = people_mstr.people_lastname.        
			                                          
												                                      IF ITfeedback = YES THEN     
									                                                      {&OUT} "<p>Back from else do: patient upcreate patient master" SKIP
									                                                             "<br>with a patient-id of -- " o-pat-id SKIP 
									                                                             "<br>with a old-doc-fname of -- " old-doc-fname SKIP
									                                                             "<br>with a t-doc-fname of --" t-doc-fname  "</p>".              
				                	              
				                	                 
				                	              
							         END. /* ELSE DO: */
								     
			
								           
																		              IF ITfeedback = YES THEN     
													                                               {&OUT} "<p>*End of update assign*" SKIP
													                                                      "<br>new-rp is --" new-RP "</p>" SKIP.
			                                           
					/*-------------- Age calculation  Is being used to display age in User feedback after updating a record  -------------------*/ 
							                                    
							                           DO:
							                                cont = thisday - t-patdob.
							                                IF cont >= 365 THEN DO:   
							                                    patientage = cont / 365.242.                    
							                                          days = cont - patientage * 365.242 . 
							                                                
							                                END. /* of IF cont >= 365 */ 
							                               ELSE 
							                                days = cont. 
							                                
							                                                             IF ITfeedback = YES THEN     
                                                                                                   {&OUT} "<p>INSIDE Age Calculation" SKIP
                                                                                                          "<br>t-patdob -- " t-patdob SKIP
                                                                                                          "<br>cont -- "cont SKIP
                                                                                                          "<br>patientage --" patientage SKIP
                                                                                                          "<br>days -- " days "</p>" SKIP.
							                          END. /* if thatday <> ? then  DO:  */ 
					/*---------------- End of Age Calclation --------------------------------------------------------------------------*/
					           
							                    
/*------------------------------------------------ start of RP update -------------------------------------------------------------------------------------------------------*/
	
	           IF new-RP = NO THEN DO:
	                                
				    						    						    	
							    FIND people_mstr  WHERE people_id  = RP-peop-id     NO-LOCK NO-ERROR.
                                FIND addr_mstr    WHERE addr_id    = people_addr_id NO-LOCK NO-ERROR.
                                FIND patient_mstr WHERE patient_id = people_id      NO-LOCK NO-ERROR.     	                          
					                                                                   
                          									
                       
/*                                        END. /* IF AVAILABLE (addr_mstr) THEN DO:  */*/

/*                            {../datahub/src/webspeed/pathfix.i "find-people.r"}. /* 1dot2 */*/
                          
/*                            RUN "../depot/rcode/find-people.r"*/               /* 1dot2 */
/*                              RUN VALUE(depotcode)                               /* 1dot2 */*/
                                RUN VALUE(SEARCH("SUBpeop-findR.r"))  /* 1dot4 */
                                     (RP-title,
                                      RP-fstn,
                                      RP-midn,
                                      RP-lstn,
                                      RP-suf,
                                      OUTPUT o-RP-peop-id,
                                      OUTPUT o-RP-peop-addr-id,
                                      OUTPUT o-RP-peop-error,
                                      OUTPUT o-RP-peop-ran).
                                                                                    IF ITfeedback = YES THEN
                                                                                              {&OUT} "<p>Ran RP find-people.r   ( this is a copy )" SKIP                                                                                          
                                                                                                    "<br>Ran RP find-people.r" SKIP
                                                                                                    "<br>useing first name of-- " RP-fstn SKIP
                                                                                                    "<br>useing last name of-- " RP-lstn SKIP
                                                                                                    "<br>RP-peop-ID is -- " RP-peop-id SKIP
                                                                                                    "<br>came back With o-RP-peop-id -- " o-RP-peop-id SKIP
                                                                                                    "<br>o-RP-peop-addr-id -- " o-RP-peop-addr-id SKIP
                                                                                                    "<br>o-RP-peop-error -- " o-RP-peop-error SKIP
                                                                                                    "<br>o-RP-peop-run -- " o-RP-peop-ran SKIP
                                                                                                    "</p>" SKIP. 
                                        IF o-RP-peop-id > 0 THEN DO:
                                            ASSIGN
                                            RP-peop-id = o-RP-peop-id
                                            RP-add-id  = o-RP-peop-addr-id.
                                        END. /* IF o-RP-peop-id > 0 THEN DO:*/                                        
                                  
                                          
                                 FIND people_mstr  WHERE  people_id = RP-peop-id     NO-ERROR.  /*  NO-LOCK */       
                                                               
	                             IF AVAILABLE (people_mstr) THEN DO:  
	                               	                                 	                                    
														                              IF ITfeedback = YES THEN    
								  						                                {&OUT} "<p>I have an RP people record and it is --" RP-peop-id SKIP
														                                        "<br>with a RP-add-id of -- " RP-add-id "</p>".                                     
		                                
		                                
			                                IF 
		                                        RP-suf         = people_suffix  AND
		                                        RP-title       = people_prefix AND 		                                                                             
		                                        RP-fstn        = people_firstname AND                                                
		                                        RP-lstn        = people_lastname  AND 
		                                        RP-midn        = people_midname AND
		                                         		                                                                         
		                                        RP-email       = people_email AND
		                                        RP-email2      = people_email2 AND                                       
		                                        RP-h-phone     = people_homephone AND                        
		                                        RP-fax-phone   = people_fax AND 
		                                        RP-w-phone     = people_workphone AND
		                                        RP-c-phone     = people_cellphone AND
		                                        RP-dob         = people_dob 
		                            	                                          
		                                    THEN DO: 
		                                      
												                                      IF ITfeedback = YES THEN     
										                                               {&OUT} "<p>I don't have RP-peop_mstr changes</p>".  
                                          
                                                ASSIGN
                                                t-RP-fstn        = people_firstname 
                                                t-RP-lstn        = people_lastname 
                                                t-RP-midn        = people_midname 
                                                t-RP-title       = people_prefix 
                                                t-RP-suf         = people_suffix
                                                t-RP-h-phone     = people_homephone 
                                                t-RP-c-phone     = people_cellphone 
                                                t-RP-w-phone     = people_workphone   
                                                t-Rp-fax-phone   = people_fax 
                                                t-RP-email       = people_email
                                                t-RP-email2       = people_email2 
                                                t-RP-add-id      = people_addr_id
                                                t-RP-dob         = people_dob. 
                                                
                                                
                                          
                                        
	                                        END.  /* THEN DO: */ 
	                                     
	                             ELSE DO:  
	                                            
	                                           ASSIGN	                                             
					                            t-RP-fstn        = people_firstname 
											    t-RP-lstn        = people_lastname 
											    t-RP-midn        = people_midname 
											    t-RP-title       = people_prefix 
											    t-RP-suf         = people_suffix
											    t-RP-h-phone     = people_homephone 
											    t-RP-c-phone     = people_cellphone 
											    t-RP-w-phone     = people_workphone   
											    t-Rp-fax-phone   = people_fax 
											    t-RP-email       = people_email
											    t-RP-email2      = people_email2 
											    t-RP-add-id      = people_addr_id
											    t-RP-dob         = people_dob. 
											    
/*											  {../datahub/src/webspeed/pathfix.i "upcreate-people-mstr.r"}. /* 1dot2 */*/
											    
/*											  RUN "../depot/rcode/upcreate-people-mstr.r"*/                 /* 1dot2 */
/*                                              RUN VALUE(depotcode)                                          /* 1dot2 */*/
                                              RUN VALUE(SEARCH("SUBpeop-ucU.r"))  /* 1dot4 */
                                               (RP-peop-id ,
                                                RP-fstn,
                                                RP-midn,
                                                RP-lstn,
                                                RP-title,
                                                RP-suf,
                                                RP-company,
                                                RP-gen,
                                                RP-h-phone,
                                                RP-w-phone,
                                                RP-c-phone,
                                                RP-fax-phone,
                                                RP-email,
                                                RP-email2,
                                                RP-peop-addr-id,
                                                RP-patcon,
                                                RP-dob, 
                                                second-addr,
                                                RP-prefname,                                                    /* 1dot5 */
                                                "",                 /* title */
                                                OUTPUT o-RP-peop-id,
                                                OUTPUT o-RP-peop-crate,
                                                OUTPUT o-RP-peop-update,
                                                OUTPUT o-RP-peop-avail,
                                                OUTPUT o-RP-peop-success).                    
                                                
                                                ASSIGN
                                                act = 2.
                                                
												                                      IF ITfeedback = YES THEN                                                   
												                                                 {&OUT} "<p>Back from RP upcreate people master With changes to RP people record </p>".                                                     
                                                                                    
                                                                                                
                                 END. /* ELSE DO: */           
                      END. /*  IF AVAILABLE (people_mstr) THEN DO: NEW!!!  */
                      
                 IF new-addr = NO  THEN DO:  /* This keeps the RP address update from overwriting the changes already made if RP and patient address are the same */
                             
                      FIND addr_mstr WHERE addr_mstr.addr_id = RP-add-id NO-LOCK NO-ERROR.
                      IF AVAILABLE (addr_mstr) THEN
                      
            /* ----------------------- Assigning variables for user display  ---------------------------------------------*/
                       
                      ASSIGN       
                          t-RP-add1        = addr_addr1
                          t-RP-add2        = addr_addr2
                          t-RP-add3        = addr_addr3
                          t-RP-city        = addr_city
                          t-RP-state-prov  = addr_stateprov
                          t-RP-zip         = addr_zip
                          t-RP-country     = addr_country.
                      
                      FIND people_mstr WHERE people_mstr.people_id = RP-peop-id  NO-ERROR. 
                      IF AVAILABLE (people_mstr) THEN
                      
                      ASSIGN                                              
                          RP-fstn        = people_firstname                           
                          RP-lstn        = people_lastname 
                          RP-midn        = people_midname 
                          RP-title       = people_prefix 
                          RP-suf         = people_suffix
                          RP-h-phone     = people_homephone 
                          RP-c-phone     = people_cellphone 
                          RP-w-phone     = people_workphone   
                          Rp-fax-phone   = people_fax 
                          RP-email       = people_email
                          RP-email2      = people_email2 
                          RP-add-id      = people_addr_id
                          RP-dob         = people_dob
                          RP-prefname    = people_mstr.people_prefname.                                /* 1dot5 */ 
                             
                             
                                                                                    IF ITfeedback = YES THEN    
                                                                                          {&OUT} "<p>new-addr is -- " new-addr "</p>" SKIP.
            /* ---------------------------------------------------------------------------------------------------------------------------- */  
                            
                            
                                 IF AVAILABLE (addr_mstr) AND 
                                                RP-add1        = addr_addr1 AND               
                                                RP-add2        = addr_addr2 AND
                                                RP-add3        = addr_addr3  AND
                                                RP-city        = addr_city AND
                                                RP-zip         = addr_zip AND
                                                RP-state-prov  = addr_stateprov AND                                    
                                                RP-country     = addr_country /* AND                                   
                                                patcomp        = people_company  */  
                                                
                                                THEN DO:							    
											    
											    ASSIGN
										        t-RP-add1        = addr_addr1 
                                                t-RP-add2        = addr_addr2 
                                                t-RP-add3        = addr_addr3 
                                                t-RP-city        = addr_city 
                                                t-RP-state-prov  = addr_stateprov 
                                                t-RP-zip         = addr_zip 
                                                t-RP-country     = addr_country.                                          
                                                                                              
										                                              IF ITfeedback = YES THEN    
										                                                  {&OUT} "<p>End of checking for RP addr record changes; there are No Updates" SKIP
										                                                         "<br>Just Checking something here RP-add1 -- " RP-add1 "</P>" SKIP.
                                                                           
								                END. /* then DO: */
						   		
	/*--------------------------------------------------------------------------------------------------------------------------------------------*/
	                            ELSE 
	                             
	                             IF RP-add1 <> "" THEN DO:
										                                              IF ITfeedback = YES THEN            
											                                                 {&OUT} "<p> I have changes to the RP address" SKIP
											                                                        									                                                            
										                                                            "<br>* These are RP addrs changes*" SKIP
                                                                                                    "<br>RP-addr1--" RP-add1 SKIP
                                                                                                    "<br>RP-add2 - " RP-add2 SKIP
                                                                                                    "<br>RP-add3 -- " RP-add3 SKIP
                                                                                                    "<br>RP-city -- " RP-city SKIP
                                                                                                    "<br>RP-state -- " RP-state-prov SKIP
                                                                                                    "<br>RP-zip -- " RP-zip SKIP
                                                                                                    "<br>RP-country -- " RP-country SKIP                                                                                               
                                                                                                    "<br>here is the RP-add-id -- " RP-add-id "</p>" SKIP. 
                                                                                                    
                                 FIND addr_mstr WHERE addr_mstr.addr_id = RP-add-id NO-LOCK NO-ERROR. /* just added this on monday 5/11 */
                            
                                     IF AVAILABLE (addr_mstr) THEN                                                              
                                                 
                                            ASSIGN
                                                t-RP-add1        = addr_addr1 
                                                t-RP-add2        = addr_addr2 
                                                t-RP-add3        = addr_addr3 
                                                t-RP-city        = addr_city 
                                                t-RP-state-prov  = addr_stateprov 
                                                t-RP-zip         = addr_zip 
                                                t-RP-country     = addr_country.
                                                                                      IF ITfeedback = YES THEN            
                                                                                               {&OUT} "<p>Here we are after the t- assign</p>"SKIP. 
                                                                                               
/*                                             {../datahub/src/webspeed/pathfix.i "find-addr.r"}. /* 1dot2 */*/
                   
/*                                             RUN "../depot/rcode/find-addr.r"*/               /* 1dot2 */
/*                                               RUN VALUE(depotcode)                             /* 1dot2 */*/
                                             RUN VALUE(SEARCH("SUBaddr-findR.r"))       /*1dot4 */
                                              (RP-add1,
                                               RP-add2,
                                               RP-add3,
                                               RP-city,
                                               RP-state-prov,
                                               RP-zip,
                                               RP-country,
                                               OUTPUT o-f-RP-addr-id,
                                               OUTPUT o-f-RP-addr-error,
                                               OUTPUT o-f-RP-addr-ran).                                           
										                                              IF ITfeedback = YES THEN
										                                                       {&OUT} "<p>Ran the fine address procedure<br>"SKIP
										                                                              "with a Return o-f-RP-addr-id value of -- " o-f-RP-addr-id SKIP
										                                                              "<br>this is t-RP-add1 -- " t-RP-add1 SKIP
										                                                              "<br>this is RP-add1 -- " RP-add1 SKIP "</P>".
                               

			                                     IF o-f-RP-addr-id > 0 AND  /* This assigns the RP variables if the find returns an existing address record */
			                                        o-f-RP-addr-id <> people_addr_id THEN DO:
			
			                                                   FIND addr_mstr WHERE addr_mstr.addr_id = o-f-RP-addr-id NO-LOCK NO-ERROR.
			                                                     IF AVAILABLE (addr_mstr) THEN DO:
			                                                       ASSIGN
			                                                       RP-add1           = addr_mstr.addr_addr1
			                                                       RP-add2           = addr_mstr.addr_addr2
			                                                       RP-add3           = addr_mstr.addr_addr3
			                                                       RP-city           = addr_mstr.addr_city
			                                                       RP-state-prov     = addr_mstr.addr_state
			                                                       RP-country        = addr_mstr.addr_country
			                                                       RP-zip            = addr_mstr.addr_zip.

								                                                      IF ITfeedback = YES THEN
								                                                       {&OUT} "<p>Just assigned RP-addr values to RP-variables</p>".
								                                                       
								                ASSIGN
                                                RP-add-id = o-f-RP-addr-id
                                                people_mstr.people_addr_id = o-f-RP-addr-id
                                                act = 2.                                     

                                                 END.  /* o-f-RP-addr-id > 0 AND o-f-RP-addr-id <> people_addr_id THEN DO*/
                                END. /* IF RP-add1 <> "" THEN DO: */
/*                        END. /*  IF new-addr = NO THEN DO:  moving this down */*/
                        
                                 ELSE DO:
                                                                                                          
                                                                                      IF ITfeedback = YES THEN            
                                                                                       {&OUT} "<p>About to run upcreate-addr-mstr" SKIP
                                                                                              "<br>with a RP-add-id of -- " RP-add-id "</p>" SKIP. 
                                                                                       
                                          IF RP-add1 <> "" THEN DO:   /* This keeps from a record without an address creating a blank address record */

/*                                                      {../datahub/src/webspeed/pathfix.i "upcreate-addr-mstr.r"}. /* 1dot2 */*/
               
/*                                                    RUN "../depot/rcode/upcreate-addr-mstr.r"*/                 /* 1dot2 */
/*                                                      RUN VALUE(depotcode)                                        /* 1dot2 */*/
                                                     RUN VALUE(SEARCH("SUBaddr-ucU.r"))   /* 1dot4 */
                                                     (RP-add-id,  /* o-f-RP-addr-id */                       
                                                      RP-add1,        
                                                      RP-add2,        
                                                      RP-add3,        
                                                      RP-city,       
                                                      RP-state-prov,  
                                                      RP-zip,         
                                                      RP-country,
                                                      county-type,
                                                      OUTPUT o-RP-addr-id,
                                                      OUTPUT o-RP-addr-create,
                                                      OUTPUT o-RP-addr-update,
                                                      OUTPUT o-RP-addr-avail,
                                                      OUTPUT o-RP-addr-success). 
                                                      
                                                      ASSIGN
                                                      RP-add-ID = o-RP-addr-id
                                                      people_mstr.people_addr_id = o-f-RP-addr-id
                                                      act = 2.
                                                      
								                                                      IF ITfeedback = YES THEN            
								                                                           {&OUT} "<p>Ran upcreate-addr-mstr.r procedure (for RP rec)" SKIP
								                                                                  "<br>with a Return o-RP-addr-id value of -- " o-RP-addr-id SKIP
								                                                                  "<br>This is RP-add-id -- " RP-add-id SKIP
								                                                                  "<br>This is RP-add1 -- " RP-add1 "</P>" SKIP. 
                                                                  

                                          END.  /* RP-add1 <> "" THEN DO:m*/ 
                                END. /* of ELSE DO: */   
				        END. /*  IF new-RP = NO THEN DO: ??? */
 END. /*  IF new-addr = NO THEN DO: */                                
                           
                /*------------------------ Looking for responsible person addr record ------------------------------- */                   
                     
			                        FIND  FIRST addr_mstr WHERE addr.addr_id = RP-add-ID /*FIRST*/ NO-ERROR. /* NO-LOCK */
                                
		                                    IF AVAILABLE (addr_mstr) THEN DO:
		                                         ASSIGN
		                                         people_addr_id  = addr_id .                                       
		                                    
											                                          IF ITfeedback = YES THEN     
											                                            {&OUT} "<p>Found a RP People Addr and assigned it to people_addr_id" SKIP
											                                                   "<br>#1this is people_mstr.people_addr_id for RP people--  " people_mstr.people_addr_id "</p>".
		                                          
		                                    END.  /** of if avail addr_mstr **/    
                       
                             
                                                        
                                                        
                                                        
	                                FIND patient_mstr WHERE patient_id = peop-id AND
	                                      patient_mstr.patient_deleted = ? NO-ERROR.
	                                        
											                                          IF ITfeedback = YES THEN  
											                                            {&OUT} "<p>Assiging RP ID to patient ID" SKIP
											                                                    "<br>This is patient ID--" peop-id  SKIP
											                                                    "<br>This is RP id--" o-RP-peop-id SKIP
											                                                    "<br>This is the RP addr ID--"RP-add-id "</p>".
	                         
	                                        IF AVAILABLE (patient_mstr) THEN DO:                      
	                                             ASSIGN
	                                             patient_RP_ID  = o-RP-peop-ID.                                        
	                                        
											                                          IF ITfeedback = YES THEN  
											                                             {&OUT} "<p>Added RP-ID to patient_RP_ID" SKIP
											                                                    "<br>patdoc is--" patdoc SKIP
											                                                    "<br>and t-patdoc is--" t-patdoc 
											                                                    "<br>(NO)New-RP = -- " new-RP "<p>".
	                                        
	                                        END. /* IF AVAILABLE (patient_mstr) */                                   
                                     
				END. /*  IF new-RP = NO THEN DO: (547) */
				           
			                                                                                  
                                                   
/***************************** start of NEW RP was checked YES *****************************************************************************************/	
	
			ELSE IF new-RP = YES AND
			       rp-stop = YES THEN DO:
			
			/* ----------------------------------------------------------- Assigning variables for user display ---------------------------------------------*/
			           
			          FIND addr_mstr WHERE addr_mstr.addr_id = RP-add-id NO-LOCK NO-ERROR.
			          IF AVAILABLE (addr_mstr) THEN
			           
			          ASSIGN
	                      t-RP-add1        = addr_addr1
	                      t-RP-add2        = addr_addr2
	                      t-RP-add3        = addr_addr3
	                      t-RP-city        = addr_city
	                      t-RP-state-prov  = addr_stateprov
	                      t-RP-zip         = addr_zip
	                      t-RP-country     = addr_country.
                      
                      FIND people_mstr WHERE people_mstr.people_id = RP-peop-id NO-LOCK NO-ERROR. 
                      IF AVAILABLE (people_mstr) THEN
                      
                      ASSIGN                                              
	                      t-RP-fstn        = people_firstname 	                        
	                      t-RP-lstn        = people_lastname 
	                      t-RP-midn        = people_midname 
	                      t-RP-title       = people_prefix 
	                      t-RP-suf         = people_suffix
	                      t-RP-h-phone     = people_homephone 
	                      t-RP-c-phone     = people_cellphone 
	                      t-RP-w-phone     = people_workphone   
	                      t-Rp-fax-phone   = people_fax 
	                      t-RP-email       = people_email
	                      t-RP-email2      = people_email2 
	                      t-RP-add-id      = people_addr_id
	                      t-RP-dob         = people_dob.   

														                              IF ITfeedback = YES THEN
											                                                    {&OUT} "<p>(YES) New-RP = --" new-RP SKIP
											                                                           "<br>There's going to be a new RP assignment</p>".
											                                                           
	/*----------------------------------------------------------------------------------------------------------------------------------------------------------------*/
	
	
/*				 FOR EACH people_mstr WHERE people_mstr.people_firstname = RP-fstn AND        */
/*			                                people_mstr.people_lastname  = RP-lstn NO-LOCK:*/
/*                                                                                  */
/*		                ASSIGN                                                          */
/*		                cout = cout + 1.                                                */
/*                                                                                  */
/*                 END. /* FOR EACH people_mstr  */                                 */
/*                                                                                  */
/*	                IF cout > 1 THEN DO:                                             */
/*	                    ASSIGN                                                       */
/*	                    act = 0.                                                     */
                                                                                      
	/*----------------------------------------------------------------------------------------------------------------------------------------------------------------*/										                                                           
		
	     {&OUT}
	             "<div class='row'>" SKIP
                 "<div class='grid_12'>" SKIP
                 "<div class='table_report fixed_table'>" SKIP
                 "   <table>" SKIP
                 "     <thead>" SKIP
                 "       <tr>" SKIP
                 "           <th colspan='7'>Select the People ID that you would like to Assign as an RP</th>" SKIP
                 "       </tr>" SKIP
                 "       <tr>" SKIP
                 "           <td>People ID </td>" SKIP
                 "           <td>RP Person's Name</td>" SKIP
/*               "           <td>Last Name</td>" skip*/
                 "           <td>Date of Birth</td>" SKIP
                 "           <td>Email address</td>" SKIP
                 "           <td>Address</td>" SKIP
                 "           <td>State</td>" SKIP
                 "       </tr>" SKIP
                 "     </thead>" SKIP.

                  FOR EACH people_mstr WHERE /* people_id = patient_id AND */
                                          people_firstname BEGINS RP-fstn AND /*BEGINS patfstn */
                                          people_lastname  BEGINS RP-lstn AND /*BEGINS patlstn */
                                          people_mstr.people_deleted = ?  NO-LOCK BREAK BY people_lastname BY people_firstname:

	                    ASSIGN
	                    add1       = ""
	                    state-prov = ""
	                    cout       = cout + 1.   
	
	                    FOR EACH addr_mstr WHERE  addr_id = people_addr_id AND
	                                             addr_mstr.addr_deleted = ?  NO-LOCK:
	
	                        ASSIGN
	                        add1       = addr_mstr.addr_addr1
	                        state-prov = addr_mstr.addr_stateprov.
	
	                    END.  /* FOR EACH addr_mstr WHERE  addr_id = people_addr_id AND */

/*                cout = cout + 1.*/

		                  IF avail (people_mstr) THEN DO:  
			           {&OUT}
			                 "         <tr>" SKIP   
			                 "            <td> <a href='patient_RP.r?pep-id=" peop-ID "&pep-addr=" people_addr_id "&RP-id=" people_id "&h-keep-going=YES&h-first-stop=1&h-rp-stop=NO&h-new-rp=YES&mod=1&whattorun=3.4&notes=" patnotes "'>" people_id "</a></td>" SKIP
			/*               "            <td>" people_firstname "</td>" skip*/
			                 "            <td>" people_lastname ", "people_firstname "</td>" SKIP
			                 "            <td>" people_dob "</td>" SKIP
			                 "            <td>" people_email "</td>" SKIP
			                 "            <td>" add1 "</td>" SKIP
			                 "            <td>" state-prov "</td>" SKIP
			                 "       </tr>" SKIP.			                 
		                  END. /* IF avail (people_mstr) THEN DO:  */                 
                  END. /* FOR EACH people_mstr */
                  
                  IF cout > 0 THEN DO:
                      {&OUT}
                             "       <tr>" SKIP
                             "           <td colspan='7'align='center'><i>End of Report.</i>" SKIP
                             "           </td>" SKIP
                             "       </tr>" SKIP
                              "   </table>" SKIP
                             "</div>" SKIP
                             "</div>" SKIP
                             "</div>" SKIP
                             "<br>" SKIP.   
                             
           /*---------------------------------------------------------------------------------------------------------*/
       {&OUT}    
             "<div class='grid_12'>" SKIP
                " <div class='row'>" SKIP
                " <div class='grid_5'></div>" SKIP
                "   <div class='grid_2'>" SKIP
                "     <form method='post' ACTION='patient.r'>" SKIP 
                "       <input type='hidden' name='mod' value='1' >" SKIP
                "       <input type='hidden' name='h-keep-going' value='YES' >" SKIP
                "       <input type='hidden' name='h-first-stop'   value='1' >" SKIP                
                "       <input type='hidden' name='pep-id' value='" peop-id "'>" SKIP 
                "       <input type='hidden' name='pep-addr' value='" peop-addr-id "'>" SKIP 
                "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
                "       <BUTTON type='submit' class='btn'>Back to Patient Update</BUTTON>" SKIP               
                "     </form>" SKIP
                "   </div>" SKIP
                "   <div class='grid_5'></DIV>" SKIP
                " </div>" SKIP.
           
                                                      
		               {&OUT}
		                     "<div class='row'>" SKIP
		                     "<div class='grid_12'>" SKIP
		                     "<div class='row'>" SKIP
		                     "  <div class='grid_5'></div>" SKIP
		                     "   <div class='grid_2'>" SKIP
		                     "     <form method='post' ACTION='patient.r'>" SKIP
		                     "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP
		                     "       <BUTTON type='submit' class='btn'>New Patient Update</BUTTON>" SKIP
		                     "     </form>" SKIP
		                     "   </div>" SKIP
		                     "  <div class='grid_5'> </DIV>" SKIP
		                     "</div>" SKIP
		                     "</div>" SKIP
		                     "</div>" SKIP.
                  END.  /*  IF cout > 0 THEN DO:  */                
              
                  IF cout = 0 THEN DO: 
                           
		               {&OUT}
		                     "       <tr>" SKIP
		                     "           <td colspan='7'align='center'>No Patient found." SKIP   
		                     "           </td>" SKIP
		                     "       </tr>" SKIP   
		                     "   </table>" SKIP
		                     "</div>" SKIP
		                     "</div>" SKIP
		                     "</div>" SKIP
		                     "<br>" SKIP.   		                     
		
					    {&OUT}    
			                 "<div class='grid_12'>" SKIP
			                 " <div class='row'>" SKIP
			                 " <div class='grid_5'></div>" SKIP
			                 "   <div class='grid_2'>" SKIP
			                 "     <form method='post' ACTION='patient.r'>" SKIP 
			                 "       <input type='hidden' name='mod' value='1' >" SKIP
			                 "       <input type='hidden' name='h-keep-going' value='YES' >" SKIP
			                 "       <input type='hidden' name='h-first-stop'   value='1' >" SKIP                
			                 "       <input type='hidden' name='pep-id' value='" peop-id "'>" SKIP 
			                 "       <input type='hidden' name='pep-addr' value='" peop-addr-id "'>" SKIP 
			                 "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
			                 "       <BUTTON type='submit' class='btn'>Back to Patient Update</BUTTON>" SKIP               
			                 "     </form>" SKIP
			                 "   </div>" SKIP
			                 "   <div class='grid_5'></DIV>" SKIP
			                 " </div>" SKIP. 
		                                      
		               {&OUT}
		                     "<div class='row'>" SKIP                  
		                     "  <div class='grid_5'></div>" SKIP
		                     "   <div class='grid_2'>" SKIP
		                     "     <form method='post' ACTION='patient.r'>" SKIP 
		                     "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
		                     "       <BUTTON type='submit' class='btn'>New Patient Update</BUTTON>" SKIP               
		                     "     </form>" SKIP
		                     "   </div>" SKIP
		                     "  <div class='grid_5'> </DIV>" SKIP
		                     "</div>" SKIP
		                     "</div>" SKIP
		                     "</div>" SKIP.               

                  END.  /*  IF cout = 0 THEN DO:  */

           ASSIGN
           RP-stop = YES.  
            
             END. /*  ELSE DO: Did not find a people record */ 
                           
                    END.  /* ELSE IF new-RP = YES DO: (547)*/    
                    
                    
                     /*-------------------------------------------------------------------------------------------------------------------*/                                                                                                                                                       

           IF RP-stop = NO /* and
            act-edit = "" */ THEN DO:
		    
/*		                         {../datahub/src/webspeed/pathfix.i "find-people.r"}. /* 1dot2 */    		     */
/*					                                                                                                      */
/*/*                                 RUN "../depot/rcode/find-people.r"*/                    /* 1dot2 */*/
/*                                   RUN VALUE(depotcode)                                    /* 1dot2 */*/
/*                                     (RP-title,                                                       */
/*                                      RP-fstn,                                                        */
/*                                      RP-midn,                                                        */
/*                                      RP-lstn,                                                        */
/*                                      RP-suf,                                                         */
/*                                      OUTPUT o-RP-peop-id,                                            */
/*                                      OUTPUT o-RP-peop-addr-id,                                       */
/*                                      OUTPUT o-RP-peop-error,                                         */
/*                                      OUTPUT o-RP-peop-ran).                                          */
/*                                                                                                      */
/*                                      ASSIGN                                                          */
/*                                      act = 2.                                                        */
												                                      IF ITfeedback = YES THEN 
												                                             {&OUT} "<p>Ran RP find-people.r" SKIP
												                                                    "<br>useing first name of-- " RP-fstn SKIP
												                                                    "<br>useing last name of-- " RP-lstn SKIP												                                                    
												                                                    "<br>came back With o-RP-peop-id -- " o-RP-peop-id SKIP
												                                                    "<br>o-RP-peop-addr-id -- " o-RP-peop-addr-id SKIP
												                                                    "<br>o-RP-peop-error -- " o-RP-peop-error SKIP
												                                                    "<br>o-RP-peop-run -- " o-RP-peop-ran  SKIP
												                                                    "<br>RP-peop-ID is -- " RP-peop-id SKIP
												                                                    "<br>act is -- " act "</p>" SKIP.                               
/*           END. /* IF RP-stop = NO THEN DO: */*/
          
    
     
/*                FIND first people_mstr WHERE people_mstr.people_firstname = RP-fstn and                                                */
/*                                              people_mstr.people_lastname = RP-lstn and                                                */
/*                                                   people_mstr.people_DOB = RP-dob  and                                                */
/*                                                 people_mstr.people_email = RP-email NO-LOCK NO-ERROR.                                 */
/*                                                                                                                                       */
/*                                       IF AVAILABLE (people_mstr) THEN DO:                                                             */
/*                                                                                      IF ITfeedback = YES THEN                         */
/*                                                                                             {&OUT} "<p>We found a people record" SKIP.*/
         
     /*-------------------------------------------------------------------------------------------------------------------*/
         
/*                                      IF o-RP-peop-id > 0 THEN DO:*/
                                          
/*                                      IF people_mstr.people_id > 0 THEN DO:*/
                                          
/*                                          FIND people_mstr WHERE people_mstr.people_id = RP-peop-id  NO-ERROR . /* NO-LOCK may need to update  */*/
/*                                          IF AVAILABLE (people_mstr) THEN                                                                        */
/*	                                          ASSIGN                                                                           */
/*	                                          RP-fstn        = people_firstname                                                */
/*	                                          RP-lstn        = people_lastname                                                 */
/*	                                          RP-midn        = people_midname                                                  */
/*	                                          RP-title       = people_prefix                                                   */
/*	                                          RP-suf         = people_suffix                                                   */
/*	                                          RP-h-phone     = people_homephone                                                */
/*	                                          RP-c-phone     = people_cellphone                                                */
/*	                                          RP-w-phone     = people_workphone                                                */
/*	                                          Rp-fax-phone   = people_fax                                                      */
/*	                                          RP-email       = people_email                                                    */
/*	                                          RP-email2      = people_email2                                                   */
/*	                                          RP-add-id      = people_addr_id                                                  */
/*	                                          RP-dob         = people_dob.                                                     */
/*	                                                                                                                            */
/*	                                                                                                                            */
/*                                           FIND addr_mstr WHERE addr_mstr.addr_id = people_mstr.people_id NO-LOCK NO-ERROR. */
/*                                           IF AVAILABLE (addr_mstr) THEN                                                    */
/*                                                                                                                            */
/*                                           ASSIGN                                                                           */
/*                                            RP-add1        = addr_addr1                                                     */
/*                                            RP-add2        = addr_addr2                                                     */
/*                                            RP-add3        = addr_addr3                                                     */
/*                                            RP-city        = addr_city                                                      */
/*                                            RP-state-prov  = addr_stateprov                                                 */
/*                                            RP-zip         = addr_zip                                                       */
/*                                            RP-country     = addr_country                                                   */
/*                                            act            = 20.                                                            */
/*                                                                                                                            */
/*/*                                       END.  /*  IF AVAILABLE (people_mstr) THEN DO: */*/                                 */
/*                                                                                                                            */
/*{&OUT}                                                                                                                      */
/*         "    <H1 align='center'><SPAN style='COLOR: #E60000;'>This Person's Record Already Exist.</SPAN><BR></H1>" skip    */
/*         "    <p align='center'><b>You can change to this person by using the Change Responsible Person Form.</b></p>" skip.*/
/*                                                                                                                            */
/*         {RP-rec-display.i}.                                                                                                */
/*                                                                                                                            */
/*{&OUT}   "<br>" skip                                                                                                        */
/*         "<div class='grid_12'>" SKIP                                                                                       */
/*         " <div class='row'>" SKIP                                                                                          */
/*         " <div class='grid_5'></div>" SKIP                                                                                 */
/*         "   <div class='grid_2'>" SKIP                                                                                     */
/*         "     <form method='post' ACTION='patient.r'>" SKIP                                                                */
/*         "       <input type='hidden' name='mod' value='1' >" SKIP                                                          */
/*         "       <input type='hidden' name='h-keep-going' value='YES' >" SKIP                                               */
/*         "       <input type='hidden' name='h-first-stop'   value='1' >" SKIP                                               */
/*         "       <input type='hidden' name='pep-id' value='" peop-id "'>" SKIP                                              */
/*         "       <input type='hidden' name='pep-addr' value='" peop-addr-id "'>" SKIP                                       */
/*         "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                                         */
/*         "       <BUTTON type='submit' class='btn'>Back to Patient Update</BUTTON>" SKIP                                    */
/*         "     </form>" SKIP                                                                                                */
/*         "   </div>" SKIP                                                                                                   */
/*         "   <div class='grid_5'></DIV>" SKIP                                                                               */
/*         " </div>" SKIP.                                                                                                    */
/*                                                                                                                            */
/*                                                                                                                            */
/*{&OUT}                                                                                                                      */
/*          "<div class='row'>" SKIP                                                                                          */
/*          "<div class='grid_12'>" SKIP                                                                                      */
/*          "<div class='row'>" SKIP                                                                                          */
/*          "  <div class='grid_5'></div>" SKIP                                                                               */
/*          "   <div class='grid_2'>" SKIP                                                                                    */
/*          "     <form method='post' ACTION='patient.r'>" SKIP                                                               */
/*          "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                                        */
/*          "       <BUTTON type='submit' class='btn'>New Patient Update</BUTTON>" SKIP                                       */
/*          "     </form>" SKIP                                                                                               */
/*          "   </div>" SKIP                                                                                                  */
/*          "  <div class='grid_5'> </DIV>" SKIP                                                                              */
/*          "</div>" SKIP                                                                                                     */
/*          "</div>" SKIP                                                                                                     */
/*          "</div>" SKIP.                                                                                                    */
                                            
                                            
	                  
	                
/*	                                           ASSIGN                                                        */
/*                                          RP-peop-id = people_mstr.people_id /* o-RP-peop-id*/            */
/*                                          RP-add-id  = people_mstr.people_addr_id  /* o-RP-peop-addr-id */*/
                                          
                                          
/*                                          act        = 20.*/
                                                                                      IF ITfeedback = YES THEN 
                                                                                            {&OUT} "<p>Frond a RP-people Rec using RP-peop-id -- " RP-peop-id SKIP
                                                                                                   "<br>Made assigns to t-RP vars t-RP-fstn is-- " t-RP-fstn SKIP
                                                                                                   "<br>here is the t-RP-dob -- " t-RP-dob SKIP 
                                                                                                   "<br>Frond a addr using RP-add-id -- " RP-add-id SKIP
                                                                                                   "<br>t-RP-add1 is -- " t-RP-add1  SKIP
                                                                                                   "<br>RP-add1 is -- " RP-add1 SKIP
                                                                                                   "</p>".
/*                                       IF RP-add1 = "" THEN DO:                                                                     */
/*                                                                                                                                    */
/*                                           FIND people_mstr WHERE people_mstr.people_id = o-RP-peop-id   NO-LOCK.                   */
/*                                                                                                                                    */
/*                                           IF AVAILABLE (people_mstr) THEN                                                          */
/*                                           ASSIGN                                                                                   */
/*                                           RP-suf         = people_suffix                                                           */
/*                                           RP-title       = people_prefix                                                           */
/*                                           RP-fstn        = people_firstname                                                        */
/*                                           RP-lstn        = people_lastname                                                         */
/*                                           RP-midn        = people_midname                                                          */
/*                                           RP-dob         = people_DOB                                                              */
/*                                           RP-gen         = people_gender                                                           */
/*                                           RP-email       = people_email                                                            */
/*                                           RP-email2      = people_email2                                                           */
/*                                           RP-h-phone     = people_homephone                                                        */
/*                                           RP-fax-phone   = people_fax                                                              */
/*                                           RP-w-phone     = people_workphone                                                        */
/*                                           RP-c-phone     = people_cellphone                                                        */
/*                                           RP-company     = people_company.                                                         */
/*                                                                                                                                    */
/*                                           FIND addr_mstr WHERE addr_mstr.addr_id = o-RP-peop-addr-id   NO-LOCK.                    */
/*                                                                                                                                    */
/*                                           IF AVAILABLE (addr_mstr) THEN                                                            */
/*                                           ASSIGN                                                                                   */
/*                                           RP-add1       = addr_addr1                                                               */
/*                                           RP-add2        = addr_addr2                                                              */
/*                                           RP-add3        = addr_addr3                                                              */
/*                                           RP-city        = addr_city                                                               */
/*                                           RP-state-prov  = addr_stateprov                                                          */
/*                                           RP-zip         = addr_zip                                                                */
/*                                           RP-country     = addr_country.                                                           */
/*                                                                                      IF ITfeedback = YES THEN                      */
/*                                                                                            {&OUT} "<P>RP-fstn -- " RP-fstn SKIP    */
/*                                                                                                   "<br>RP-add1 is -- " RP-add1 SKIP*/
/*                                                                                                   "</p>".                          */
/*                                        END.  /* IF RP-add1 = "" THEN DO: */                                                        */
                                        
/*                                 END. /*  IF o-RP-peop-id > 0 THEN DO: */  */


/*                          END.  /*  IF AVAILABLE (people_mstr) THEN DO: */*/
                          
                          
                                        
/*                          ELSE DO:*/
/*                                                                                     IF ITfeedback = YES THEN                                                           */
/*                                                                                            {&OUT} "<p>RP-add1 was not Blank</p>" SKIP.                                 */
/*                                                                                                                                                                        */
/*      /* --------------------------------------------------------------------------------------------------------------------------------------------------*/           */
/*                                                                                                                                                                        */
/*	                                             {../datahub/src/webspeed/pathfix.i "find-addr.r"}. /* 1dot2 */                                                            */
/*	                                                                                                                                                                        */
/*	/*                                             RUN "../depot/rcode/find-addr.r"*/               /* 1dot2 */                                                            */
/*	                                               RUN VALUE(depotcode)                             /* 1dot2 */                                                            */
/*	                                              (RP-add1,                                                                                                                */
/*	                                               RP-add2,                                                                                                                */
/*	                                               RP-add3,                                                                                                                */
/*	                                               RP-city,                                                                                                                */
/*	                                               RP-state-prov,                                                                                                          */
/*	                                               RP-zip,                                                                                                                 */
/*	                                               RP-country,                                                                                                             */
/*	                                               OUTPUT o-f-RP-addr-id,                                                                                                  */
/*	                                               OUTPUT o-f-RP-addr-error,                                                                                               */
/*	                                               OUTPUT o-f-RP-addr-ran).                                                                                                */
/*	                                                                                      IF ITfeedback = YES THEN                                                         */
/*	                                                                                               {&OUT} "<p>back from find-addr.r" SKIP                                  */
/*	                                                                                                      "<br>With a RP-add1 of -- " RP-add1  SKIP                        */
/*	                                                                                                      "<br>and a o-f-RP-addr-id of -- " o-f-RP-addr-id SKIP            */
/*	                                                                                                      "</p>".                                                          */
/*	                                              ASSIGN                                                                                                                   */
/*                                                  RP-add-id                  = o-f-RP-addr-id.                                                                          */
/*/*                                                  people_mstr.people_addr_id = RP-add-id.  <<<<<< @@@@   */                                                           */
/*                                                                                          IF ITfeedback = YES THEN                                                      */
/*                                                                                                   {&OUT} "<p>just assigned RP-add-id -- " RP-add-id SKIP               */
/*                                                                                                          "<br>here the new people_addr_id -- " people_addr_id SKIP     */
/*                                                                                                          "</p>".                                                       */
/*                                                                                                                                                                        */
/*                                                                                                                                                                        */
/*	                                                                                                                                                                        */
/*	                                                {../datahub/src/webspeed/pathfix.i "upcreate-addr-mstr.r"}. /* 1dot2 */                                                */
/*                                                                                                                                                                        */
/*/*                                                    RUN "../depot/rcode/upcreate-addr-mstr.r"*/                 /* 1dot2 */                                           */
/*                                                      RUN VALUE(depotcode)                                        /* 1dot2 */                                           */
/*                                                     (RP-add-id,  /* o-f-RP-addr-id */                                                                                  */
/*                                                      RP-add1,                                                                                                          */
/*                                                      RP-add2,                                                                                                          */
/*                                                      RP-add3,                                                                                                          */
/*                                                      RP-city,                                                                                                          */
/*                                                      RP-state-prov,                                                                                                    */
/*                                                      RP-zip,                                                                                                           */
/*                                                      RP-country,                                                                                                       */
/*                                                      county-type,                                                                                                      */
/*                                                      OUTPUT o-RP-addr-id,                                                                                              */
/*                                                      OUTPUT o-RP-addr-create,                                                                                          */
/*                                                      OUTPUT o-RP-addr-update,                                                                                          */
/*                                                      OUTPUT o-RP-addr-avail,                                                                                           */
/*                                                      OUTPUT o-RP-addr-success).                                                                                        */
/*                                                                                                                                                                        */
/*                                                                                          IF ITfeedback = YES THEN                                                      */
/*                                                                                                   {&OUT} "<p>back from upcreate-addr-mstr.r" SKIP                      */
/*                                                                                                          "<br>Here is the RP-add-id --" RP-add-id SKIP                 */
/*                                                                                                          "<br>and here is RP-add1 -- " RP-add1 SKIP                    */
/*                                                                                                          "<br>o-RP-addr-id is -- " o-RP-addr-id SKIP                   */
/*                                                                                                          "<br>o-RP-addr-success is -- " o-RP-addr-success SKIP         */
/*                                                                                                          "</p>".                                                       */
/*                                                      ASSIGN                                                                                                            */
/*                                                      RP-add-id                  = o-RP-addr-id                                                                         */
/*                                                      people_mstr.people_addr_id = RP-add-id.                                                                           */
/*                                                                                          IF ITfeedback = YES THEN                                                      */
/*                                                                                                   {&OUT} "<p>just assigned RP-add-id after upcreate -- " RP-add-id SKIP*/
/*                                                                                                          "<br>here the new people_addr_id -- " people_addr_id SKIP     */
/*                                                                                                          "</p>".                                                       */
/*                                                                                                                                                                        */
/*                                                  END. /* IF RP-add1 <> "" THEN DO: */                                                                                  */
/*                                                                                                                                                                        */
/*                                                                                                                                                                        */
/*                                                                                                                                                                        */
/*                                                                                                                                                                        */
/*                                      END. /* IF o-RP-peop-id > 0 THEN DO: */                                                                                           */
/*                                                                                                                                                                        */
/*        /*----------------------------------------------------------------------------------------------------------------------------------------------------*/        */
/*                                                                                                                                                                        */
/*                           ELSE DO:  /* Did not find a people record */                                                                                                 */


/*                                IF RP-fstn <> "" AND                                                                                                                           */
/*                                   RP-lstn <> "" /* AND                                                                                                                        */
/*                                   act     <> 0 */ THEN DO: /* This keeps the upcreate-people from running if multiple same name people records are returned */                */
/*                                                                                                                                                                               */
/*		                             {../datahub/src/webspeed/pathfix.i "upcreate-people-mstr.r"}. /* 1dot2 */                                                                       */
/*		                                                                                                                                                                               */
/*		/*                             RUN "../depot/rcode/upcreate-people-mstr.r"*/               /* 1dot2 */                                                                       */
/*		                               RUN VALUE(depotcode)                                        /* 1dot2 */                                                                       */
/*		                                               (o-RP-peop-id,                                                                                                                */
/*		                                                RP-fstn,                                                                                                                     */
/*		                                                RP-midn,                                                                                                                     */
/*		                                                RP-lstn,                                                                                                                     */
/*		                                                RP-title,                                                                                                                    */
/*		                                                RP-suf,                                                                                                                      */
/*		                                                RP-company,                                                                                                                  */
/*		                                                RP-gen,                                                                                                                      */
/*		                                                RP-h-phone,                                                                                                                  */
/*		                                                RP-w-phone,                                                                                                                  */
/*		                                                RP-c-phone,                                                                                                                  */
/*		                                                RP-fax-phone,                                                                                                                */
/*		                                                RP-email,                                                                                                                    */
/*		                                                RP-email2,                                                                                                                   */
/*		                                                RP-add-id, /*assigning RP add id*/                                                                                           */
/*		                                                RP-patcon,                                                                                                                   */
/*		                                                RP-dob,                                                                                                                      */
/*		                                                second-addr,                                                                                                                 */
/*		                                                OUTPUT o-RP-peop-id,                                                                                                         */
/*		                                                OUTPUT o-RP-peop-crate,                                                                                                      */
/*		                                                OUTPUT o-RP-peop-update,                                                                                                     */
/*		                                                OUTPUT o-RP-peop-avail,                                                                                                      */
/*		                                                OUTPUT o-RP-peop-success).                                                                                                   */
/*                                                                                                                                                                               */
/*                                                                                      IF ITfeedback = YES THEN                                                                 */
/*                                                                                             {&OUT} "<p>Back from upcreate people master after making (RP) people record " SKIP*/
/*                                                                                                    "<br>whith a o-RP-peop-id of -- " o-RP-peop-id    SKIP                     */
/*                                                                                                    "<br>this is RP-add-id -- " RP-add-id SKIP                                 */
/*                                                                                                    "<br>MY Gender is -- " RP-gen "</p>".                                      */
/*                                                                                                                                                                               */
/*                                       ASSIGN                                                                                                                                  */
/*                                       act = 2.                                                                                                                                */
/*                                                                                                                                                                               */
/*                                END.   /*  IF RP-fstn <> "" and RP-lstn <> ""  THEN DO: */                                                                                     */
/*                                                                                                                                                                               */
/*                                 {../datahub/src/webspeed/pathfix.i "find-addr.r"}. /* 1dot2 */                                                                                */
/*                                                                                                                                                                               */
/*/*                                 RUN "../depot/rcode/find-addr.r"*/               /* 1dot2 */                                                                                */
/*                                   RUN VALUE(depotcode)                             /* 1dot2 */                                                                                */
/*                                     (RP-add1,                                                                                                                                 */
/*                                      RP-add2,                                                                                                                                 */
/*                                      RP-add3,                                                                                                                                 */
/*                                      RP-city,                                                                                                                                 */
/*                                      RP-state-prov,                                                                                                                           */
/*                                      RP-zip,                                                                                                                                  */
/*                                      RP-country,                                                                                                                              */
/*                                      OUTPUT o-f-RP-addr-id,                                                                                                                   */
/*                                      OUTPUT o-f-RP-addr-error,                                                                                                                */
/*                                      OUTPUT o-f-RP-addr-ran).                                                                                                                 */
/*                                                                                                                                                                               */
/*												                                      IF ITfeedback = YES THEN                                                                                                     */
/*												                                             {&OUT} "<p>Ran find-addr.r useing RP addr" SKIP                                                                       */
/*												                                                    "<br>useing addr1 of-- " RP-add1 SKIP                                                                          */
/*												                                                    "<br>and RP-city -- " RP-city SKIP                                                                             */
/*												                                                    "<br>and RP-state-prov--" RP-state-prov SKIP                                                                   */
/*												                                                    "<br>and RP-zip --" RP-zip SKIP                                                                                */
/*												                                                    "<br>came back With o-f-RP-addr-id -- " o-f-RP-addr-id SKIP                                                    */
/*												                                                    "<br>with a o-f-RP-addr-error --" o-f-RP-addr-error SKIP                                                       */
/*												                                                    "<br>with a o-f-RP-addr-ran --" o-f-RP-addr-ran "</p>".                                                        */

/*                                      IF o-RP-addr-id = o-f-addr-id THEN DO:                       */
/*                                                                                                   */
/*											                                          IF ITfeedback = YES THEN                      */
/*											                                             {&OUT} "<p>o-RP-addr-id = o-f-addr-id</p>".*/
		                 
/*		                        FIND people_mstr WHERE people_mstr.people_id = o-RP-peop-id NO-ERROR.*/
/*		                                                    IF AVAILABLE (people_mstr) THEN          */
/*		                                                                                               */
/*                                                  ASSIGN                                       */
/*                                                  people_mstr.people_addr_id = o-f-RP-addr-id. */
                                                  
                                                  
                                                  
		                        IF o-f-RP-addr-id > 0 THEN DO:
		    
                                FIND addr_mstr WHERE addr_mstr.addr_id = o-f-RP-addr-id.
                                IF AVAILABLE (addr_mstr) THEN 	                                       
		                                        
		                                          ASSIGN
		                                          RP-add-id  = o-f-RP-addr-id
		                                      
			                                      t-RP-add1        = addr_addr1
			                                      t-RP-add2        = addr_addr2
			                                      t-RP-add3        = addr_addr3
			                                      t-RP-city        = addr_city
			                                      t-RP-state-prov  = addr_stateprov
			                                      t-RP-zip         = addr_zip
			                                      t-RP-country     = addr_country.
	                                                                                   IF ITfeedback = YES THEN
                                                                                         {&OUT} "<p>Just assigned t-RP-addr Variables</p>".
                                 END. /* IF o-f-RP-addr-id > 0 THEN DO: */

                                    
                                                                     
                                            IF o-f-RP-addr-id  = 0  AND 
                                               RP-add1        <> "" AND
                                               RP-city        <> "" AND
                                               RP-zip         <> "" AND
                                               RP-state-prov  <> "" THEN DO: 

									                                                  IF ITfeedback = YES THEN
									                                                               {&OUT} "<p>Runing upcreate-addr-mstr.r for RP addr" SKIP
									                                                                      "<br>o-RP-addr-id is --" o-RP-addr-id "</p>".
									                                                                      
/*									              {../datahub/src/webspeed/pathfix.i "upcreate-addr-mstr.r"}. /* 1dot2 */*/
									              
/*                                                  RUN "../depot/rcode/upcreate-addr-mstr.r"*/               /* 1dot2 */
/*                                                    RUN VALUE(depotcode)                                      /* 1dot2 */*/
                                                    RUN VALUE(SEARCH("SUBaddr-ucU.r"))        /* 1dot4 */
                                                     (RP-add-id,   /* was  o-f-RP-addr-id*/
                                                      RP-add1,
                                                      RP-add2,
                                                      RP-add3,
                                                      RP-city,
                                                      RP-state-prov,
                                                      RP-zip,
                                                      RP-country,
                                                      county-type,
                                                      OUTPUT o-RP-addr-id,
                                                      OUTPUT o-RP-addr-create,
                                                      OUTPUT o-RP-addr-update,
                                                      OUTPUT o-RP-addr-avail,
                                                      OUTPUT o-RP-addr-success).

					                                                                  IF ITfeedback = YES THEN
					                                                                        {&OUT} "<p>back from upcreate-addr-mstr.r whith a o-RP-addr-id of -- " o-RP-addr-id "</p>" SKIP.
                                                  ASSIGN
                                                  RP-add-id  = o-RP-addr-id
                                                  act = 2.
                                                  
                                                  FIND people_mstr WHERE people_mstr.people_id = o-RP-peop-id NO-ERROR.
                                                    IF AVAILABLE (people_mstr) THEN
                                                    
                                                    ASSIGN 
                                                  people_mstr.people_addr_id = o-RP-addr-id.
                                                  
                                            END. /* IF o-addr-id = 0   THEN DO:*/
                                           
                                           
                                           
/*                           END. /*  ELSE DO: Did not find a people record @@ moving this down @@ */*/
                           
/*                    END.  /*moving this one down  */*/

                                                                                                                                                                         
/*                           END.  /* IF AVAILABLE (addr_mstr) THEN DO:@@@ movied this down @ THIS NOW IN PLAY @@@@@ */*/

              
                                         FIND patient_mstr WHERE patient_id = peop-id AND
                                               patient_mstr.patient_deleted = ? NO-ERROR.

								                                                        IF ITfeedback = YES THEN
								                                                        {&OUT} "<p>Assiging RP ID to patient ID" SKIP
								                                                                "<br>This is patient ID--" peop-id  SKIP
								                                                                "<br>This is RP-id--" o-RP-peop-id SKIP
								                                                                "<br>This is the RP addr ID--"RP-add-id SKIP
								                                                                "<br>new-rp --" new-rp SKIP
								                                                                "<br>rp-stop -- " rp-stop  "</p>".	

                                            IF AVAILABLE (patient_mstr) THEN DO:

                                            ASSIGN
                                            patient_RP_ID  = o-RP-peop-id.   /* was RP-peop-ID. */

										                                                IF ITfeedback = YES THEN
										                                                    {&OUT} "<p>Added RP-ID to patient_RP_ID" SKIP
										                                                           "<br>patdoc is--" patdoc SKIP
										                                                           "<br>and t-patdoc is--" t-patdoc SKIP
										                                                           "<br>this is o-RP-peop-id -- " o-RP-peop-id
										                                                           "<br>and this is patient_RP_ID-- " patient_RP_ID "<p>" SKIP.
                                          
                                            END. /* IF AVAILABLE (patient_mstr) */
                                     
/*                END. /*ELSE DO:*/*/
											                                            IF ITfeedback = YES THEN  
											                                                   {&OUT} "<p>(just befor user feedback assign )New-RP = --" new-RP SKIP                                                                                       
                                                                                                      "<br> RP-add1 is -- " RP-add1 " and t-RP-add1 is -- " t-RP-add1 SKIP
                                                                                                      "<br> add1 is -- " add1 " and t-add1 is -- " t-add1  SKIP
                                                                                                                                                                                                            
                                                                                                      "<br>RP-city is -- " RP-city " and t-RP-city is -- " t-RP-city SKIP 
                                                                                                      "<br>city is -- " city " and t-city is -- " t-city SKIP
                                                                                                     
                                                                                                      "<br>RP-h-phone is -- " RP-h-phone " and t-RP-phone is -- " t-RP-h-phone  SKIP 
                                                                                                      "<br>h-phone is -- " h-phone " and t-h-phone is -- " t-h-phone  SKIP
                                                                                                     
                                                                                                      "<br>RP-fstn is -- " RP-fstn " and t-RP-fstn is -- " t-RP-fstn SKIP
                                                                                                      "<br>patfstn is -- " patfstn " and t-patfstn is -- " t-patfstn skip
                                                                                                      
                                                                                                      "</p>" SKIP.
                                                                                                      
                                                                                                                                         
/*------------------------------------------------------------------------------------ Adding user feedback below ---------------------------*/                               
				              
         /* ------------- Start of addr Rec ----------------------------------------- */      
         
		           IF t-add1 <> add1 THEN
		                ASSIGN
				            c-add1  = " - " + add1
				            add1    = t-add1.
		                    
		           IF t-add2 <> add2 THEN
		                ASSIGN
		                    c-add2  = " - " + add2
		                    add2    = t-add2.
		                    
		           IF t-add3 <> add3 THEN
		                ASSIGN
		                    c-add3  = " - " + add3
		                    add3    = t-add3.
		                    	                    
		           IF t-city <> city THEN
		                ASSIGN
		                    c-city  = " - " + city
		                    city    = t-city.
		                    
		           IF t-state-prov <> state-prov THEN
                        ASSIGN
                            c-state-prov = " - " + state-prov  
                            state-prov = t-state-prov.
                            
                   IF t-zip <> patzip THEN
                        ASSIGN
                            c-zip  = " - " + patzip
                            patzip = t-zip.  
                                     
		           IF t-country <> cntry THEN
                        ASSIGN
                            c-country   = " - " + cntry
                            cntry     = t-country.                             
                                                                  
		  /* ------------- End of addr Rec / Start of people Rec ----------------------------------------- */ 
		  
		  
		              
		           IF t-prefname <> prefname THEN             /* 1dot4 */
		                ASSIGN 
		                  c-prefname = " - " + prefname
		                  prefname   = t-prefname.
		          
		       
		           IF t-patfstn <> patfstn THEN
                        ASSIGN
                            c-patfstn   = " - " + patfstn
                            patfstn     = t-patfstn.

                   IF t-patlstn <> patlstn THEN
                        ASSIGN
                            c-patlstn  = " - " + patlstn
                            patlstn    = t-patlstn.
                            
                   IF t-patmidn <> patmidn THEN
                        ASSIGN
                            c-patmidn  = " - " + patmidn
                            patmidn    = t-patmidn. 
                            
                   IF t-patsuf <> patsuf THEN
                        ASSIGN
                            c-patsuf = " - " + patsuf
                            patsuf   = t-patsuf.
                              
                   IF t-pattitle <> pattitle THEN
                        ASSIGN
                            c-pattitle = " - " + pattitle
                            pattitle   = t-pattitle.                            
                              
		           IF t-c-phone <> c-phone THEN 
                        ASSIGN
                            c-c-phone   = " - " + c-phone
                            c-phone     = t-c-phone. 
                            
                   IF t-w-phone <> w-phone THEN
                        ASSIGN
                            c-w-phone = " - " + w-phone
                            w-phone   = t-w-phone.                    
                                                         
                   IF t-fax-phone <> fax-phone THEN  
                        ASSIGN
                            c-fax-phone = " - " + fax-phone
                            fax-phone   = t-fax-phone.                  
    
                   IF t-h-phone <> h-phone THEN
                        ASSIGN
                            c-h-phone  = " - " + h-phone
                            h-phone    = t-h-phone.                  
		                    
		           IF t-patcomp <> patcomp THEN
		                ASSIGN
		                    c-patcomp   = " - " + patcomp
		                    patcomp     = t-patcomp.
		                    		      		                    
		           IF t-email <> email THEN
		                ASSIGN
		                    c-email = " - " + email
		                    email   = t-email.
		                    
		           IF t-email2 <> email2 THEN  
		                ASSIGN
		                  c-email2 = " - " + email2
		                  email2   = t-email2.
		                          
		           IF t-patRPemail <> patRPemail THEN                                
		                ASSIGN
		                    c-patRPemail = " - " + patRPemail
		                    patRPemail = t-patRPemail.
		                                        
		  
		  /* -------------------------------Start of Patient Rec ---------------------------------- */
		  
		           IF doc-fname <> old-doc-fname  THEN
		                ASSIGN
		                c-doc-fname = doc-fname		                
		                doc-fname   = old-doc-fname. 
		                
		           IF doc-lname <> old-doc-lname THEN
		                ASSIGN
		                c-doc-lname = " - " + doc-lname
		                doc-lname   = old-doc-lname.      
		               
		           IF t-patnotes <> patnotes THEN
                        ASSIGN
                            c-patnotes = " - " + patnotes
                            patnotes   = t-patnotes. 
                            
                   IF t-patcon <> patcon THEN
                        ASSIGN
                            c-patcon    = " - " + patcon
                            patcon      = t-patcon.           
                            
           /* ------------------------------- End of Patient Rec ---------------------------------- */  
                                        
           /*------------------------------- Start of RP  add Assigned -------------------------- */

		    
		            IF t-RP-add1 <> RP-add1 THEN
                        ASSIGN
                            c-RP-add1  = " - " + RP-add1
                            RP-add1    = t-RP-add1.
                            
                   IF t-RP-add2 <> RP-add2 THEN
                        ASSIGN
                            c-RP-add2  = " - " + RP-add2
                            RP-add2    = t-RP-add2.
                            
                   IF t-RP-add3 <> RP-add3 THEN
                        ASSIGN
                            c-RP-add3  = " - " + RP-add3
                            RP-add3    = t-RP-add3.                      
                            
                   IF t-RP-city <> RP-city THEN
                        ASSIGN
                            c-RP-city  = " - " + RP-city
                            RP-city    = t-RP-city.  
                            
                    IF t-RP-state-prov <> RP-state-prov THEN
                        ASSIGN
                            c-RP-state-prov = " - " + RP-state-prov  
                            RP-state-prov = t-RP-state-prov.         
                            
                   IF t-RP-zip <> RP-zip THEN
                        ASSIGN
                            c-RP-zip = " - " + RP-zip
                            RP-zip = t-RP-zip.    
                            
                    IF t-RP-country <> RP-country THEN
                        ASSIGN
                            c-RP-country   = " - " + RP-country
                            RP-country     = t-RP-country.               
                        
                   IF t-RP-email <> RP-email THEN
                        ASSIGN
                            c-RP-email = " - " + RP-email
                            RP-email   = t-RP-email.
        
                    IF t-RP-email2 <> RP-email2 THEN
                        ASSIGN
                            c-RP-email2 = " - " + RP-email2
                            RP-email2   = t-RP-email2.
          
                    IF t-RP-c-phone <> RP-c-phone THEN 
                        ASSIGN
                            c-RP-c-phone   = " - " + RP-c-phone
                            RP-c-phone     = t-RP-c-phone. 
                         
                    IF t-RP-w-phone <> RP-w-phone THEN
                        ASSIGN
                            c-RP-w-phone = " - " + RP-w-phone
                            RP-w-phone = t-RP-w-phone.
                             
                   IF t-RP-fax-phone <> RP-fax-phone THEN  
                        ASSIGN
                            c-RP-fax-phone = " - " + RP-fax-phone
                            RP-fax-phone   = t-RP-fax-phone.                                              
                          
                   IF t-RP-h-phone <> RP-h-phone THEN
                        ASSIGN
                            c-RP-h-phone  = " - " + RP-h-phone
                            RP-h-phone    = t-RP-h-phone.                            
                            
                   IF t-RP-fstn <> RP-fstn THEN
                        ASSIGN
                            c-RP-fstn   = " - " + RP-fstn
                            RP-fstn     = t-RP-fstn.
                            
                   IF t-RP-lstn <> RP-lstn THEN
                        ASSIGN
                            c-RP-lstn  = " - " + RP-lstn
                            RP-lstn    = t-RP-lstn.
                            
                   IF t-RP-midn <> RP-midn THEN
                        ASSIGN
                            c-RP-midn  = " - " + RP-midn
                            RP-midn    = t-RP-midn.                   
                  /*
                   IF t-patRPemail <> patRPemail THEN
                        ASSIGN
                            c-patRPemail = " - " + patRPemail
                            patRPemail = t-patRPemail.
                   */
                             
/*                   IF t-RP-state-prov <> RP-state-prov THEN        */
/*                        ASSIGN                                     */
/*                            c-RP-state-prov = " - " + RP-state-prov*/
/*                            RP-state-prov = t-RP-state-prov.       */
                              
                   IF t-RP-suf <> RP-suf THEN
                        ASSIGN
                            c-RP-suf = " - " + RP-suf
                            RP-suf = t-RP-suf.
                              
                   IF t-RP-title <> RP-title THEN
                        ASSIGN
                            c-RP-title = " - " + RP-title
                            RP-title = t-RP-title. 
                                                    

                            
    
		                                                           
		    
																                        IF ITfeedback = YES THEN  
																                        {&OUT} "<p>I'm at the end of checking what to display" SKIP
																                                "<br>This is patient ID--" peop-id  SKIP
																                                "<br> with a peop-addr-id of -- " peop-addr-id SKIP
																                                "<br>with a o-f-addr-id of -- " o-f-addr-id SKIP
																                                "<br>This is RP-peop-id--" RP-peop-id SKIP
																                                "<br>with a RP-add-id of -- " RP-add-id SKIP
																                                "<br>t-doc-fname is--" t-doc-fname " and c-doc-fname is-- " c-doc-fname SKIP
																                                "<br>t-doc-lname is--" t-doc-lname " and c-doc-lname is-- " c-doc-lname  SKIP
																                                "<br>act is--" act SKIP
																                                "<br>t-RP-add1 is -- " t-RP-add1 SKIP
																                                "<br>RP-add1 is -- " RP-add1 SKIP 
																                                "<br>RP-stop is -- " RP-stop  SKIP
																                                "<br>patientage is -- " patientage "</p>" SKIP.
                                
       /**************************************** User feedback after updating a record *****************************/
        
    IF act     = 2  AND 
    pat-update = YES THEN DO:    
    
{&OUT} "    <div class='table_3col'>" SKIP
       "        <TABLE>" SKIP
       "            <TR>" SKIP
       "                <TH colspan='6' style='text-align: center;'>Original Record in Black : Updates in Blue</TH>" SKIP    
       "            </TR>" SKIP
       "            <TR>" SKIP
       "                <TD style='text-align:left;' colspan='6'><B>Personal Information</B></TD>" SKIP
       "            </TR>" SKIP
            /*-- ----------------------------------------------End of Row 1 ---------------------------------------------------------- -*/ 
       "            <TR>" SKIP
       "                <td>Prefix</td>" SKIP.          
				            IF c-pattitle <> "" THEN
{&OUT} "                <td class='col'>" pattitle  "<font color='#0000FF'>" c-pattitle   "</font></td>" SKIP.                              
			                ELSE   
{&OUT} "                <td>" pattitle "</td>" SKIP.                                 
{&OUT} "                <td>Address</td>" SKIP.
				            IF c-add1 <> "" THEN
{&OUT} "                <td class='col'>" add1 "<font color='#0000FF'>" c-add1 "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" add1  "</td>" SKIP.  
{&OUT} "                <td>Home Phone Number</td>" SKIP.                                
				            IF c-h-phone <> "" THEN
{&OUT} "                <td class='col'>" h-phone "<font color='#0000FF'>" c-h-phone "</font></td></tr>" SKIP.
				            ELSE
{&OUT} "                <td>" h-phone "</td>" SKIP.
{&OUT} "            </TR>" SKIP.
                /*----------------------------------------------End of Row 2 ------------------------------------------------------------*/ 
                                               
{&OUT} "            <TR>" SKIP
       "                <td>First Name</td>" SKIP.               
/*				                            IF c-patfstn <> "" THEN                                                                     */
/*				                               {&OUT}                                                                                   */
/*				                                   "<td class='col'>" patfstn  "<font color='#0000FF'>" c-patfstn   "</font></td>" SKIP.*/
/*				                            ELSE                                                                                        */
				                              
{&OUT} "                <td>" patfstn "</td>" SKIP.
{&OUT} "                <td>Address2</td>" SKIP.                             
				            IF c-add2 <> "" THEN
{&OUT} "                <td class='col'>" add2 "<font color='#0000FF'>" c-add2 "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" add2 "</td>".  
{&OUT} "                <td>Work Phone Number</td>" SKIP.                                
				            IF c-w-phone <> "" THEN
{&OUT} "                <td class='col'>" w-phone "<font color='#0000FF'>" c-w-phone "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" w-phone "</td>" SKIP
	   "            </TR>" SKIP.   
                /*-----------------------------------------------End of Row 3 -----------------------------------------------------------*/                
                                              
{&OUT} "            <TR>" SKIP                                
       "                <td>Middle Name</td>" SKIP.
				            IF c-patmidn <> "" THEN
{&OUT} "                <td class='col'>" patmidn  "<font color='#0000FF'>" c-patmidn   "</font></td>" SKIP.                              
				            ELSE
{&OUT} "                <td>" patmidn "</td>" SKIP.
{&OUT} "                <td>Address3</td>" SKIP.
                            IF c-add3 <> "" THEN
{&OUT} "                <td class='col'>" add3 "<font color='#0000FF'>" c-add3 "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" add3 "</td>" SKIP.
{&OUT} "                <td>Cell Phone Number</td>" SKIP.
                            IF c-c-phone <> "" THEN
{&OUT} "                <td class='col'>" c-phone "<font color='#0000FF'>" c-c-phone "</font></td></tr>" SKIP.
				            ELSE 
{&OUT} "                <td>" c-phone "</td></tr>" SKIP.
{&OUT} "            </TR>" SKIP.
               /*--------------------------------------------------End of Row 4 ----------------------------------------------------------*/                             
                                            
{&OUT} "            <TR>" SKIP
       "                <td>Last Name</td>" SKIP.
                                
/*				                            IF c-patlstn <> "" THEN                                                                     */
/*				                                {&OUT}                                                                                  */
/*				                                    "<td class='col'>" patlstn "<font color='#0000FF'>" c-patlstn   "</font></td>" SKIP.*/
/*				                            ELSE*/
{&OUT} "                <td>" patlstn "</td>" SKIP.
{&OUT} "                <td>City</td>" SKIP.
                            IF c-city <> "" THEN
{&OUT} "                <td class='col'>" city "<font color='#0000FF'>" c-city "</font></td>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" city "</td>" SKIP.
{&OUT} "                <td>Fax Number</td>" SKIP.
                            IF c-fax-phone <> "" THEN
{&OUT} "                <td class='col'>" fax-phone "<font color='#0000FF'>" c-fax-phone "</font></td></tr>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" fax-phone "</td></tr>" SKIP
       "            </TR>" SKIP.
               /*---------------------------------------------------End of Row 5 -----------------------------------------------------------*/
/*{&OUT} "            <TR>" SKIP                                                                               */
/*       "                  <td>Preferred Name</td>" skip.                                                     */
/*                             IF c-prefname <> "" THEN                                                        */
/*{&OUT} "                  <td class='col'>" prefname "<font color='#0000FF'>" c-prefname "</font></td>" SKIP.*/
/*                            ELSE                                                                             */
/*{&OUT} "                <td>" prefname "</td>" SKIP.                                                         */



{&OUT} "                <td>Suffix</td>" SKIP.
                            IF c-patsuf <> "" THEN
{&OUT} "                <td class='col'>" patsuf  "<font color='#0000FF'>" c-patsuf   "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" patsuf "</td>" SKIP.
                                                    
{&OUT} "                <td>State</td>" SKIP.
                            IF c-state-prov <> "" THEN
{&OUT} "                <td class='col'>" state-prov "<font color='#0000FF'>" c-state-prov "</font></td>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" state-prov "</td>" SKIP.
{&OUT} "                <td>Email Address</td>" SKIP.
                                
/*				                            IF c-email <> "" THEN                                                                      */
/*				                                {&OUT}                                                                                 */
/*				                                    "<td class='col'>" email "<font color='#0000FF'>" c-email "</font></td></tr>" SKIP.*/
/*				                            ELSE                                                                                       */
{&OUT} "                <td>" email "</td></tr>" SKIP
       "            </TR>" SKIP.
               /*---------------------------------------------------End of Row 6 -----------------------------------------------------------*/    
                                             
{&OUT} "            <TR>" SKIP
       "                  <td>Preferred Name</td>" skip.  /* 1dot4 */
                             IF c-prefname <> "" THEN
{&OUT} "                  <td class='col'>" prefname "<font color='#0000FF'>" c-prefname "</font></td>" SKIP.
                            ELSE
{&OUT} "                <td>" prefname "</td>" SKIP.


              /*--------------------------------------------------------------------------------------------------------------------------*/                       
{&OUT} "                <td>Zip Code</td>" SKIP.
                            IF c-zip <> "" THEN
{&OUT} "                <td class='col'>" patzip "<font color='#0000FF'>" c-zip "</font></td>" SKIP.
				            ELSE 
{&OUT} "                <td>" patzip "</td>" SKIP.
{&OUT} "                <td>Email Address2</td>" SKIP.
                            IF c-email2 <> "" THEN
{&OUT} "                <td class='col'>" email2 "<font color='#0000FF'>" c-email2 "</font></td></tr>" SKIP.                              
			                ELSE 
{&OUT} "                <td>" email2 "</td></tr>" SKIP.
{&OUT} "            </TR>" SKIP
                                                      
               /*---------------------------------------------------End of Row 7 -----------------------------------------------------------*/    
                                
       "            <TR>" SKIP.
{&OUT} "                <Td>Age</Td>" SKIP.                                   
                                                  
                    /******************** I'm not sure if this needs to change color if DOB is changed. This displays age*********/
				                            IF patientage >= 1 THEN
				                                {&OUT}
				                                    "<TD>" patientage FORMAT '->>9.9<'"&nbsp Years</td>" SKIP. 
				                            IF patientage < 1 THEN 
				                                {&OUT}
				                                    "<TD>" days "&nbsp Days</td>" SKIP.            
                                    
                     /*****************************************************************************************************/                              
                                    
{&OUT} "                <td>Country</td>" SKIP.
                            IF c-country <> "" THEN
{&OUT} "                <td class='col'>" cntry "<font color='#0000FF'>" c-country "</font></td>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" cntry "</td>" SKIP.
{&OUT} "                <td colspan='2'></td>" SKIP.
{&OUT} "            </TR>" SKIP
               /*---------------------------------------------------End of Row 8 -----------------------------------------------------------*/   
       "            <tr>" skip
               
               
       "                <td>Date of Birth</td>" SKIP.

              /*---------------------------------------------------------------------------------------------------------------------------*/
/*                                            IF patdob <> t-patdob THEN                                                                                  */
/*                                                {&OUT}                                                                                                  */
/*                                                    "<td class='col'>"t-patdob "<font color='#0000FF'>&nbsp" c-space "&nbsp" patdob "</font></td>" SKIP.*/
/*                                            ELSE                                                                                                        */
{&OUT} "                <td>" t-patdob "</td>" SKIP
               
       "                <td colspan='4'></td>" SKIP
       "            </tr>" skip       
               
                               
       "            <TR>" SKIP.                    
{&OUT} "                <td>Gender</td>" SKIP.
                            IF gender <> t-gender THEN                                                                   /* this use to be a cher, now it's a logical @@@@@@@ */
{&OUT} "                <td class='col'>" t-gender  "<font color='#0000FF'>&nbsp" c-space "&nbsp"  gender   "</font></td>" SKIP.        
                            ELSE                        
{&OUT} "                <td>" gender "</td>" SKIP. 
{&OUT} "                <td colspan='4'></td>" SKIP
       "            </TR>" SKIP.
                /*-----------------------------------------------------------------------------------------------------------------------------*/
                                
{&OUT} "            <TR>" SKIP
       "                <td>Doctor</td>" SKIP.
                                    
				                            IF c-doc-fname <> "" AND         /* This displays if adding a doctor to a record (Only using 1 comma) */
				                               c-doc-lname <> "" AND
				                               doc-lname = "" AND
				                               doc-fname = "" THEN
{&OUT} "                <td class='col'><font color='#0000FF'>" c-doc-lname ", " c-doc-fname "</font></td>" SKIP.    
				                            ELSE            
				                                                    
				                            IF c-doc-fname <> "" AND         /* This displays if changing Doctor record (useing 2 commas)*/
				                               c-doc-lname <> "" THEN
{&OUT} "                <td class='col'>" doc-lname ", " doc-fname "<font color='#0000FF'>" c-doc-lname ", " c-doc-fname "</font></td>" SKIP.
				                            ELSE
				                            
				                            IF t-doc-lname = "" AND          /* This displays if no Dr. record is being used */
				                               t-doc-fname = "" THEN
				                                
{&OUT} "                <td></td>" SKIP.                               
				                            ELSE                     
{&OUT} "                <td>"t-doc-lname "," t-doc-fname "</td>" SKIP.       
                         
{&OUT} "                <td colspan='4'></td>" SKIP
       "            </TR>" SKIP                  
                /*-----------------------------------------------------End of Row 9 -----------------------------------------------------------*/                    
                                
       "            <TR>" SKIP
       "                <td style='text-align:left;' colspan='6'><B>Comments</B></td>" SKIP 
       "            </TR>" SKIP.          
               /*---------------------------------------------------End of Row 10 -----------------------------------------------------------*/
                /*                {&OUT} 
                                    "<TR>" SKIP.    
               
                                {&OUT}
                                    "<TD>Condition</TD>" SKIP.   
                                
				                            IF c-patcon <> "" THEN
				                                {&OUT}                               
				                                    "<td class='col'colspan='3'>" patcon "<font color='#0000FF'>" c-patcon "</font></td><td colspan='2'></td>" SKIP
				                                    
				                                    "</tr>" SKIP .
				                            ELSE
				                                {&OUT}
				                                    "<td colspan='3'>" patcon "</td><td colspan='2'></td>" SKIP.
                               
                                {&OUT}
                                    "</TR>" SKIP. 
                  */                                             
                /*--------------------------------------------------End of Row 11 ------------------------------------------------------------*/                        
{&OUT} "            <TR>" SKIP
       "                <td>Notes</td>" SKIP.
                            IF c-patnotes <> "" THEN
{&OUT} "                <td class='col' colspan='3' >" patnotes "<font color='#0000FF'>" c-patnotes "</font></td>" SKIP                                
	   "                <td colspan='2'></td></tr>" SKIP	   
	   "                <td colspan='6'></td>" SKIP         
       "            </tr>" SKIP
                                    
       "        </table>" SKIP
       "    </div>" SKIP.       
				            ELSE
{&OUT} "                <td colspan='3'>" patnotes "</td>" SKIP
       "                <td colspan='2'</td>" SKIP          
       "            </TR>" SKIP
                                             
                  /*--------------------------------------------------End of Row 12 ------------------------------------------------------------*/                  
       "            <tr>" SKIP
       "                <td colspan='6'></td>" SKIP         
       "            </tr>" SKIP
                                    
       "        </table>" SKIP
       "    </div>" SKIP. 
       
  /* ---------------------------------Two Button side by side -----------------------------------------------*/
{&OUT} 
       "<br>" SKIP 
       
       "<div class='grid_12'>" SKIP         
       "  <div class='row'>" SKIP
                    
       "<div class='grid_1-5'></div>" SKIP
       "   <div class='grid_5'>" SKIP
       "     <form method='post' ACTION='patient.r'>" SKIP          
       "       <input type='hidden' name='h-keep-going' value='YES' >" SKIP
       "       <input type='hidden' name='h-first-stop'   value='1' >" SKIP                
       "       <input type='hidden' name='pep-id' value='" peop-id "'>" SKIP 
       "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
       "       <BUTTON type='submit' class='btn'>Return to Patient<i> " patfstn ", " patlstn "</i> Update</BUTTON>" SKIP               
       "     </form>" SKIP
       "   </div>" SKIP
       "<div class='grid_1'> </DIV>" SKIP
       
    
       
/* {&OUT}*/
       "<br>" SKIP              
/*       "<div class='grid_3-5'></div>" SKIP*/
       "   <div class='grid_5'>" SKIP
       "     <form method='post' ACTION='RP_edit.r'>" SKIP          
       "       <input type='hidden' name='h-keep-going' value='YES' >" SKIP
       "       <input type='hidden' name='h-first-stop'   value='1' >" SKIP                
       "       <input type='hidden' name='pep-id' value='" peop-id "'>" SKIP 
       "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
       "       <BUTTON type='submit' class='btn'>Return to Patient RP<i> " RP-fstn ", " RP-lstn "</i> Update</BUTTON>" SKIP               
       "     </form>" SKIP
       "   </div>" SKIP
       "<div class='grid_1-5'> </DIV>" SKIP
       "</div>" SKIP
       "</div>" SKIP 
       "<br>" SKIP.
                
                /* ---------------------------------------------------------------------------------*/
              
 {&OUT}
        "<br>" SKIP
        "<div class='grid_12'>" SKIP   
        "<div class='row'>" SKIP                  
        "  <div class='grid_5'></div>" SKIP
        "   <div class='grid_2'>" SKIP
        "     <form method='post' ACTION='patient.r'>" SKIP 
        "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
        "       <BUTTON type='submit' class='btn'>New Patient Update</BUTTON>" SKIP               
        "     </form>" SKIP
        "   </div>" SKIP
        "  <div class='grid_5'> </DIV>" SKIP
        "</div>" SKIP.                           

 END. /* IF act = 2  AND  pat-update = YES THEN DO: */
 
 
 
                  /*-------------------------------------------------End of Row 13 -------------------------------------------------------------*/    
    IF act     = 2  AND 
    RP-update  = YES THEN DO:                 
                  
{&OUT} "    <div class='table_3col'>" SKIP
       "        <TABLE>" SKIP
       "            <TR>" SKIP
       "            <TH colspan='6' style='text-align: center;'>Original Record in Black : Updates in Blue</TH>" SKIP
       "            <T></T>" SKIP
       "            </TR>" SKIP
       "            <TR>" SKIP.                
{&OUT} "            <TR>" SKIP.
{&OUT} "            <TH colspan='6' style='text-align: center;'>RP Record</TH>" SKIP.
{&OUT} "            </tr>" SKIP.
			                         			                
 /*@@@-------------------------------------------------End of Row 14 (Start or RP Record)-------------------------------------@@@*/ 
 
 
{&OUT} "            <TR>" SKIP.
{&OUT} "                <TD style='text-align:left;' colspan='6'><B>Responsible Personal Information</B></TD>" SKIP.
{&OUT} "            </TR>" SKIP.
            /* -- ----------------------------------------------RP End of Row 1 ---------------------------------------------------------- -*/
{&OUT} "                <td>Prefix</td>" SKIP.          
				            IF c-RP-title <> "" THEN
{&OUT} "                <td class='col'>" RP-title  "<font color='#0000FF'>" c-RP-title   "</font></td>" SKIP.                              
				            ELSE   
{&OUT} "                <td>" RP-title "</td>" SKIP.                                     
{&OUT} "                <td>Address</td>" SKIP.                                
				            IF c-RP-add1 <> "" THEN
{&OUT} "                <td class='col'>" RP-add1 "<font color='#0000FF'>" c-RP-add1 "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" RP-add1  "</td>" SKIP.  
                                                                  
{&OUT} "                <td>Home Phone Number</td>" SKIP.
                            IF c-RP-h-phone <> "" THEN
{&OUT} "                <td class='col'>" RP-h-phone "<font color='#0000FF'>" c-RP-h-phone "</font></td></tr>" SKIP.
				            ELSE
{&OUT} "                <td>" RP-h-phone "</td></tr>" SKIP.           
{&OUT} "            </TR>" SKIP.
                /*----------------------------------------------RP End of Row 2 ------------------------------------------------------------*/ 
{&OUT} "            <TR>" SKIP.
                                
{&OUT} "                <td>First Name</td>" SKIP.               
				            IF c-RP-fstn <> "" THEN
{&OUT} "                <td class='col'>" RP-fstn  "<font color='#0000FF'>" c-RP-fstn   "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" RP-fstn "</td>" SKIP.
                                   
{&OUT} "                <td>Address2</td>" SKIP.
                            IF c-RP-add2 <> "" THEN
{&OUT} "                <td class='col'>" RP-add2 "<font color='#0000FF'>" c-RP-add2 "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" RP-add2 "</td>".  
{&OUT} "                <td>Work Phone Number</td>" SKIP.
                            IF c-RP-w-phone <> "" THEN
{&OUT} "                <td class='col'>" RP-w-phone "<font color='#0000FF'>" c-RP-w-phone "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" RP-w-phone "</td>" SKIP.    
{&OUT} "            </TR>" SKIP.   
                /*-----------------------------------------------RP End of Row 3 -----------------------------------------------------------*/                
{&OUT} "            <TR>" SKIP.                                
{&OUT} "                <td>Middle Name</td>" SKIP.
				            IF c-RP-midn <> "" THEN
{&OUT} "                <td class='col'>" RP-midn  "<font color='#0000FF'>" c-RP-midn   "</font></td>" SKIP.                              
				            ELSE
{&OUT} "                <td>" RP-midn "</td>" SKIP.
{&OUT} "                <td>Address3</td>" SKIP.
                            IF c-RP-add3 <> "" THEN
{&OUT} "                <td class='col'>" RP-add3 "<font color='#0000FF'>" c-RP-add3 "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" RP-add3 "</td>" SKIP.
{&OUT} "                <td>Cell Phone Number</td>" SKIP.
                            IF c-RP-c-phone <> "" THEN
{&OUT} "                <td class='col'>" RP-c-phone "<font color='#0000FF'>" c-RP-c-phone "</font></td></tr>" SKIP.
				            ELSE 
{&OUT} "                <td>" RP-c-phone "</td></tr>" SKIP. 
{&OUT} "            </TR>" SKIP.
               /*--------------------------------------------------RP End of Row 4 ----------------------------------------------------------*/                             
{&OUT} "                <TR>" SKIP.     
{&OUT} "                <td>Last Name</td>" SKIP.
                            IF c-RP-lstn <> "" THEN
{&OUT} "                <td class='col'>" RP-lstn "<font color='#0000FF'>" c-RP-lstn   "</font></td>" SKIP.
				            ELSE
{&OUT} "                <td>" RP-lstn "</td>" SKIP. 
{&OUT} "                <td>City</td>" SKIP.
                            IF c-RP-city <> "" THEN
{&OUT} "                <td class='col'>" RP-city "<font color='#0000FF'>" c-RP-city "</font></td>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" RP-city "</td>" SKIP. 
{&OUT} "                <td>Fax Number</td>" SKIP.
                            IF c-RP-fax-phone <> "" THEN
{&OUT} "                <td class='col'>" RP-fax-phone "<font color='#0000FF'>" c-RP-fax-phone "</font></td></tr>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" RP-fax-phone "</td></tr>" SKIP.     
{&OUT} "            </TR>" SKIP.
               /*---------------------------------------------------RP End of Row 5 -----------------------------------------------------------*/
{&OUT} "            <TR>" SKIP.
{&OUT} "                <td>Suffix</td>" SKIP.
                            IF c-RP-suf <> "" THEN
{&OUT} "                <td class='col'>" RP-suf  "<font color='#0000FF'>" c-RP-suf   "</font></td>" SKIP.
				            ELSE 
{&OUT} "                <td>" RP-suf "</td>" SKIP.
{&OUT} "                <td>State</td>" SKIP. 
                            IF c-RP-state-prov <> "" THEN
{&OUT} "                <td class='col'>" RP-state-prov "<font color='#0000FF'>" c-RP-state-prov "</font></td>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" RP-state-prov "</td>" SKIP.                                    
{&OUT} "                <td>Email Address</td>" SKIP.
                            IF c-RP-email <> "" THEN
{&OUT} "                <td class='col'>" RP-email "<font color='#0000FF'>" c-RP-email "</font></td></tr>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" RP-email "</td></tr>" SKIP.         
{&OUT} "            </TR>" SKIP.
               /*---------------------------------------------------RP End of Row 6 -----------------------------------------------------------*/    
               
{&OUT} "            <TR>" SKIP.
{&OUT} "                <td>Date of Birth</td>" SKIP.
              /*------------------------------------------------------------------------------------------------------------------*/
				            IF RP-dob <> ? THEN DO:
				                                 
				            IF RP-dob <> t-RP-dob AND
				               t-RP-dob <> ? THEN
{&OUT} "                <td class='col'>"t-RP-dob "<font color='#0000FF'>" c-space RP-dob "</font></td>" SKIP.
				                                         
				            ELSE
				            IF RP-dob <> t-RP-dob AND
				            t-RP-dob = ? THEN
{&OUT} "                <td class='col'><font color='#0000FF'>" c-space RP-dob "</font></td>" SKIP.
				                                                 
				            ELSE
{&OUT} "                <td>" RP-dob "</td>" SKIP.
                                         
                            END. /* IF RP-dob <> ? THEN DO: */  
                                          
				            ELSE
{&OUT} "                <td></td>" SKIP.                                    
{&OUT} "                <td>Zip Code</td>" SKIP.
                            IF c-RP-zip <> "" THEN
{&OUT} "                <td class='col'>" RP-zip "<font color='#0000FF'>" c-RP-zip "</font></td>" SKIP.
				            ELSE 
{&OUT} "                <td>" RP-zip "</td>" SKIP.      
                        
{&OUT} "                <td>Second Email</td>" SKIP. 
                            IF c-RP-email2 <> "" THEN
{&OUT} "                <td class='col'>" RP-email2 "<font color='#0000FF'>" c-RP-email2 "</font></td></tr>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" RP-email2 "</td>" SKIP.                                      
                                               
{&OUT} "            </TR>" SKIP.
               /*---------------------------------------------------RP End of Row 7 -----------------------------------------------------------*/    
{&OUT} "            <TR>" SKIP.                               
{&OUT} "                <td></td><td></td>" SKIP.                              
                    
{&OUT} "                <td>Country</td>" SKIP.
                            IF c-RP-country <> "" THEN
{&OUT} "                <td class='col'>" RP-country "<font color='#0000FF'>" c-RP-country "</font></td>" SKIP.                              
				            ELSE 
{&OUT} "                <td>" RP-country "</td>" SKIP.
{&OUT} "                <td></td><td></td>" SKIP.         
{&OUT} "            </TR>" SKIP.
               /*---------------------------------------------------RP End of Row 8 -----------------------------------------------------------*/   
{&OUT} "            </TR>" SKIP.
{&OUT} "                <td colspan='6'></td>" SKIP.         
                                    
{&OUT} "            </tr>" SKIP.
{&OUT} "        </TABLE>" SKIP.
{&OUT} "    </div>" SKIP.


 /* ---------------------------------Two Button side by side -----------------------------------------------*/
{&OUT} 
       "<br>" SKIP 
       
       "<div class='grid_12'>" SKIP         
       "  <div class='row'>" SKIP
                    
       "<div class='grid_1-5'></div>" SKIP
       "   <div class='grid_5'>" SKIP
       "     <form method='post' ACTION='patient.r'>" SKIP          
       "       <input type='hidden' name='h-keep-going' value='YES' >" SKIP
       "       <input type='hidden' name='h-first-stop'   value='1' >" SKIP                
       "       <input type='hidden' name='pep-id' value='" peop-id "'>" SKIP 
       "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
       "       <BUTTON type='submit' class='btn'>Return to Patient<i> " patfstn ", " patlstn "</i> Update</BUTTON>" SKIP               
       "     </form>" SKIP
       "   </div>" SKIP
       "<div class='grid_1'> </DIV>" SKIP 
       "   <div class='grid_5'>" SKIP
       "     <form method='post' ACTION='RP_edit.r'>" SKIP          
       "       <input type='hidden' name='h-keep-going' value='YES' >" SKIP
       "       <input type='hidden' name='h-first-stop'   value='1' >" SKIP                
       "       <input type='hidden' name='pep-id' value='" peop-id "'>" SKIP 
       "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
       "       <BUTTON type='submit' class='btn'>Return to Patient RP<i> " RP-fstn ", " RP-lstn "</i> Update</BUTTON>" SKIP               
       "     </form>" SKIP
       "   </div>" SKIP
       "<div class='grid_1-5'> </DIV>" SKIP
       "</div>" SKIP
       "</div>" SKIP 
       "<br>" SKIP.
                
                /* ---------------------------------------------------------------------------------*/
 {&OUT}
        "<br>" SKIP
        "<div class='grid_12'>" SKIP   
        "<div class='row'>" SKIP                  
        "  <div class='grid_5'></div>" SKIP
        "   <div class='grid_2'>" SKIP
        "     <form method='post' ACTION='patient.r'>" SKIP 
        "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                             
        "       <BUTTON type='submit' class='btn'>New Patient Update</BUTTON>" SKIP               
        "     </form>" SKIP
        "   </div>" SKIP
        "  <div class='grid_5'> </DIV>" SKIP
        "</div>" SKIP.             



         
			END. /* IF act = 2  AND RP-update = YES THEN DO:*/
			
			
			
			
	 END. /* moved from up there 1605 */	
	 
	 	
/*		IF act = 20 AND                                                                                                                                                                                                                                                          */
/*		RP-stop = NO THEN DO:                                                                                                                                                                                                                                                    */
/*{&OUT}                                                                                                                                                                                                                                                                     */
/*		 "    <H1 align='center'><SPAN style='COLOR: #E60000;'>This Person's Record Already Exist.</SPAN><BR></H1>" skip                                                                                                                                                         */
/*		 "    <p align='center'><b>You can change to this person by using the Change Responsible Person Form.</b></p>" skip.                                                                                                                                                     */
/*		                                                                                                                                                                                                                                                                           */
/*		 {RP-rec-display.i}                                                                                                                                                                                                                                                      */
/*                                                                                                                                                                                                                                                                           */
/*{&OUT}   "<br>" skip                                                                                                                                                                                                                                                       */
/*         "<div class='grid_12'>" SKIP                                                                                                                                                                                                                                      */
/*         " <div class='row'>" SKIP                                                                                                                                                                                                                                         */
/*         " <div class='grid_5'></div>" SKIP                                                                                                                                                                                                                                */
/*         "   <div class='grid_2'>" SKIP                                                                                                                                                                                                                                    */
/*         "     <form method='post' ACTION='patient.r'>" SKIP                                                                                                                                                                                                               */
/*         "       <input type='hidden' name='mod' value='1' >" SKIP                                                                                                                                                                                                         */
/*         "       <input type='hidden' name='h-keep-going' value='YES' >" SKIP                                                                                                                                                                                              */
/*         "       <input type='hidden' name='h-first-stop'   value='1' >" SKIP                                                                                                                                                                                              */
/*         "       <input type='hidden' name='pep-id' value='" peop-id "'>" SKIP                                                                                                                                                                                             */
/*         "       <input type='hidden' name='pep-addr' value='" peop-addr-id "'>" SKIP                                                                                                                                                                                      */
/*         "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                                                                                                                                                                                        */
/*         "       <BUTTON type='submit' class='btn'>Back to Patient Update</BUTTON>" SKIP                                                                                                                                                                                   */
/*         "     </form>" SKIP                                                                                                                                                                                                                                               */
/*         "   </div>" SKIP                                                                                                                                                                                                                                                  */
/*         "   <div class='grid_5'></DIV>" SKIP                                                                                                                                                                                                                              */
/*         " </div>" SKIP.                                                                                                                                                                                                                                                   */
/*{&OUT}                                                                                                                                                                                                                                                                     */
/*	      "<div class='row'>" SKIP                                                                                                                                                                                                                                            */
/*	      "<div class='grid_12'>" SKIP                                                                                                                                                                                                                                        */
/*	      "<div class='row'>" SKIP                                                                                                                                                                                                                                            */
/*	      "  <div class='grid_5'></div>" SKIP                                                                                                                                                                                                                                 */
/*	      "   <div class='grid_2'>" SKIP                                                                                                                                                                                                                                      */
/*	      "     <form method='post' ACTION='patient.r'>" SKIP                                                                                                                                                                                                                 */
/*	      "       <input type='hidden' name='whattorun' value='" whattorun "'>" SKIP                                                                                                                                                                                          */
/*	      "       <BUTTON type='submit' class='btn'>New Patient Update</BUTTON>" SKIP                                                                                                                                                                                         */
/*	      "     </form>" SKIP                                                                                                                                                                                                                                                 */
/*	      "   </div>" SKIP                                                                                                                                                                                                                                                    */
/*	      "  <div class='grid_5'> </DIV>" SKIP                                                                                                                                                                                                                                */
/*	      "</div>" SKIP                                                                                                                                                                                                                                                       */
/*	      "</div>" SKIP                                                                                                                                                                                                                                                       */
/*	      "</div>" SKIP.	                                                                                                                                                                                                                                                     */
/*                                                                                                                                                                                                                                                                           */
/*                                                                                                                                                                                                                                                                           */
/*/*                                <p align="center">                                                                                                                                                                                                                     */*/
/*/*                                   <br><!-- <a href="patient_browse.html" target="_blank">YES</a> --></b><a href=patient.r?pep-id=`peop-id`&h-keep-going=yes&h-first-stop=1&whattorun=3.4 ">Click Here to return to Patient Record `patfstn`&nbsp`patlstn`  Update </a>*/*/
/*/*                                    <br></b><br></b><a href=patient.r?whattorun=3.4 ">Click Here for a New  Patient Record Update </a>                                                                                                                                 */*/
/*/*                                </p>                                                                                                                                                                                                                                   */*/
/*							                                                                                                                                                                                                                                                                           */
/*							                                                                                                                                                                                                                                                                           */
/*                                                                                                                                                                                                                                                                           */
/*        END. /*IF act = 20 AND                                                                                                                                                                                                                                             */
/*        RP-stop = NO THEN DO:*/                                                                                                                                                                                                                                            */
</SCRIPT>               
</BODY>      
</HTML>