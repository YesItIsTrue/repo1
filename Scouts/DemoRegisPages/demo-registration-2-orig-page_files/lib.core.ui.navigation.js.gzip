"cm.ui.navigation".namespace();cm.ui.navigation.HistoryManager=Class.create(cm.ui.UILibraryControl,{_historyArray:null,_currentIdx:null,_currentHash:null,_oldHash:null,_origin:null,NavigateEvent:null,preInitialize:function(){this._historyArray=$A();this._currentIdx=0;$$HIST=this},createEvents:function(){this.NavigateEvent=new cm.event()},wireEvents:function(){var a=this;this.Wrap(window).bind("hashchange",function(b){var c=window.location.hash;if(!$$CM.isEmpty(c)){c=c.substring(1)}if(a.Exists(c)){a.NavigateEvent.fire(a,{currentHash:c,oldHash:a._currentHash});a.NavigateEvent.Enable()}else{window.location.hash=a._currentHash}});this.NavigateEvent.subscribe(this.onNavigate,this)},Exists:function(b){var a=this._historyArray.find(function(c){return b==c});if($$CM.isNull(a)){return false}else{return true}},Reset:function(){this._historyArray=$A();this._currentIdx=0},Load:function(a){this.NavigateEvent.Disable();this.ToggleHash(a);this._historyArray.push(a)},ToggleHash:function(a){this._oldHash=this._currentHash;this._currentHash=a;window.location.hash=a},onNavigate:function(b,a){}});