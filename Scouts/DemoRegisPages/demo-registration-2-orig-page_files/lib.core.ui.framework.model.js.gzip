"cm.ui.framework.model".namespace();cm.ui.framework.model.Base=Class.create(cm.ui.framework.data.Object,{postInitialize:function(){this.AddClassName(this.GetConfig(CFG_CLASS_NAMES));this.SetEnabled(this.GetConfig(CFG_ENABLED))},GetName:function(){if(!$$CM.isEmpty(this.GetConfig(CFG_NAME))){return this.GetConfig(CFG_NAME)}else{if(!$$CM.isEmpty(this.GetConfig(CFG_LABEL))){return this.GetConfig(CFG_LABEL)}else{return"Unnamed Control"}}},GetData:function(){return null}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Control=Class.create(cm.ui.framework.model.Base,{initializeUIElements:function(){this._innerCtrl=this.getInnerControl();if($$CM.isNull(this._innerCtrl)){throw"Control models require an inner control definition"}this.AddChild(this._innerCtrl)},GetInnerControl:function(){return this._innerCtrl},Bind:function(a){this._innerCtrl.Bind(a)},GetData:function(){return this._innerCtrl.GetData()},SetEnabled:function(a){this._innerCtrl.SetEnabled(a)},getInnerControl:function(){return $$P.div()}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Autocomplete=Class.create(cm.ui.framework.model.Control,{getInnerControl:function(){var a=$$P.div();this._lblLabel=new $$FLBL(this.ID()+"_lblLabel",{label:this.GetConfig(CFG_LABEL)});a.AddChild(this._lblLabel);this._acField=new $$AUTO2(this.ID()+"_acField",{minLength:2,width:this.GetConfig(CFG_WIDTH),source:this.GetConfig(CFG_LIST).collect(function(b){return{label:b.Name,id:b.ID}})});a.AddChild(this._acField);return a},SetEnabled:function($super,a){$super(a);this._acField.Validator.SetEnabled(a)},postInitialize:function(){this._acField.Activate();this._acField.GetWidget().addClass("cmFrameworkModel");this._acField.Validator.addEvaluator($$EVAL.COMPARE({comparisonControl:function(){return this.GetConfig(CFG_LIST)},comparisonScope:this,comparison:function(a,b){var c=a.find(function(d){return d.Name==b.Name});return !$$CM.isNull(c)},failureMessage:"Selection is not an option"}));$$ACTEST=this._acField}});"cm.ui.framework.model".namespace();cm.ui.framework.model.FormControl=Class.create(cm.ui.framework.model.Control,{GetName:function($super){if(!$$CM.isEmpty(this.GetConfig(CFG_NAME))){return this.GetConfig(CFG_NAME)}else{if(!$$CM.isEmpty(CFG_LABEL)){return this.GetConfig(CFG_LABEL)}else{return $super()}}},GetTitleControl:function(){return this.GetInnerControl().GetTitleControl()},GetTitleInnerControl:function(){return this.GetInnerControl().GetTitleInnerControl()},GetInputControl:function(){return this.GetInnerControl().GetInputControl()},SetPlaceholderText:function(a){this.GetInnerControl().SetPlaceholderText(a)}});"cm.ui.framework.model".namespace();$$FWCB=cm.ui.framework.model.Checkbox=Class.create(cm.ui.framework.model.FormControl,{getInnerControl:function(){this.AddClassName("cmSingleCheckbox");if(this.GetConfig(CFG_STRETCH)){this.AddClassName("cmStretch")}return new $$FCB(this.ID()+"_icFCB",{value:this.GetConfig(CFG_DEFAULT_VALUE),spanWidth:100,inputWidth:25,label:this.GetConfig(CFG_LABEL),fieldTip:this.GetConfig(CFG_FIELD_TIP),isAfter:!this.GetConfig(CFG_STRETCH),isRequired:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED)})}});"cm.ui.framework.model".namespace();cm.ui.framework.model.CheckboxList=Class.create(cm.ui.framework.model.FormControl,{getInnerControl:function(){var a=this.GetConfig(CFG_VALUE_ARRAY);return new $$FSCBL(this.ID()+"_icFSCBL",{legendLabel:this.GetConfig(CFG_LABEL),stretch:this.GetConfig(CFG_STRETCH),dataSource:this.GetConfig(CFG_LIST),value:a,isRequired:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED)})}});"cm.ui.framework.model".namespace();cm.ui.framework.model.DropDown=Class.create(cm.ui.framework.model.FormControl,{getInnerControl:function(){return new $$FDDL2(this.ID()+"_icDDL",{label:this.GetConfig(CFG_LABEL),inputWidth:this.GetConfig(CFG_WIDTH),fieldTip:this.GetConfig(CFG_FIELD_TIP),stretch:this.GetConfig(CFG_STRETCH),dataSource:this.GetConfig(CFG_LIST),value:this.GetConfig(CFG_DEFAULT_VALUE),isRequired:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED)})},getSelectedIndex:function(){return this.GetInnerControl().getSelectedIndex()}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Listbox=Class.create(cm.ui.framework.model.FormControl,{getInnerControl:function(){return new $$FLB(this.ID()+"_icListBox",{label:this.GetConfig(CFG_LABEL),dataSource:this.GetConfig(CFG_LIST),value:this.GetConfig(CFG_DEFAULT_VALUE),isRequired:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED)})}});"cm.ui.framework.model".namespace();cm.ui.framework.model.RadioList=Class.create(cm.ui.framework.model.FormControl,{getInnerControl:function(){return new $$FSRBL(this.ID()+"_icFSRBL",{legendLabel:this.GetConfig(CFG_LABEL),stretch:this.GetConfig(CFG_STRETCH),dataSource:this.GetConfig(CFG_LIST),value:this.GetConfig(CFG_DEFAULT_VALUE),isRequired:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED)})}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Slider=Class.create(cm.ui.framework.model.FormControl,{_changed:false,initializeData:function(){this._changed=false},createEvents:function(){this.AddChangeListener()},onChange:function(b,a){this._changed=true;this.ChangeEvent.fire(this,a)},getInnerControl:function(){return new $$FSLDR2(this.ID()+"_icSlider",{label:this.GetConfig(CFG_LABEL),inputWidth:this.GetConfig(CFG_WIDTH),fieldTip:this.GetConfig(CFG_FIELD_TIP),value:this.GetConfig(CFG_DEFAULT_VALUE),dataSource:this.GetConfig(CFG_LIST),stretch:this.GetConfig(CFG_STRETCH),isRequired:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED),showValues:true,showCaps:true})},wireEvents:function(){this.GetInnerControl().ChangeEvent.subscribe(this.onChange,this)},onAttached:function(){var a=this.GetConfig(CFG_LIST);if($$CM.isArray(a)&&a.length>0&&$$CM.isEmpty(this.GetConfig(CFG_VALUE_STRING))&&$$CM.isEmpty(this.GetConfig(CFG_DEFAULT_VALUE))){this.Bind(a[0].ID);this.onChange()}}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Textarea=Class.create(cm.ui.framework.model.FormControl,{getInnerControl:function(){return new $$FTXA2(this.ID()+"_icTXA",{label:this.GetConfig(CFG_LABEL),inputWidth:this.GetConfig(CFG_WIDTH),fieldTip:this.GetConfig(CFG_FIELD_TIP),stretch:this.GetConfig(CFG_STRETCH),isRequired:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED),value:this.GetConfig(CFG_DEFAULT_VALUE)})},initializeUIElements:function($super){$super();if(this.GetConfig(CFG_VALUE_BOOLEAN)==true){this.GetInnerControl().GetInputControl().AddClassName("h300px")}}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Textbox=Class.create(cm.ui.framework.model.FormControl,{getInnerControl:function(){return new $$FTXT2(this.ID()+"_icTXT",{label:this.GetConfig(CFG_LABEL),inputWidth:this.GetConfig(CFG_WIDTH),fieldTip:this.GetConfig(CFG_FIELD_TIP),stretch:this.GetConfig(CFG_STRETCH),isRequired:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED),value:this.GetConfig(CFG_DEFAULT_VALUE)})}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Canvas=Class.create(cm.ui.framework.data.Object,{initializeUIElements:function(){this._canvas=new cm.ui.customforms.Canvas();this.AddChild(this._canvas);this._canvas.ObjectAddedEvent.subscribe(this.beforeReload,this);this._canvas.ObjectRemovedEvent.subscribe(this.beforeReload,this)},setLayout:function(a){this._canvas.SetLayout(a)},postAppendTo:function(){this.Reload()},onValidate:function(){this._result=new cm.validation.ValidationResult();var a=$$E(this).childElements();a.each(function(b){this._result.AppendResult(b.CM.Get().Validator.validate())},this);return this._result},GetChildren:function(){return this._canvas.GetObjects()},beforeReload:function(){this.Children=this.GetChildren()},afterReload:function(){this._canvas._master=this._master;this.Children.each(function(a){this._canvas.AddObject(a)},this)},doAddChildObject:function(a){this._canvas.AddObject(a)}});"cm.ui.framework.model".namespace();cm.ui.framework.model.CustomField=Class.create(cm.ui.framework.model.Base,{_cf:null,_control:null,postInitialize:function(){this.SetConfig(CFG_CONFIGURATION_OPTIONS,{ClassID:this.GetConfig(CFG_CUSTOM_FIELD_CLASS_ID),ConfigOptions:this._control.ConfigOptions})},initializeData:function(){this._cf=null},initializeUIElements:function(){this.AddClassName("cmCustomField");var c=this.GetConfig(CFG_CUSTOM_FIELD_ID);this._cf=null;if(c>0){var a=FW.Data.CustomForms.Get("CustomFieldDefinitions").find(function(m){return m.FieldID==c});this._cf=a;var h=$A();if(!$$CM.isNull(a)){if(a.DataType==FW.Enums.DataType.Boolean){h.push({ID:true,Name:"Yes"});h.push({ID:false,Name:"No"})}else{a.Options.each(function(m){h.push({ID:m,Name:m})},this)}var j=FW.Enums.CustomFieldProperty;if(!$$CM.isNull(j)&&(!$$CM.isArray(this.GetConfig(CFG_CUSTOM_FIELD_TYPE_FILTER))||this.GetConfig(CFG_CUSTOM_FIELD_TYPE_FILTER).length==0)){if(a.IsArray===true){this.SetConfig(CFG_CUSTOM_FIELD_TYPE_FILTER,$A([j.Multiselect]))}else{if(a.Options.length>0){this.SetConfig(CFG_CUSTOM_FIELD_TYPE_FILTER,$A([j.Options]))}else{if(a.Options.length===0){this.SetConfig(CFG_CUSTOM_FIELD_TYPE_FILTER,$A([j.NoOptions]))}}}}if((this.GetConfig(CFG_CUSTOM_FIELD_TYPE_FILTER)==FW.Enums.CustomFieldProperty.NoOptions)&&(a.DataType==FW.Enums.DataType.Integer||a.DataType==FW.Enums.DataType.Decimal)){this.SetConfig(CFG_EVALUATOR,FW.Enums.Evaluator.Number)}var i=a.ExtendedProperties.find(function(m){return m.Key=="defaultValue"});if(!$$CM.isNull(i)){var k=i.Value;if(a.DataType==FW.Enums.DataType.Boolean){k=(i.Value=="Yes"||i.Value=="True"||i.Value==1||i.Value==true)?true:false}var b=this.GetConfig(CFG_CONFIGURATION_OPTIONS);var e=b.ConfigOptions;e=e.findAll(function(m){return m.ID!=CFG_DEFAULT_VALUE});e.push({ID:CFG_DEFAULT_VALUE,Value:k});b.ConfigOptions=e;this.SetConfig(CFG_CONFIGURATION_OPTIONS,b)}}this.GetConfig(CFG_CONFIGURATION_OPTIONS).ConfigOptions.push({ID:CFG_LIST,Value:h});var g=this.GetConfig(CFG_CONFIGURATION_OPTIONS).ConfigOptions.find(function(m){return m.ID==CFG_EVALUATOR_IS_REQUIRED});if(!$$CM.isNull(g)){g.Value=this.GetConfig(CFG_EVALUATOR_IS_REQUIRED)}else{this.GetConfig(CFG_CONFIGURATION_OPTIONS).ConfigOptions.push({ID:CFG_EVALUATOR_IS_REQUIRED,Value:this.GetConfig(CFG_EVALUATOR_IS_REQUIRED)})}}this._control=Framework.Object.Render(this.GetConfig(CFG_CUSTOM_FIELD_CLASS_ID),this.GetConfig(CFG_CONFIGURATION_OPTIONS).ConfigOptions);this.AddChild(this._control);var l=this._control.GetConfig(CFG_CUSTOM_FIELD_TYPE_FILTER);if(!$$CM.isNull(l)){this.SetConfig(CFG_CUSTOM_FIELD_TYPE_FILTER,$A([l]))}this.SetConfig(CFG_VALIDATION_OPTION,this._control.GetConfig(CFG_VALIDATION_OPTION));var d=Framework.Object.GetClass(this.GetConfig(CFG_CUSTOM_FIELD_CLASS_ID));var f=d.ConfigOptions.select(function(m){return(m.IsEditable==true||$$CM.isNull(this.GetConfig(m.ID)))},this);f.each(function(m){this.SetConfig(m.ID,this._control.GetConfig(m.ID))},this)},GetData:function(){return this._control.GetData()},Bind:function(a){this._control.Bind(a);this.ChangeEvent.fire(this,a)},SetEnabled:function(a){this._control.SetEnabled(a)},GetCustomFieldControl:function(){return this._control},GetName:function(){if(!$$CM.isEmpty(this._control.GetConfig(CFG_NAME))){return this._control.GetConfig(CFG_NAME)}if(!$$CM.isEmpty(this._control.GetConfig(CFG_LABEL))){return this._control.GetConfig(CFG_LABEL)}if(!$$CM.isEmpty(this._control.GetConfig(CFG_CUSTOM_FIELD_ID))){var b=this._control.GetConfig(CFG_CUSTOM_FIELD_ID);var a=FW.Data.CustomForms.GetFirst("CustomFieldDefinitions",{FieldID:b});if(!$$CM.isNull(a)){return a.Name}}return"(null)"},GetCustomLabel:function(){if(!$$CM.isEmpty(this._control.GetConfig(CFG_LABEL))){return this._control.GetConfig(CFG_LABEL)}return this.GetName()},getConfigOptions:function(a){var b=a.find(function(c){return c.ID==CFG_CONFIGURATION_OPTIONS}).Value;if(!$$CM.isNull(b)){b.ConfigOptions=b.ConfigOptions.reject(function(c){return c.ID==CFG_VALIDATION_OPTION||c.ID==CFG_LIST||c.ID==CFG_CUSTOM_FIELD_TYPE_FILTER})}a.find(function(c){return c.ID==CFG_CONFIGURATION_OPTIONS}).Value=b;return a},getSelectedIndex:function(){return this._control.GetInnerControl().getSelectedIndex()},onChange:function(b,a){this.ChangeEvent.fire(this,a)},beforeReload:function(){this._control.beforeReload()},afterReload:function(){this._control.afterReload()},onAttached:function(){if($$CM.isFunction(this._control.onAttached)){this._control.onAttached()}},postAppendTo:function(){this._control.postAppendTo()},wireEvents:function(){if(!$$CM.isNull(this._control.ChangeEvent)){this.AddChangeListener();this._control.ChangeEvent.subscribe(this.onChange,this)}}});"cm.ui.framework.model".namespace();$$FWDIVIDER=cm.ui.framework.model.Divider=Class.create(cm.ui.framework.model.Base,{initializeUIElements:function($super){$super();this.AddChild($$P.hr())},GetData:function(){return null}});"cm.ui.framework.model".namespace();$$FWHEADER=cm.ui.framework.model.Header=Class.create(cm.ui.framework.model.Base,{initializeUIElements:function(){var a=this.GetConfig(CFG_CLASS_NAMES);var c=this.GetConfig(CFG_VALUE_STRING);var b=this.GetConfig(CFG_VALUE_NUMBER);if(!$$CM.isNumber(b)){b=6}else{b=parseInt(b)}if(b<0){b=0}else{if(b>6){b=6}}this.SetConfig(CFG_VALUE_NUMBER,b);c=this.replaceTags(c);this._header=this.getHeaderControl(b);this._header.UpdateInnerHtml(c);this._header.AddClassName(a);this.AddChild(this._header);var d=this.GetConfig(CFG_MARGIN_X);var e=this.GetConfig(CFG_MARGIN_Y);if(!$$CM.isNull(d)){if(d<0){d=0}this._header.AssignStyle("margin-left",d+"px")}if(!$$CM.isNull(e)){if(e<0){e=0}this._header.AssignStyle("margin-top",e+"px");this._header.AssignStyle("margin-bottom",e+"px")}},replaceTags:function(a){a=$$CM.getCMFormattedText(a);a=a.replace(/\[link=\"(.+?)\"\](.+?)\[\/link\]/gi,"<a href='$1' target='_blank'>$2</a>");return a},getHeaderControl:function(a){a=parseInt(a);switch(a){case 0:return $$P.p();case 1:return $$P.h6();case 2:return $$P.h5();case 3:return $$P.h4();case 4:return $$P.h3();case 5:return $$P.h2();case 6:return $$P.h1()}},GetData:function(){return null}});"cm.ui.framework.model".namespace();cm.ui.framework.model.InfoBox=Class.create(cm.ui.framework.model.Base,{initializeUIElements:function(){this._infoBox=$$P.div();this.AddChild(this._infoBox);var a=this.GetConfig(CFG_CLASS_NAMES);this._infoBox.AddClassName(a);var c=this.GetConfig(CFG_VALUE_STRING);var b=this.GetConfig(CFG_VALUE_BOOLEAN);if($$CM.isEmpty(c)){c="&nbsp;"}c=this.replaceTags(c);this._infoBox.UpdateInnerHtml(c);if(b==true){this._infoBox.AddClassName("cmAlert")}else{this._infoBox.AddClassName("cmInfo")}},replaceTags:function(a){a=$$CM.getCMFormattedText(a);return a}});"cm.ui.framework.model".namespace();cm.ui.framework.model.ScrollingTextBox=Class.create(cm.ui.framework.model.Base,{initializeUIElements:function(){var a=this.GetConfig(CFG_CLASS_NAMES);if($$CM.isEmpty(a)){a="h300px w100prct"}this._div=$$P.div(null,null,{classNames:"cmScrollingTextBox "+a});this.AddChild(this._div);var b=$$CM.getCMFormattedText(this.GetConfig(CFG_VALUE_STRING));this._div.UpdateInnerHtml(b)},GetData:function(){return this._div},Bind:function(a){var b=$$CM.getCMFormattedText(a);this._div.UpdateInnerHtml(b)}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Section=Class.create(cm.ui.framework.model.Canvas,{initializeUIElements:function($super){$super();var a=this.GetConfig(CFG_COLUMNS);if(!$$CM.isNumber(a)||a<1||a>2){a=1}this.setLayout($$LAYOUT.FLOW(a))}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Signature=Class.create(cm.ui.framework.model.Base,{initializeUIElements:function(){var b=$$P.div(null,null,{classNames:"cmFormControlSignature"});this.AddChild(b);var a=this.GetConfig(CFG_LABEL);this._text=new $$FTXT2(null,{label:a,classNames:"cmFormControlSignatureName",stretch:true});b.AddChild(this._text);this._date=new $$FTXT2(null,{label:(a&&a.length>0)?"Date":"",classNames:"cmFormControlSignatureDate",stretch:true,enabled:false});this._date.Bind($$DATE.getFormattedDate(new Date()));b.AddChild(this._date)},SetEnabled:function(a){this._text.SetEnabled(a)},GetData:function(a){if($$CM.isEmpty(this._text.GetData())){return null}else{return this._text.GetData()+" ("+this._date.GetData()+")"}},Bind:function(a){try{var d=a.lastIndexOf("(")+1;var c=a.lastIndexOf(")");var f=c-d;if(d<0||c<0){throw""}var b=new Date(Date.parse(a.substr(d,f)));var g=a.substr(0,d-1);this._text.Bind(g);this._date.Bind($$DATE.getFormattedDate(b))}catch(e){this._text.Bind(null);this._date.Bind($$DATE.getFormattedDate(new Date()))}}});"cm.ui.framework.model".namespace();cm.ui.framework.model.Table=Class.create(cm.ui.framework.model.Canvas,{initializeUIElements:function($super){$super();var a=parseInt(this.GetConfig(CFG_COLUMNS));if(!$$CM.isNumber(a)){a=2}else{if(a<1){a=1}else{if(a>4){a=4}}}this.SetConfig(CFG_COLUMNS,a);this.setLayout($$LAYOUT.TABLE(a))}});"cm.ui.framework.model".namespace();cm.ui.framework.model.TabPanel=Class.create(cm.ui.framework.model.Canvas,{getDerivedConfigOptions:function($super){var a=$super();a.layout=$$LAYOUT.TABS();a.tabs=this.GetConfig(CFG_LIST);return a},beforeReload:function(){this.__objTmp=this.GetDerivedControl().GetObjects()},afterReload:function(){this.__objTmp.each(function(a){this.GetDerivedControl().AddObject(a)},this);delete this.__objTmp}});