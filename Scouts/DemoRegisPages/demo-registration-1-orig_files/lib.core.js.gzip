"cm".namespace();cm.event=Class.create({_subscriberArray:null,_enabled:null,initialize:function(){this._subscriberArray=$A();this._enabled=true},subscribe:function(a,b,c){if($$CM.isNull(c)){c=false}if(!this.hasSubscription(a,b)){this._subscriberArray.push(new cm.eventSubscription(this,a,b,c))}},unsubscribe:function(b,c){var a=this.getSubscription(b,c);if(!$$CM.isNull(a)){a.Destroy()}},unsubscribeAll:function(){this._subscriberArray.each(function(a){a.Destroy()},this)},getSubscription:function(a,b){return this._subscriberArray.find(function(c){return c.Matches(a,b)==true})},hasSubscription:function(a,b){return !$$CM.isNull(this.getSubscription(a,b))},removeSubscription:function(a){this._subscriberArray.remove(a)},SetEnabled:function(a){this._enabled=a},Enable:function(){this._enabled=true},Disable:function(){this._enabled=false},HasSubscriptions:function(){var a=false;if($$CM.isArray(this._subscriberArray)&&this._subscriberArray.length>0){a=true}return a},GetSubscriptions:function(a){if($$CM.isNull(a)){return this._subscriberArray}else{return this._subscriberArray.findAll(function(b){return b.GetScope()==a},this)}},fireAsync:function(d,a,c){if($$CM.isNull(c)){c={}}if(this._enabled==true){var b=this;this._subscriberArray.each(function(e){setTimeout(function(){e.trigger(d,a,c)},0)},this)}},_fireAsync:false,fire:function(c,a,b){if($$CM.isNull(b)){b={}}if(this._enabled==true){this._subscriberArray.each(function(d){if(!this._fireAsync){d.trigger(c,a,b)}else{setTimeout(function(){d.trigger(c,a,b)},0)}},this)}}});cm.eventSubscription=Class.create({_listening:true,_queue:$A(),_queueSize:1,_queueEnabled:true,_callback:null,_scope:null,_stopPropagation:false,_event:null,initialize:function(a,b,c,d){this._event=a;this._stopPropagation=false;this._listening=true;this._queue=$A();this._queueSize=0;this._queueEnabled=false;this._callback=b;this._stopPropagation=d;this._scope=c;$$MD.Push(this._scope,"Subscriptions",this)},GetScope:function(){return this._scope},Matches:function(a,b){return this._callback==a&&this._scope==b},Destroy:function(){$$MD.Remove(this._scope,"Subscriptions",this);this._event.removeSubscription(this)},SetListening:function(a){this._listening=a;if(this._listening==true&&this._queueEnabled==true){this.runQueue()}},SetQueueEnabled:function(a){this._queueEnabled=a},SetQueueSize:function(a){this._queueSize=a},SetCallback:function(a){this._fn=a},SetStopPropagation:function(a){this._stopPropagation=a},fire:function(b,a){if(this._listening==true){this._callback.call(this._scope,b,a)}else{if(this._queueEnabled==true){this.storeEvent(b,a)}}},storeEvent:function(b,a){if(this._queue.length>=this._queueSize){this._queue.shift()}this._queue.push({Target:b,Args:a})},runQueue:function(){while(this._queue.length>0){var a=this._queue.shift();this._callback.call(this._scope,a.Target,a.Args)}},trigger:function(e,a,d){var b=null;if(!$$CM.isNull(a)){b=a.event}if(this._stopPropagation==true&&!$$CM.isNull(b)){if(!$$CM.isNull(b.stop)){b.stop()}if(!$$CM.isNull(b.cancelBubble)){b.cancelBubble=this._stopPropagation}if(!$$CM.isNull(b.preventDefault)){b.preventDefault()}if(!$$CM.isNull(b.stopPropagation)){b.stopPropagation()}}if(d.async==true){var c=this;setTimeout(function(){c.fire(e,a)},5)}else{this.fire(e,a)}}});"cm.ui".namespace();cm.ui.Hashtable=function(a){if($$CM.isNull(a)){this.hash=new Array();this.keys=new Array()}else{this.hash=a.hash;this.keys=a.keys}this.location=0};cm.ui.Hashtable.prototype.hash=null;cm.ui.Hashtable.prototype.keys=null;cm.ui.Hashtable.prototype.location=null;cm.ui.Hashtable.prototype.put=function(a,b){if(b==null){return}if(this.hash[a]==null){this.keys[this.keys.length]=a}this.hash[a]=b};cm.ui.Hashtable.prototype.clear=function(){this.hash=new Array();this.keys=new Array();this.location=0};cm.ui.Hashtable.prototype.get=function(a){return this.hash[a]};cm.ui.Hashtable.prototype.remove=function(b){for(var a=0;a<this.keys.length;a++){if(b==this.keys[a]){this.hash[this.keys[a]]=null;this.keys.splice(a,1);return}}};cm.ui.Hashtable.prototype.size=function(){return this.keys.length};cm.ui.Hashtable.prototype.populateItems=function(){};cm.ui.Hashtable.prototype.next=function(){if(++this.location<this.keys.length){return true}else{return false}};cm.ui.Hashtable.prototype.moveFirst=function(){try{this.location=-1}catch(a){}};cm.ui.Hashtable.prototype.moveLast=function(){try{this.location=this.keys.length-1}catch(a){}};cm.ui.Hashtable.prototype.getKey=function(){try{return this.keys[this.location]}catch(a){return null}};cm.ui.Hashtable.prototype.getValue=function(){try{return this.hash[this.keys[this.location]]}catch(a){return null}};cm.ui.Hashtable.prototype.getKeyOfValue=function(b){for(var a=0;a<this.keys.length;a++){if(this.hash[this.keys[a]]==b){return this.keys[a]}}return null};cm.ui.Hashtable.prototype.toString=function(){try{var c=new Array(this.keys.length);c[c.length]="{";for(var b=0;b<this.keys.length;b++){c[c.length]=this.keys[b];c[c.length]="=";var d=this.hash[this.keys[b]];if(d){c[c.length]=d.toString()}else{c[c.length]="null"}if(b!=this.keys.length-1){c[c.length]=", "}}}catch(a){}finally{c[c.length]="}"}return c.join("")};cm.ui.Hashtable.prototype.add=function(b){try{b.moveFirst();while(b.next()){var c=b.getKey();this.hash[c]=b.getValue();if(this.get(c)!=null){this.keys[this.keys.length]=c}}}catch(a){}finally{return this}};cm.ui.Hashtable.prototype.bind=function(a){try{if(!Object.isUndefined(a)&&a!=null&&a.constructor.toString().indexOf("Array")!=-1){for(var c=0;c<a.length;c++){var f=a[c];var d=f.K;var g=f.V;this.put(d,g)}}}catch(b){}finally{return this}};____onCMEnvironmentLoad=function(){window.CMEnvironmentLoadEvent.fire(window)};CMEnvironmentLoadEvent=new cm.event();$(document).observe("dom:loaded",____onCMEnvironmentLoad);"cm".namespace();cm.ConfigOptions=Class.create({__metaData:null,initialize:function(a){this.__metaData=new Object();this.initializeMeta(this);if(!$$CM.isNull(a)){this.embed(a)}},GetMeta:function(a){return this.__metaData[a]},SetMeta:function(b,a,c){if($$CM.isNull(this.__metaData[b])){this.__metaData[b]={}}if($$CM.isNull(c)){this.__metaData[b]=a}else{this.__metaData[b][a]=c}},Set:function(a,b){this[a]=b},Remove:function(a){delete this[a]},clean:function(){var a=Object.clone(this);var c=Object.clone(a.__metaData);for(var d in c){c[d]=Object.clone(this.__metaData[d]);for(var b in c[d]){if(b.startsWith("__")){delete c[d][b]}}}delete a.__metaData;return a},embed:function(obj){for(var prop in obj){if(prop!="__metaData"){if(!$$CM.isNull(obj[prop])&&!$$CM.isNull(obj[prop].DataType)){this[prop]=eval("new "+obj[prop].DataType+"(obj[prop])")}else{this[prop]=obj[prop]}}}this.initializeMeta(this)},initializeMeta:function(a){if($$CM.isNull(a.__proto__)){return}if(!$$CM.isNull(a.__proto__)&&!$$CM.isNull(a.__proto__.__meta)){this.initializeMeta(a.__proto__)}for(var d in a.__meta){for(var b in a.__meta[d]){this.SetMeta(d,b,a.__meta[d][b])}}}});"cm".namespace();cm.Thread=Class.create({CONST_DEFAULT_THREAD_DELAY:50,_owner:null,_running:false,_queue:$A(),_delay:null,_key:null,_progress:0,ThreadStarted:null,ThreadFinished:null,ProgressUpdated:null,initialize:function(a,c,b){this._id=a;this._owner=c;this._delay=(!$$CM.isNull(b))?b:this.CONST_DEFAULT_THREAD_DELAY;this._running=false;this._queue=$A();this.createEvents()},createEvents:function(){this.ThreadStarted=new cm.event();this.ThreadFinished=new cm.event();this.ProgressUpdated=new cm.event()},IsRunning:function(){return !$$CM.isNull($$THREADS.get(this._id))},FilterRequest:function(a,b,d){if($$CM.isNull(d)){d=this._owner}if(!$$CM.isArray(b)){b=$A([b])}if(this.IsRunning()==false){a.apply(d,b||[])}else{var c=$$THREADREQUESTS.get(this._id);if($$CM.isNull(c)){c=$A()}c.push({Scope:d,Function:a,Parameters:b});$$THREADREQUESTS.put(this._id,c)}},Start:function(a,d,e){var c=$A(arguments).slice(3);this.ThreadStarted.fire(this);this._running=true;this.addToPool();var b=this;var f=function(){if(b._running==true){if(!$$CM.isNull(d)){a.ThreadInstance=b;a.apply(d,c)}else{a.ThreadInstance=b;a.apply(b._owner,c)}var g=false;if($$CM.isFunction(e)){cnt=e.call(b)}if(g==true){b.Stop()}else{setTimeout(f,b._delay)}}else{if(b.isPoolClear()==true){$$THREADS.remove(b._id);b.clearQueue();b.ThreadFinished.fire(b)}else{if(b.isPoolMaster()==true){setTimeout(f,b._delay)}}}};setTimeout(f,this._delay)},Stop:function(){this._running=false;if(this.isPoolMaster()==false){this.removeFromPool()}},StopHard:function(){this._running=false;var a=$$THREADS.get(this._id);if(!$$CM.isNull(a)){if($$CM.isArray(a)&&a.length>0){a.each(function(b){b.removeFromPool()},this)}}$$THREADS.remove(this._id);this.clearQueue()},SetProgress:function(a){this._progress=a;this.updateProgress()},GetProgress:function(c){if(c==true){var b=0;var a=$$THREADS.get(this._id);if($$CM.isArray(a)){a.each(function(d){b+=d.GetProgress(false)},this);b=Math.ceil((b/(a.length*100))*100)}return b}else{return this._progress}},updateProgress:function(){this.ProgressUpdated.fire(this,this.GetProgress(true))},addToPool:function(){var a=$$THREADS.get(this._id);if($$CM.isNull(a)){a=$A()}else{this.ProgressUpdated.subscribe(this.getPoolMaster().updateProgress,this.getPoolMaster())}a.push(this);$$THREADS.put(this._id,a)},removeFromPool:function(){var a=$$THREADS.get(this._id);if(!$$CM.isNull(a)){a.remove(this);$$THREADS.put(this._id,a)}},getPoolMaster:function(){var a=$$THREADS.get(this._id);if(!$$CM.isNull(a)){if($$CM.isArray(a)&&a.length>0){return a[0]}else{return null}}else{return null}},isPoolMaster:function(){return this==this.getPoolMaster()},isPoolClear:function(){var a=$$THREADS.get(this._id);return $$CM.isArray(a)&&a.length==1&&this.isPoolMaster()},clearQueue:function(){var a=$$THREADREQUESTS.get(this._id);if($$CM.isArray(a)){a.each(function(b){b.Function.apply(b.Scope,b.Parameters||[])},this)}$$THREADREQUESTS.remove(this._id)}});$$THREADS=cm.Thread.ThreadPool=new cm.ui.Hashtable();$$THREADREQUESTS=cm.Thread.ThreadRequests=new cm.ui.Hashtable();$$STOP=function(){arguments.callee.caller.ThreadInstance.Stop()};"cm".namespace();cm.TranslatableConfigOptions=Class.create(cm.ConfigOptions,{translate:function(){var a=new Object();for(var b in this){if(!$$CM.isNull(this[b].property)){a[this[b].property]=this[b].value}}return a},embed:function(a){for(var b in a){var c=$$CM.randomString();for(var d in this){if(!$$CM.isNull(a[b])&&b==this[d].property){c=d;break}}this[c]={property:b,value:a[b]}}}});"cm".namespace();$$THREAD_ENUM=new cm.ui.Hashtable();cm.EnumerationThread=Class.create(cm.Thread,{_enumerable:$A(),_totalIterations:0,_iteration:0,Start:function(c,f,b,d){var a=$A(arguments).slice(4);this._isRoot=false;var g=$$THREAD_ENUM.get(this._id);if($$CM.isNull(g)){this._isRoot=true;g={Iteration:0,Total:d,PercentComplete:0};$$THREAD_ENUM.put(this._id,g)}this._enumerable=b;this.ThreadStarted.fire(this);this.addToPool();var e=this;var h=function(){var k=$$THREAD_ENUM.get(e._id);if($$CM.isNull(k)){e.Stop()}if(e._enumerable.length>0){var j=e._enumerable[0];e._enumerable=e._enumerable.removeAt(0);k.Iteration++;if(!$$CM.isNull(f)){c.ThreadInstance=e;c.apply(f,$A([j]).concat(a))}else{c.ThreadInstance=e;c.apply(e._owner,$A([j]).concat(a))}setTimeout(h,e._delay)}else{if(e._isRoot!=true){e.Stop()}else{if(e._isRoot==true&&k.Iteration>=k.Total){e.Stop();$$THREADS.remove(e._id);$$THREAD_ENUM.remove(e._id);e.clearQueue();e.ThreadFinished.fire(e)}else{setTimeout(h,e._delay)}}}if(e.isPoolMaster()==true){k.PercentComplete=Math.round(100*(k.Iteration/k.Total));e.ProgressUpdated.fire(e,k)}};setTimeout(h,this._delay)},Expand:function(a){this._enumerable=a.concat(this._enumerable)},Advance:function(a){var b=$$THREAD_ENUM.get(this._id);if(!$$CM.isNull(b)){b.Iteration+=a}}});"cm".namespace();$$CLIENT=cm.Client={Bind:function(a){var b=this;if(!$$CM.isNull(a)){if(!$$CM.isNull(a.VersionBranch)){b.VersionBranch=a.VersionBranch}if(!$$CM.isNull(a.CurrentSeasonID)){b.CurrentSeasonID=a.CurrentSeasonID}if(!$$CM.isNull(a.FirstSeasonID)){b.FirstSeasonID=a.FirstSeasonID}if(!$$CM.isNull(a.LastSeasonID)){b.LastSeasonID=a.LastSeasonID}if(!$$CM.isNull(a.OpeningSeasonID)){b.OpeningSeasonID=a.OpeningSeasonID}if(!$$CM.isNull(a.FirstCamperSystemSeasonID)){b.FirstCamperSystemSeasonID=a.FirstCamperSystemSeasonID}if(!$$CM.isNull(a.FirstStaffSystemSeasonID)){b.FirstStaffSystemSeasonID=a.FirstStaffSystemSeasonID}if(!$$CM.isNull(a.ID)){b.ID=a.ID}if(!$$CM.isNull(a.Name)){b.Name=a.Name}if(!$$CM.isNull(a.V2DomainName)){b.V2DomainName=a.V2DomainName}if(!$$CM.isNull(a.V2DomainName)){b.Gender=a.Gender}if(!$$CM.isNull(a.TermsArray)){b.TermsArray=a.TermsArray}if(!$$CM.isNull(a.Country)){b.Country=a.Country}if(!$$CM.isNull(a.IsEnterpriseClient)){b.IsEnterpriseClient=a.IsEnterpriseClient}}}};"cm".namespace();$$DATE=cm.dateUtility={stringifyDate:function(b){if(!b){return""}b=new Date(b);var c=b.getMonth()+1;if(c<10){c="0"+c}var a=b.getDate();if(a<10){a="0"+a}var d=b.getFullYear();return d+"-"+c+"-"+a},getElapsedSeconds:function(b,a){return(a.getTime()-b.getTime())/1000},getFormattedDate:function(c,a){if(!c){return""}c=new Date(c);var d=c.getMonth()+1;if(d<10){d="0"+d}var b=c.getDate();if(b<10){b="0"+b}var e=c.getFullYear();if(a!=null&&a==true){e=(e+"").substring(2)}return d+"/"+b+"/"+e},getFormattedUTCDate:function(c,a){var b=new Date();b.setISO8601(c);return $$DATE.getFormattedDate(b,a)},getFormattedUTCTime:function(c,a){var b=new Date();b.setISO8601(c);return $$DATE.getFormattedTime(b,a)},getFormattedUTCDateTime:function(f,a){var b=new Date();b.setISO8601(f);var c=$$DATE.getFormattedDate(b,a);var e=$$DATE.getFormattedTime(b);return c+" "+e},getUTCDateTime:function(b){var c="([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2}).([0-9]+)Z";var a=b.match(new RegExp(c));utcDate=new Date();utcDate.setUTCFullYear(a[1],a[2]-1,a[3]);utcDate.setUTCHours(a[4],a[5],a[6],a[7]);return utcDate},getFormattedTime:function(a){if(!a){return""}var b=new Date(a);var c=b.getHours();var d=b.getMinutes();var e=""+((c>12)?c-12:c);if(e=="0"){e=12}e+=((d<10)?":0":":")+d;e+=(c>=12)?" PM":" AM";return e},getMonthDay:function(c,a,b,f){if(!c){return""}var e=new Date(c);var h=e.getMonth()+1;var m=$$DATE.getMonthName(h,a);var d=e.getDate();var k=m+" "+d;if(!cm.ui.utility.isNull(b)){if(b){var l="";var j=d.toString();var g=Number(j.substring(j.length-1));switch(g){case 0:l="th";break;case 1:if(d==11){l="th"}else{l="st"}break;case 2:if(d==12){l="th"}else{l="nd"}break;case 3:if(d==13){l="th"}else{l="rd"}break;default:l="th"}k+=l}}if(!cm.ui.utility.isNull(f)&&f==true){k+=" "+e.getFullYear()}return k},getMonthDayYear:function(b,a){if(!b){return""}var c=new Date(b);var d=c.getMonth()+1;var e=$$DATE.getMonthName(d,a);return e+" "+c.getDate()+", "+c.getFullYear()},getFullMonth:function(b){var a=b;if(b<10){a="0"+a}return a},getDuration:function(c,b){var d=new Date();if(!$$CM.isNull(b)){d=b}var j=d.valueOf()-c.valueOf();if(j>=0){var k=j/1000;if(k<60){if(k<3){return"a moment ago"}return Math.round(k)+" seconds ago"}var h=k/60;if(h<60){h=Math.round(h);if(h==1){return"1 minute ago"}else{return h+" minutes ago"}}var e=h/60;if(e<24){e=Math.round(e);if(e==1){return"1 hour ago"}else{return e+" hours ago"}}var l="";var a="am";var f=c.getHours();if(f>=12){a="pm"}if(f>12){f-=12}if(f==0){f="12"}var g=c.getMinutes();l=$$DATE.getFormattedTime(c);var m=new Date();if(c.getMonth()>m.getMonth()&&(c.getFullYear()==m.getFullYear()||c.getFullYear()==m.getFullYear()-1)){return $$DATE.getMonthDay(c,true,true)+" at "+l}else{return $$DATE.getMonthDay(c,true,true,true)+" at "+l}}else{j=Math.abs(j);var k=j/1000;if(k<60){if(k<10){return"a moment ago"}return Math.round(k)+" seconds from now"}var h=k/60;if(h<60){h=Math.round(h);if(h==1){return"1 minute from now"}else{return h+" minutes from now"}}var e=h/60;if(e<24){e=Math.round(e);if(e==1){return"1 hour from now"}else{return e+" hours from now"}}var l="";var a="am";var f=c.getHours();if(f>=12){a="pm"}if(f>12){f-=12}if(f==0){f="12"}var g=c.getMinutes();l=$$DATE.getFormattedTime(c);var m=new Date();if(c.getMonth()>m.getMonth()&&(c.getFullYear()==m.getFullYear()||c.getFullYear()==m.getFullYear()-1)){return $$DATE.getMonthDay(c,true,true)+" at "+l}else{return $$DATE.getMonthDay(c,true,true,true)+" at "+l}}},getLocalDateTimeUnformatted:function(a){if(!a){return""}var b=new Date(a);var c=(new Date().getTimezoneOffset()/60);b.setHours(b.getHours()-(c));return b},getLocalDateTime:function(a){if(!a){return""}var b=new Date(a);var d=(new Date().getTimezoneOffset()/60);b.setHours(b.getHours()-(d));var c=$$DATE.getFormattedDate(b,false)+" "+$$DATE.getFormattedTime(b);return c},getMonthName:function(b,a){switch(b){case 1:if(!a){return"January"}return"Jan";case 2:if(!a){return"February"}return"Feb";case 3:if(!a){return"March"}return"Mar";case 4:if(!a){return"April"}return"Apr";case 5:if(!a){return"May"}return"May";case 6:if(!a){return"June"}return"Jun";case 7:if(!a){return"July"}return"Jul";case 8:if(!a){return"August"}return"Aug";case 9:if(!a){return"September"}return"Sep";case 10:if(!a){return"October"}return"Oct";case 11:if(!a){return"November"}return"Nov";case 12:if(!a){return"December"}return"Dec"}},getMonthArray:function(a){monthArray=$A();for(i=1;i<13;i++){monthArray.push({ID:i,Name:$$DATE.getMonthName(i,a)})}return monthArray},getDayArray:function(a){dayArray=$A();if($$CM.isNull(a)){a=31}a=Math.min(a,31);for(i=1;i<=a;i++){dayArray.push({ID:i,Name:i})}return dayArray},getHourArray:function(){timeArray=$A();var c={ID:"Morning",Name:"Morning"};var d=$A();d.push({ID:0,Name:"12 AM"});for(i=1;i<12;i++){d.push({ID:i,Name:(i+" AM")})}c.ItemArray=d;timeArray.push(c);var a={ID:"Afternoon",Name:"Afternoon"};var b=$A();b.push({ID:12,Name:"12 PM"});for(i=1;i<12;i++){b.push({ID:(i+12),Name:(i+" PM")})}a.ItemArray=b;timeArray.push(a);return timeArray},getMinuteArray:function(a){minuteArray=$A();for(i=0;i<60;i++){var b=i;if(!$$CM.isNull(a)&&a==true){if(i<10){b="0"+i}}minuteArray.push({ID:i,Name:b})}return minuteArray},getTimePeriodArray:function(){timePeriodArray=$A();timePeriodArray.push({ID:"AM",Name:"AM"});timePeriodArray.push({ID:"PM",Name:"PM"});return timePeriodArray},getDurationInDays:function(e,c){var b=new Date(e);var a=new Date(c);var d=1000*60*60*24;if(b!="NaN"&&a!="NaN"){return Math.abs(Math.ceil((a.getTime()-b.getTime())/(d)))}else{return 0}},concatenateISO8601:function(a,e){var d="";var b=(!cm.ui.utility.isNull(a)&&a.length>0);var c=(!cm.ui.utility.isNull(e)&&e.length>0);d=(b)?a:"";d+=(c&&b)?"T":"";d+=(c)?e:"";return d},getISO8601FromJSDate:function(d,k,l){var m="";var b="";var e=false;if(k==true){var r=d.getFullYear();var o="0"+(Number(d.getMonth())+1);var c="0"+d.getDate();b+=r;b+="-"+o.substr(o.length-2,2);b+="-"+c.substr(c.length-2,2);e=true}var q="";var f=false;if(l==true){var h=Number(d.getHours());var a=(h>=12)?"pm":"am";var j=cm.Enums.AMPM.compareByName(a,"pm",1)&&h<12?12:0;h=(h==12&&cm.Enums.AMPM.compareByName(a,"am",1))?h+j:h;var g="0"+h;var n="0"+d.getMinutes();q+=g.substr(g.length-2,2);q+=":"+n.substr(n.length-2,2);q+=":00";q+=".000";f=true}m=(e)?b:"";m+=(f&&e)?"T":"";m+=(f)?q:"";var p=$$DATE.isDateTimeStringUTCFormatted(m,k,l);if(!p.ValidationResult){m=""}return m},isDateTimeStringUTCFormatted:function(e,c,d){if(cm.ui.utility.isNull(e)||isNaN(Number(e))==false){return{ValidationResult:false}}var a=e.match(new RegExp(CONSTANT_DateRegExpValidationString));if((cm.ui.utility.isNull(a)||a.length<4)&&c==true){return{ValidationResult:false}}var b=e.match(new RegExp(CONSTANT_TimeRegExpValidationString));if((cm.ui.utility.isNull(b)||b.length<8)&&d==true){return{ValidationResult:false}}return{ValidationResult:true,TMatch:b,DMatch:a}},toLocalDate:function(j){if($$DATE.isDateTimeStringUTCFormatted(j,true,true).ValidationResult==true){var h=j.substring(0,4);var e=j.substring(5,7);var a=j.substring(8,10);var c=j.substring(11,13);var d=j.substring(14,16);var g=j.substring(17,20);var b=new Date(h,e-1,a,c,d,g);var f=(new Date()).getTimezoneOffset();return new Date(b.getTime()-f*60000)}else{return new Date(j)}},toExactDate:function(h){if($$DATE.isDateTimeStringUTCFormatted(h,true,true).ValidationResult==true){var g=h.substring(0,4);var e=h.substring(5,7);var a=h.substring(8,10);var c=h.substring(11,13);var d=h.substring(14,16);var f=h.substring(17,20);var b=new Date(g,e-1,a,c,d,f);return new Date(b.getTime())}else{return new Date(h)}},toActualDate:function(d){if($$DATE.isDateTimeStringUTCFormatted(d,true,false).ValidationResult==true){var c=d.substring(0,4);var b=d.substring(5,7);var a=d.substring(8,10);return new Date(c,b-1,a,0,0,0)}else{return new Date(d)}},getTimeZoneStringAbbreviation:function(){var a=new Date().toTimeString();if(cm.ui.utility.isOpera()==true){return null}var e=String(String(a).split("(")[1]).split(")")[0];var b=e.split(" ");var c="";for(var d=0;d<b.length;d++){c+=b[d].substr(0,1)}return c},getDateStringFromJSONDate:function(dateString){var ds=dateString;return eval("new "+ds.substr(1,ds.length-2))}};$$CMDATE=cm.cmDate=Class.create({name:"CMDate",_utcData:null,_hasDate:false,_hasTime:false,initialize:function(b){var a=this;a._utcData={utc:null,YYYY:1900,MM:0,DD:1,hh:0,mm:0,ss:0,ll:0,offset:0,ohh:0,omm:0};if(!cm.ui.utility.isNull(b)){a.bind(b)}},bindFromDate:function(a){a=$$DATE.toExactDate(a);var d=this;var h=a.getFullYear();d._utcData.YYYY=h.toString();var e=a.getMonth()+1;d._utcData.MM=d.padZero(e).toString();var b=a.getDate();d._utcData.DD=d.padZero(b).toString();d._hasDate=true;d._utcData.hh=d.padZero(a.getHours()).toString();d._utcData.mm=d.padZero(a.getMinutes()).toString();d._utcData.ss=d.padZero(a.getSeconds()).toString();d._utcData.ll=d.padZero(a.getMilliseconds()).toString();d._hasTime=true;var g="";var j=d._utcData.YYYY;var f=d._utcData.MM;var c=d._utcData.DD;g+=j;g+="-"+f;g+="-"+c;g+="T";g+=d._utcData.hh;g+=":"+d._utcData.mm;g+=":"+d._utcData.ss;g+=".000";d._utcData.utc=g},padZero:function(a){a=parseInt(a,10);if(a<10){return"0"+a.toString()}else{return a.toString()}},getUTCData:function(){return this._utcData},getUTCYear:function(){return this._utcData.YYYY},getUTCMonth:function(){return this._utcData.MM},getUTCDay:function(){return this._utcData.DD},getUTCHours:function(){return this._utcData.hh},getUTCMinutes:function(){return this._utcData.mm},getUTCSeconds:function(){return this._utcData.ss},getData:function(){return this._utcData.utc},bind:function(c){var a=this;var b=a.isTimeDateStringUTCFormatted(c);if(b.ValidationResult!=true){return}a._utcData.utc=c;a.bindDataObject(b.TMatch,b.DMatch)},bindDataObject:function(c,a){var b=this;if(a!=null){b._utcData.YYYY=a[1];b._utcData.MM=a[2];b._utcData.DD=a[3];b._hasDate=true}if(c!=null){b._utcData.hh=c[1];b._utcData.mm=c[2];b._utcData.ss=c[3];b._utcData.ll=c[4];b._utcData.offset=c[5];b._utcData.ohh=c[6];b._utcData.omm=c[7];b._hasTime=true}return true},getMilliseconds:function(){return this.getDateObject().getMilliseconds()},getSeconds:function(){return this.getDateObject().getSeconds()},getMinutes:function(){return this.getDateObject().getMinutes()},getHours:function(){return this.getDateObject().getHours()},getDateOfMonth:function(){return this.getDateObject().getDate()},getMonth:function(){return this.getDateObject().getMonth()},getFullMonth:function(){var a=this.getDateObject().getMonth();if(a<10){a="0"+a}return a},getFullYear:function(){return this.getDateObject().getFullYear()},getDateObject:function(removeTime){var me=this;var d=new Date();var dString="";if(me._hasDate||me._hasTime){if(me._hasDate==true){dString=me._utcData.MM+"/"+me._utcData.DD+"/"+me._utcData.YYYY}else{if(me._hasTime==true){dString="1/1/1900"}}if(me._hasTime==true){dString+=" "+me._utcData.hh+":"+me._utcData.mm+":"+me._utcData.ss}d=new Date(dString)}else{d=new Date()}if(!cm.ui.utility.isNull(me._utcData.offset)&&(cm.ui.utility.isNumber(me._utcData.ohh)||cm.ui.utility.isNumber(me._utcData.omm))){var offsetMinutes=0;if(cm.ui.utility.isNumber(me._utcData.ohh)){offsetMinutes+=Number(me._utcData.ohh)*60}if(cm.ui.utility.isNumber(me._utcData.omm)){offsetMinutes+=Number(me._utcData.omm)}d.setMinutes(d.getMinutes()-eval(me._utcData.offset+offsetMinutes.toString()))}var o=-d.getTimezoneOffset();d.setMinutes(d.getMinutes()+o);if(!$$CM.isNull(removeTime)&&removeTime==true){d.setHours(0,0,0,0)}return d},isTimeDateStringUTCFormatted:function(d){var b=this;if(d==null&&d){return{ValidationResult:false}}var c=d.match(new RegExp(CONSTANT_TimeRegExpValidationString));if((c==null||c.length<8)&&b._hasTime==true){return{ValidationResult:false}}var a=d.match(new RegExp(CONSTANT_DateRegExpValidationString));if((a==null||a.length<4)&&b._hasDate==true){return{ValidationResult:false}}return{ValidationResult:true,TMatch:c,DMatch:a}},getLocalTime:function(){var b=this;var a=new $$CMDATE();a.bindFromDate(b.getDateObject());return a.getTime()},getTime:function(){var a=this;var b="";if(a._utcData!=null&&a._hasDate){b+=a._utcData.hh+":"+a._utcData.mm+":"+a._utcData.ss+"."+a._utcData.ll}return b},getFormattedLocalTime:function(c,d,e){var b=this;var a=new $$CMDATE();a.bindFromDate(b.getDateObject());return a.getFormattedTime(c,d,e)},getFormattedTime:function(d,e,f){var c=this;var g="";if(c._utcData!=null&&c._hasTime){var b=Number(c._utcData.hh);var a=(b<12)?"AM":"PM";if(b==0){b=12}else{if(b>12){b=b-12}}if(d){g+=b}if(e){if(g.length>0){g+=":"}g+=c._utcData.mm}if(f){if(g.length>0){g+=":"}g+=c._utcData.ss}if(g.length>0){g+=" "+a}}return g},getLocalDate:function(){var b=this;var a=new $$CMDATE();a.bindFromDate(b.getDateObject());return a.getDate()},getDate:function(){var b=this;var a="";if(b._utcData!=null&&b._hasDate){a+=b._utcData.YYYY+"-"+b._utcData.MM+"-"+b._utcData.DD}return a},getFormattedLocalDate:function(f,g,b,c,a){var e=this;var d=new $$CMDATE();d.bindFromDate(e.getDateObject());return d.getFormattedDate(f,g,b,c,a)},getFormattedDate:function(h,j,b,c,a){var f=this;var e="";if(f._utcData!=null&&f._hasDate){var k=f._utcData.YYYY;if(!$$CM.isNull(c)&&c==true){k=Number((f._utcData.YYYY+"").substr(2,2))}var d=f._utcData.DD;if(!$$CM.isNull(a)&&a==true){d=Number(f._utcData.DD)}if(h){var g=f.getMonthName(Number(f._utcData.MM),b);if(!$$CM.isNull(j)&&j==true){e+=g+" "+d+", "+k}else{e+=g+" "+d}}else{var g=f._utcData.MM;if(!$$CM.isNull(b)&&b==true){g=Number(f._utcData.MM)}if(!$$CM.isNull(j)&&j==true){e+=g+"/"+d+"/"+k}else{e+=g+"/"+d}}}return e},getFormattedLocalDateExplicitly:function(c,f,g,a,b){var e=this;var d=new $$CMDATE();d.bindFromDate(e.getDateObject());return d.getFormattedDateExplicitly(c,f,g,a,b)},getFormattedDateExplicitly:function(e,j,k,a,b){var g=this;var d=$$DATE.toExactDate(e);var l=d.getFullYear();var h=d.getMonth()+1;var c=d.getDate();var f="";if(j&&l!=null&&h!=null&&c!=null){if(j){var h=g.getMonthName(Number(h),a);f+=h+" "+c;if(k){if(f.length>0){f+=", "}f+=l}}else{f+=g._utcData.MM+"/"+g._utcData.DD+"/"+l}}else{f+=e}return f},getMonthName:function(b,a){switch(b){case 1:if(a){return"Jan"}else{return"January"}case 2:if(a){return"Feb"}else{return"February"}case 3:if(a){return"Mar"}else{return"March"}case 4:if(a){return"Apr"}else{return"April"}case 5:return"May";case 6:if(a){return"Jun"}else{return"June"}case 7:if(a){return"Jul"}else{return"July"}case 8:if(a){return"Aug"}else{return"August"}case 9:if(a){return"Sep"}else{return"September"}case 10:if(a){return"Oct"}else{return"October"}case 11:if(a){return"Nov"}else{return"November"}case 12:if(a){return"Dec"}else{return"December"}}}});"cm.ui.validation".namespace();cm.ui.validation.ValidationResult=Class.create({_isValid:null,_message:null,_errorArray:null,initialize:function(){this._isValid=true;this._errorArray=$A();this.populateMessage()},AddError:function(a,b,c){this._isValid=false;this.populateMessage();this._errorArray.push(new cm.ui.validation.ValidationError(a,b,c))},AppendError:function(a){this._isValid=false;this.populateMessage();this._errorArray.push(a)},populateMessage:function(){if($$CM.isEmpty(this._message)||(!this._isValid&&this._message=="Success")){this.SetMessage((this._isValid)?"Success":"An error occurred.")}},SetMessage:function(a){this._message=a},IsValid:function(){return this._isValid},Message:function(){return this._message},ErrorArray:function(){return this._errorArray}});cm.ui.validation.ValidationError=Class.create({_id:null,_message:null,_target:null,initialize:function(a,b,c){this._id=a;this._message=b;this._target=c},ID:function(){return this._id},Message:function(){return this._message},Target:function(){return this._target}});cm.ui.dataValidator={button:null,form:null,errorClass:"cmValidationError",validateElement:function(m){var E=this;var M={isValid:false,message:""};var k=m.getAttribute("dataType");var q=m.getAttribute("emptyPrompt");var t=m.getAttribute("fieldAbbreviation");var b=m.getAttribute("acceptedCreditCardTypes");var u=m.getAttribute("fieldName");var A=CMinder.Utility.stringToBoolean(m.getAttribute("isRequired"));var r=m.getAttribute("endRangeField");var w=CMinder.Utility.stringToBoolean(m.getAttribute("ignoreValidation"));var F=m.getAttribute("minValue");var D=m.getAttribute("maxValue");var C=m.getAttribute("maxLength");var j=m.getAttribute("dataTrim");if(w==true){M.isValid=true}else{switch(k){case"string":var O=$F(m);if(j){O=O.trim()}if(O=="Click to edit"){O=""}if(O!=""){if(q!=null&&q.length>0&&q==O){M.isValid=true}else{if(C){if(O.length>parseInt(C,10)){M.message="<b>"+u+"</b> cannot exceed "+C+" characters."}else{M.isValid=true}}else{M.isValid=true}}}else{if((A==true)){M.message="<b>"+u+"</b> is required."}else{M.isValid=true}}break;case"monthyear":var O=$F(m);if(j){O=O.trim()}if(O!=""){if(q!=null&&q.length>0&&q==O){if(A){M.message="<b>"+u+"</b> is required."}else{M.isValid=true}}else{if(C){if(O.length>parseInt(C,10)){M.message="<b>"+u+"</b> cannot exceed "+C+" characters."}else{M.isValid=this.isMonthYear(O)}}else{M.isValid=this.isMonthYear(O)}if(M.isValid!=true){M.message="<strong>"+u+"</strong><br/><em>Please format the date as mm/yyyy.</em><br/>For example, 06/2009."}}}else{if(A){M.message="<b>"+u+"</b> is required."}}break;case"email":var O=$F(m);if(j){O=O.trim()}if(O=="Click to edit"){O=""}if(O==""&&A){M.message="<b>"+u+"</b> is required."}else{if(O==""&&!A){M.isValid=true;break}if(this.isEmail(O)){M.isValid=true}else{M.message="<b>"+u+"</b> is an invalid email address"}}break;case"emails":var O=$F(m);if(j){O=O.trim()}if(O=="Click to edit"){O=""}var H=((O==null||O=="")&&A==true);if(H){M.message="<b>"+u+"</b> is required."}else{var G=((O==null||O=="")&&A!=true);if(G){M.isValid=true;break}var N=true;var o=$A();var p=$A(O.split(","));p.each(function(R){var Q=$A(R.split(";"));Q.each(function(T){var S=$A(R.split("\n"));S.each(function(U){if(U){U=U.trim()}o.push(U)})})});if(o){o.each(function(Q){if(!E.isEmail(Q)){N=false}})}if(N){M.isValid=true}else{M.message="<b>"+u+"</b> has invalid email addresses"}}break;case"url":var O=$F(m);if(j){O=O.trim()}if(O=="Click to edit"){O=""}if(O==""&&A){M.message="<b>"+u+"</b> is required."}else{if(O==""&&!A){M.isValid=true;break}if(this.isUrl(O,true)){M.isValid=true}else{M.message="<b>"+u+"</b> is an invalid url"}}break;case"select":var O=$F(m);if(j){O=O.trim()}if(O=="Click to edit"){O=""}if(O!=""||A!=true){M.isValid=true}else{M.message="<b>"+u+"</b> is required."}break;case"radiolist":case"checkboxlist":var v=m.getAttribute("groupName");var n=$A(document.getElementsByName(v));n.each(function(Q){if(Q.checked){M.isValid=true}});if(!M.isValid){M.message="<b>"+u+"</b> is required."}break;case"date":case"time":case"datetime":case"int":case"integer":case"decimal":case"float":case"currency":var O=$F(m);if(j){O=O.trim()}if(O=="Click to edit"){O=""}var s=null;if(r!=null){s=$F(r)}if(s=="Click to edit"){s=""}if(A){if(O==""||s==""){M.message="<b>"+u+"</b> is required."}else{M.isValid=true}}else{M.isValid=true}if(O!=""){var l=null;switch(k){case"int":case"integer":l="integer";break;case"float":case"decimal":l="decimal";break;case"date":l="date";break;case"time":l="time";break;case"datetime":l="date & time";break;case"currency":l="currency";break}if(s==null){var I=null;var z=true;var y=true;switch(k){case"int":case"integer":if(F!=null){z=(parseInt(O,10)>=parseInt(F,10))}if(D!=null){y=(parseInt(O,10)<=parseInt(D,10))}I=this.isInteger(O);break;case"float":case"decimal":if(F!=null){z=(parseFloat(O)>=parseFloat(F))}if(D!=null){y=(parseFloat(O)<=parseFloat(D))}I=this.isFloat(O);break;case"date":if(F!=null){z=(Date.parse(O)>=Date.parse(F))}if(D!=null){y=(Date.parse(O)<=Date.parse(D))}I=this.isDate(O);break;case"time":if(F!=null){z=(Date.parse(O)>=Date.parse(F))}if(D!=null){y=(Date.parse(O)<=Date.parse(D))}I=this.isTime(O);break;case"datetime":if(F!=null){z=(Date.parse(O)>=Date.parse(F))}if(D!=null){y=(Date.parse(O)<=Date.parse(D))}I=this.isDateTime(O);break;case"currency":if(F!=null){z=(parseFloat(O)>=parseFloat(F))}if(D!=null){y=(parseFloat(O)<=parseFloat(D))}I=this.isCurrency(O);break}if(!I){M.message="<b>"+u+"</b> is in an incorrect "+l+" format. ";M.isValid=false}else{if(!z){M.message="<b>"+u+"</b> must be at least "+F;M.isValid=false}if(!y){M.message="<b>"+u+"</b> must be less than "+D;M.isValid=false}}}else{var K=null;var J=null;var B=false;var z=true;var y=true;switch(k){case"int":case"integer":K=this.isInteger(O);J=this.isInteger(s);if(K&&J){if(F!=null){z=(parseInt(O,10)>=parseInt(F,10))}if(D!=null){y=(parseInt(O,10)<=parseInt(D,10))}B=parseInt(O,10)<=parseInt(s,10)}break;case"float":case"decimal":K=this.isFloat(O);J=this.isFloat(s);if(K&&J){if(F!=null){z=(parseFloat(O)>=parseFloat(F))}if(D!=null){y=(parseFloat(O)<=parseFloat(D))}B=parseFloat(O)<=parseFloat(s)}break;case"date":K=this.isDate(O);J=this.isDate(s);if(K&&J){if(F!=null){z=(Date.parse(O)>=Date.parse(F))}if(D!=null){y=(Date.parse(O)<=Date.parse(D))}B=(Date.parse(O)<=Date.parse(s))}break;case"time":K=this.isTime(O);J=this.isTime(s);if(K&&J){if(F!=null){z=(Date.parse(O)>=Date.parse(F))}if(D!=null){y=(Date.parse(O)<=Date.parse(D))}B=(Date.parse(O)<=Date.parse(s))}break;case"datetime":K=this.isDateTime(O);J=this.isDateTime(s);if(K&&J){if(F!=null){z=(Date.parse(O)>=Date.parse(F))}if(D!=null){y=(Date.parse(O)<=Date.parse(D))}B=(Date.parse(O)<=Date.parse(s))}break;case"currency":K=this.isCurrency(O);J=this.isCurrency(s);if(K&&J){if(F!=null){z=(parseFloat(O)>=parseFloat(F))}if(D!=null){y=(parseFloat(O)<=parseFloat(D))}B=parseFloat(O)<=parseFloat(s)}break}if(!(K&&J)){M.message="<b>"+u+" range</b> is in an incorrect "+l+" format.";M.isValid=false}else{if(!B){M.message="<b>"+u+" range</b> is an invalid range.";M.isValid=false}if(!z){M.message="<b>"+u+"</b> must be at least "+F;M.isValid=false}if(!y){M.message="<b>"+u+"</b> must be less than "+D;M.isValid=false}}}}break;case"address":M.isValid=true;var a=t;var h=$("ddl"+a+"Country");if(h!=null){if(h.selectedIndex<1){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Country</b> is required<br />";Element.addClassName(h,this.errorClass)}else{Element.removeClassName(h,this.errorClass)}}var c=$("txt"+a+"Address1");if(c!=null){if(c.value==""){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Address1</b> is required<br />";Element.addClassName(c,this.errorClass)}else{Element.removeClassName(c,this.errorClass)}}var g=$("txt"+a+"City");if(g!=null){if(g.value==""){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>City</b> is required<br />";Element.addClassName(g,this.errorClass)}else{Element.removeClassName(g,this.errorClass)}}if(h!=null&&h.selectedIndex>0&&h.selectedIndex<4){var L=$("ddl"+a+"State");if(L!=null){if(L.selectedIndex<1){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>State</b> is required<br />";Element.addClassName(L,this.errorClass)}else{Element.removeClassName(L,this.errorClass)}}}var P=$("txt"+a+"Zip");if(P!=null){if(h!=null){if(P.value==""&&h.options[h.selectedIndex].value!="CO"){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Zip</b> is required<br />";Element.addClassName(P,this.errorClass)}else{Element.removeClassName(P,this.errorClass)}}else{if(P.value==""){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Zip</b> is required<br />";Element.addClassName(P,this.errorClass)}else{Element.removeClassName(P,this.errorClass)}}}if(!M.isValid){M.message="<b>"+u+" Is Invalid</b>:<br />"+M.message}break;case"creditcard":M.isValid=true;var a=t;var f=$("txt"+a+"Number");if(f!=null){if(f.value==""){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Number</b> is required<br />";Element.addClassName(f,this.errorClass)}else{if(!this.isFloat(f.value)){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Number</b> is incorrectly formatted<br />";Element.addClassName(f,this.errorClass)}else{if(!this.validCreditCardNumber(f)){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Number</b> is invalid<br />";Element.addClassName(f,this.errorClass)}else{var x=this.isAcceptedCreditCardType(f.value,b);if(!x.isValid){M.isValid=false;M.message=x.message}else{Element.removeClassName(f,this.errorClass)}}}}}var d=$("ddl"+a+"ExpMonth");var e=$("ddl"+a+"ExpYear");if(d!=null&&e!=null){if(d.selectedIndex<1||e.selectedIndex<1){if(d.selectedIndex<1){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Expiration Month</b> is required<br />";Element.addClassName(d,this.errorClass)}else{Element.removeClassName(d,this.errorClass)}if(e.selectedIndex<1){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Expiration Year</b> is required<br />";Element.addClassName(e,this.errorClass)}else{Element.removeClassName(e,this.errorClass)}}else{if(!this.validExpDate(d,e)){M.isValid=false;M.message+="&nbsp;&nbsp;&nbsp;<b>Card is expired</b><br />";Element.addClassName(d,this.errorClass);Element.addClassName(e,this.errorClass)}else{Element.removeClassName(d,this.errorClass);Element.removeClassName(e,this.errorClass)}}}if(!M.isValid){M.message="<b>"+u+" Is Invalid</b>:<br />"+M.message}break}}if(!M.isValid&&k!="address"&&k!="creditcard"){Element.addClassName(m,this.errorClass);if(r!=null){Element.addClassName(r,this.errorClass)}}else{Element.removeClassName(m,this.errorClass);if(r!=null){Element.removeClassName(r,this.errorClass)}}return M},alert:function(e,b,c,a){var d="<p>"+c+"</p>";d+="<ul>";e.errorList.each(function(f){d+="<li>"+f+"</li>"});d+="</ul>";CMinder.Utility.alertCancel(d,b,"Validation Error",null,null,a)},isCurrency:function(a){a=a.replace(/\s/g,"");if(a.search(/^\d{1,3}(,?\d{3})*\.?(\d{1,2})?$/)==-1){return false}else{return true}},isInteger:function(a){if(a==""||a==null){return false}return(a.toString().search(/^-?[0-9]+$/)==0)},reFloat:/^((\d+(\.\d*)?)|((\d*\.)?\d+))$/,isFloat:function(a){return this.reFloat.test(a)},reEmail:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,isEmail:function(a){return this.reEmail.test(a)},isUrl:function(b,c){var a=/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(c){a=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/}return a.test(b)},isDateTime:function(c){var b=c.split(" ");if(b.length<1){return false}var a=b[0];var d="";if(b.length>1){d+=b[1]}if(b.length>2){d+=" "+b[2]}if(this.isDate(a)){if(d.length>0){if(this.isTime(d)){return true}else{return false}}else{return true}}else{return false}},isMonthYear:function(f){var c=/^(\d{1,2})[\/][12](\d{3})$/;if(c.test(f)){var b=f.split("/");var e=b[0]+"/01/"+b[1];var a=new Date(e);return a.getMonth()+1==b[0]&&a.getFullYear()==b[1]}else{return false}},isDate:function(e){var c=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(c.test(e)){var b=e.split("/");var a=new Date(e);if(parseInt(b[2],10)>=2050){return false}return a.getMonth()+1==b[0]&&a.getDate()==b[1]&&a.getFullYear()==b[2]}else{return false}},isTime:function(e){var c=/^(\d{1,2}):(\d{2})(:(\d{2}))?(\s?(AM|am|PM|pm))?$/;if(c.test(e)){var f=e.match(c);var b=f[1]*1;var d=f[2]*1;var a=f[6];if(a!=null){if(b!=null&&(b<0||b>12)){return false}}else{if(b!=null&&(b<0||b>24)){return false}}if(d!=null&&(d<0||d>59)){return false}return true}else{return false}},validCreditCardNumber:function(a){if(!this.isFloat(a)){return false}else{var b=this.luhn(a);return b}},isAcceptedCreditCardType:function(c,a){var g={isValid:false,message:""};if(a!=null&&a.length>0){var d=0;if(c.length==16){if(parseInt(c.substr(0,2),10)>=51&&parseInt(c.substr(0,2),10)<=55){d=2}else{if(c.substr(0,1)=="4"){d=1}else{if(c.substr(0,4)=="6011"){d=3}}}}else{if(c.length==15){if(c.substr(0,2)=="34"||c.substr(0,2)=="37"){d=4}}}var e=a.split(",");var f=false;e.each(function(h){if(parseInt(d,10)==parseInt(h,10)){f=true}});if(f){g.isValid=true}else{g.isValid=false;var b="";switch(d){case 0:g.message="We do not recognize this type of credit card.";break;case 1:g.message="We do not accept <b>MasterCard</b>.";break;case 2:g.message="We do not accept <b>Visa</b>.";break;case 3:g.message="We do not accept <b>Discover</b>.";break;case 4:g.message="We do not accept <b>American Express</b>.";break}}return g}else{g.isValid=false;g.message="We do not accept credit cards.";return g}},doLuhn:function(a){var e=a.replace(/\D/g,"").toArray();if(e.length>16){return false}var g=0;var d=e.length;var f=d%2;for(var c=0;c<d;c++){var b=e[c];if(c%2==f){b=b*2;if(b>9){b=b-9}}g=g+parseInt(b,10)}return(g%10==0)},luhn:function(a){return CMinder.DataValidator.doLuhn(a)},validExpDate:function(a,b){var c=$F(a);var d=$F(b);var e=new Date();e.setFullYear(d,c,1);var f=new Date();if(e<f){return false}else{return true}},clearValidationErrors:function(a){var b=$A($(a).getElementsByClassName("cmValidate"));b.each(function(c){Element.removeClassName(c,"cmValidationError");var f=c.getAttribute("dataType");if(f!=null&&(f=="address"||f=="creditcard")){var d=Element.descendants(c);d.each(function(e){Element.removeClassName(e,"cmValidationError")})}})},validate:function(a){var e={isValid:null,errorList:null};var d=$A(new Array());var c=$A($(a).getElementsByClassName("cmValidate"));var b=this;c.each(function(f){var g=b.validateElement(f);if(!g.isValid){d[d.length++]=g.message}});e.isValid=d.length==0;e.errorList=d;return e},showValidationError:function(d,a){if(!d.isValid){var c='<ul class="mt0px">';var b=0;d.errorList.each(function(f){if(b<5){c+="<li>"+f+"</li>"}b++});c+="</ul>";if(d.errorList.length>5){c+='<p class="cmSubtle">Your first 5 are errors are displayed.</p>'}CMinder.Utility.alertCancel("Please correct the following error(s):<br/>"+c,document.body,"Validation Error",null,null,a)}},addValidation:function(e,d,a,b){if(e&&a.IsRequired){Element.addClassName(e,"cmRequiredField")}if(a.RequiresValidation){Element.addClassName(d,"cmValidate");if(b){d.setAttribute("datatype",b)}else{var c=d.getAttribute("dataType");if(c==null){if(a.Field){if(a.Field.DataType){d.setAttribute("dataType",a.Field.DataType)}}}}d.setAttribute("fieldName",a.FieldName);if(a.IsRequired){d.setAttribute("isRequired","true")}}},enableValidation:function(a){var b=$A($(a).getElementsByClassName("cmValidate"));b.each(function(c){c.removeAttribute("ignoreValidation");var f=c.getAttribute("dataType");if(f!=null&&(f=="address"||f=="creditcard")){var d=Element.descendants(c);d.each(function(e){e.removeAttribute("ignoreValidation")})}})},disableValidation:function(a){var b=$A($(a).getElementsByClassName("cmValidate"));b.each(function(c){Element.removeClassName(c,"cmValidationError");c.setAttribute("ignoreValidation","true");var f=c.getAttribute("dataType");if(f!=null&&(f=="address"||f=="creditcard")){var d=Element.descendants(c);d.each(function(e){Element.removeClassName(e,"cmValidationError");e.setAttribute("ignoreValidation","true")})}})}};cm.ui.validation.Validation=Class.create({DataType:null,EmptyPrompt:null,FieldAbbreviation:null,AcceptedCreditCardTypes:null,FieldName:null,IsRequired:false,EndRangeField:null,IgnoreValidation:true,MinValue:null,MaxValue:null,MaxLength:null,DataTrim:null});"cm".namespace();cm.Enum=Class.create({_array:null,initialize:function(a){if($$CM.isNull(a)){return null}if(!$$CM.isArray(a)){return null}this._array=$A(a);this._array.each(function(c){if($$CM.isNull(c.ID)&&!$$CM.isNull(c.Key)){c.ID=c.Key;delete c.Key}if($$CM.isNull(c.Name)&&!$$CM.isNull(c.Value)){c.Name=c.Value;delete c.Value}try{this[c.ID]=c.Name;this[c.Name]=parseInt(c.ID)}catch(b){}},this)},GetArray:function(){return this._array},GetName:function(a){if(!$$CM.isNumber(a)){return null}var b=this._array.find(function(c){return Number(c.ID)==Number(a)});return $$CM.isNull(b)?null:b.Name},GetId:function(b){if($$CM.isNull(b)||$$CM.isNumber(b)){return null}var a=this._array.find(function(c){return c.Name.toLowerCase()==b.toLowerCase()});return $$CM.isNull(a)?null:Number(a.ID)},GetArrayWithout:function(b,d){var a=$A();if($$CM.isArray(b)){a=b}else{if($$CM.isNumber(b)){a.push(b.toString())}}var c=$A();if($$CM.isArray(d)){d.each(function(e){c.push(e.toLowerCase())},this)}else{if(!$$CM.isEmpty(d)){c.push(d.toLowerCase())}}return this._array.findAll(function(e){var h=true;if(h==true&&a.length>0){var f=a.find(function(j){return !$$CM.isEmpty(j)&&Number(j)==Number(e.ID)},this);h=$$CM.isNull(f)}if(h==true&&c.length>0){var g=c.find(function(j){return !$$CM.isEmpty(j)&&j.toLowerCase()==e.Name.toLowerCase()},this);h=$$CM.isNull(g)}return h},this)},GetArrayWithoutNone:function(){return this.GetArrayWithout(0)},TestFlag:function(a,b){if($$CM.isNumber(b)){b=parseInt(b)}if($$CM.isString(b)){b=this[b]}return((a&b)==b)},TestValue:function(c,b){if(!$$CM.isNumber(b)){b=0}b=Number(b);if(b==0&&$$CM.isNumber(c)){var a=this.GetName(c);return this.GetId(a)}if(b==1){var a=this.GetId(c);return this.GetName(a)}return null},CompareById:function(c,a,b){if(!$$CM.isNumber(b)){b=0}b=Number(b);if(!$$CM.isNumber(c)||(b==0&&$$CM.isNumber(a)&&this.GetName(a)==null)||(b==1&&this.GetId(a)==null)){return false}c=Number(c);a=(b==1)?this.GetId(a):Number(a);return(a==c)},CompareByName:function(c,a,b){if(!$$CM.isNumber(b)){b=0}b=Number(b);if($$CM.isNull(this.GetId(c))||(b==0&&$$CM.isNumber(a)&&this.GetName(a)==null)||(b==1&&this.GetId(a)==null)){return false}c=this.GetId(c);a=(b==1)?this.GetId(a):Number(a);return(a==c)}});"cm.Enums".namespace();cm.Enums.YesNoMaybe=new cm.Enum($A([{ID:1,Name:"Yes"},{ID:0,Name:"No"},{ID:2,Name:"Maybe"}]));cm.Enums.AMPM=new cm.Enum($A([{ID:1,Name:"AM"},{ID:0,Name:"PM"}]));cm.Enums.Gender=new cm.Enum($A([{ID:1,Name:"Male"},{ID:0,Name:"Female"},{ID:2,Name:"Both"}]));$$DS=function(a){return a.GetArray()};"cm".namespace();cm.ErrorInitialization={_errors:$A(),ErrorAdd:function(a){this._errors.push(a)},ErrorsGet:function(){return this._errors},IsValid:function(){if(this._errors.length>0){return false}else{return true}},AlertErrors:function(){var a={title:"Initialization Error",message:"An error occurred initializing data for this page."};setTimeout(function(){$$CMD.Alert(a)},200)}};$$ERRORS=function(){return cm.ErrorInitialization._errors};"cm".namespace();$$MD=cm.Metadata=Singleton.create({Set:function(a,b,c){$$JQ(a).data(b,c)},Get:function(a,b){return $$JQ(a).data(b)},GetArray:function(a,b){this.checkArray(a,b);return this.Get(a,b)},Push:function(a,c,d){this.checkArray(a,c);try{this.Get(a,c).push(d)}catch(b){}},Remove:function(a,b,c){this.checkArray(a,b);this.Get(a,b).remove(c)},checkArray:function(a,b){if(!$$CM.isArray(this.Get(a,b))){this.Set(a,b,$A())}}});"cm.ui".namespace();$$P=cm.ui.Primitive={txt:function(b,c,a){return new $$PC(this.GetInputControl("text",b,c),b,a)},email:function(b,c,a){return new $$PC(this.GetInputControl("email",b,c),b,a)},pswd:function(b,c,a){return new $$PC(this.GetInputControl("password",b,c),b,a)},hdn:function(b,c,a){return new $$PC(this.GetInputControl("hidden",b,c),b,a)},cb:function(b,c,a){return new $$PC(this.GetInputControl("checkbox",b,c),b,a)},rb:function(b,c,a){return new $$PC(this.GetInputControl("radio",b,c,(a==null)?null:a.name),b,a)},fl:function(b,c,a){return new $$PC(this.GetInputControl("file",b,c),b,a)},number:function(b,c,a){return new $$PC(this.GetInputControl("number",b,c),b,a)},btn:function(c,d,b){var a=this.getHtmlControl("button",c);if(!$$CM.isNull(d)){Element.update(a,d)}return new $$PC(a,c,b)},ddl:function(c,a){var b=this.getHtmlControl("select",c);return new $$PC(b,c,a)},optgrp:function(b,c,a){var d=this.getHtmlControl("optgroup",b);if(!$$CM.isNull(c)){d.label=c}return new $$PC(d,b,a)},opt:function(d,e,c,a){var b=new Option(d,e);if(!$$CM.isNull(c)&&c==true){b.selected=true}return new $$PC(b,"",a)},txa:function(b,c,a){var d=this.getHtmlControl("textarea",b);if(!$$CM.isNull(c)){Element.update(d,c)}return new $$PC(d,b,a)},lbl:function(b,d,a){var c=this.getHtmlControl("label");if(!$$CM.isNull(b)){c.setAttribute("for",b)}if(!$$CM.isNull(d)){Element.update(c,d)}return new $$PC(c,b,a)},div:function(b,c,a){return new $$PC(this.textPrimitive("div",b,c),b,a)},divClear:function(c,d,a){var b=new $$PC(this.textPrimitive("div",c,d),c,a);b.AddClassName("cmClear");return b},divWrapper:function(b,c,a){return new $$PCC(this.textPrimitive("div",b,c),b,a)},frag:function(b,c,a){return new $$PC(this.createFragment("div",b,c),b,a)},address:function(b,c,a){return new $$PC(this.textPrimitive("address",b,c),b,a)},nav:function(b,a){return new $$PC(this.getHtmlControl("nav",b),b,a)},section:function(b,c,a){return new $$PC(this.textPrimitive("section",b,c),b,a)},header:function(b,c,a){return new $$PC(this.textPrimitive("header",b,c),b,a)},footer:function(b,c,a){return new $$PC(this.textPrimitive("footer",b,c),b,a)},p:function(b,c,a){return new $$PC(this.textPrimitive("p",b,c),b,a)},b:function(b,c,a){return new $$PC(this.textPrimitive("b",b,c),b,a)},em:function(b,c,a){return new $$PC(this.textPrimitive("em",b,c),b,a)},span:function(b,c,a){return new $$PC(this.textPrimitive("span",b,c),b,a)},strong:function(b,c,a){return new $$PC(this.textPrimitive("strong",b,c),b,a)},i:function(b,c,a){return new $$PC(this.textPrimitive("i",b,c),b,a)},legend:function(b,c,a){return new $$PC(this.textPrimitive("legend",b,c),b,a)},fieldset:function(b,c,a){return new $$PC(this.textPrimitive("fieldset",b,c),b,a)},li:function(b,c,a){return new $$PC(this.textPrimitive("li",b,c),b,a)},h1:function(b,c,a){return new $$PC(this.textPrimitive("h1",b,c),b,a)},h2:function(b,c,a){return new $$PC(this.textPrimitive("h2",b,c),b,a)},h3:function(b,c,a){return new $$PC(this.textPrimitive("h3",b,c),b,a)},h4:function(b,c,a){return new $$PC(this.textPrimitive("h4",b,c),b,a)},h5:function(b,c,a){return new $$PC(this.textPrimitive("h5",b,c),b,a)},h6:function(b,c,a){return new $$PC(this.textPrimitive("h6",b,c),b,a)},tbl:function(b,a){return new $$PC(this.getHtmlControl("table",b),b,a)},thead:function(b,a){return new $$PC(this.getHtmlControl("thead",b),b,a)},tbody:function(b,a){return new $$PC(this.getHtmlControl("tbody",b),b,a)},tfoot:function(b,a){return new $$PC(this.getHtmlControl("tfoot",b),b,a)},tb:function(b,a){return new $$PC(this.getHtmlControl("tbody",b),b,a)},th:function(b,a){return new $$PC(this.getHtmlControl("th",b),b,a)},tr:function(b,a){return new $$PC(this.getHtmlControl("tr",b),b,a)},td:function(b,a){return new $$PC(this.getHtmlControl("td",b),b,a)},colgroup:function(b,a){return new $$PC(this.getHtmlControl("colgroup",b),b,a)},col:function(b,a){return new $$PC(this.getHtmlControl("col",b),b,a)},dl:function(b,a){return new $$PC(this.getHtmlControl("dl",b),b,a)},dt:function(b,a){return new $$PC(this.getHtmlControl("dt",b),b,a)},dd:function(b,a){return new $$PC(this.getHtmlControl("dd",b),b,a)},br:function(b,a){return new $$PC(this.getHtmlControl("br",b),b,a)},hr:function(b,a){return new $$PC(this.getHtmlControl("hr",b),b,a)},ul:function(b,a){return new $$PC(this.getHtmlControl("ul",b),b,a)},ol:function(b,a){return new $$PC(this.getHtmlControl("ol",b),b,a)},frm:function(b,a){return new $$PC(this.getHtmlControl("form",b),b,a)},a:function(e,f,d,c){var b=this.getHtmlControl("a",e);if(!$$CM.isEmpty(d)){b.setAttribute("href",d)}else{b.removeAttribute("href")}if(!$$CM.isNull(f)){Element.update(b,f)}return new $$PC(b,e,c)},img:function(b,d,a){var c=this.getHtmlControl("img",b);if(!$$CM.isNull(d)){c.setAttribute("src",d)}return new $$PC(c,b,a)},iframe:function(d,e,c,f,a){var b=this.getHtmlControl("iframe",d);if(!$$CM.isNull(e)){b.setAttribute("src",e)}if(!$$CM.isNull(c)){b.setAttribute("height",c)}if(!$$CM.isNull(f)){b.setAttribute("width",f)}return new $$PC(b,d,a)},video:function(b,a){var c=this.getHtmlControl("video",b);return new $$PC(c,b,a)},source:function(b,a){var c=this.getHtmlControl("source",b);return new $$PC(c,b,a)},getHtmlControl:function(d,b){if(!$$CM.isNull(b)){var a=document.createElement(d);a.name=b;a.setAttribute("id",b)}else{var a=document.createElement(d)}return a},GetInputControl:function(e,b,f,d){var a=document.createElement("input");if(!$$CM.isNull(e)){a.setAttribute("type",e)}if(!$$CM.isNull(b)){a.setAttribute("id",b)}if(!$$CM.isNull(f)){a.value=f}return a},textPrimitive:function(d,a,b){var c=this.getHtmlControl(d,a);if(!$$CM.isNull(b)){Element.update(c,b)}return c},createFragment:function(e,c,d){var b=document.createDocumentFragment();var a=this.textPrimitive(e,c,d);b.appendChild(a);return a},text:function(b,c,a){return new $$PC(this.textPrimitive("text",b,c),b,a)}};"cm".namespace();$$SCOPE=cm.Scope=Singleton.create({Children:function(a,b){return this.find(a,"> *",b)},Descendants:function(a,b){return this.find(a,"*",b)},find:function(a,d,b){var c=$A($$JQ(a).find(d)).collect(function(g){try{return g.CM.Get()}catch(f){}}).compact();if(b==true){return $A([a]).concat(c)}else{return c}}});"cm".namespace();$$SERVER=cm.Server={TimeStamp:null};"cm.ui".namespace();cm.ui.StringBuilder=function(a){this.strings=new Array("");this.append(a)};cm.ui.StringBuilder.prototype.append=function(a){if(a){this.strings.push(a)}};cm.ui.StringBuilder.prototype.clear=function(){this.strings.length=1};cm.ui.StringBuilder.prototype.toString=function(){return this.strings.join("")};"cm".namespace();cm.term=Class.create({initialize:function(){this._securityDAO=new cm.dao.Security.DAO()},getTermConstant:function(c){var b=this._securityDAO.GetEnum("TermConstant");if(!$$CM.isNull(b)){var a=b.GetId(c);return a}return 0},getTermDescriptionKey:function(c){var b=this._securityDAO.GetEnum("TermDescriptionKey");if(!$$CM.isNull(b)){var a=b.GetId(c);return a}return 0},getClientTermsArray:function(){return cm.Client.TermsArray},clientTermGet:function(d,f){try{var c=this.getTermConstant(d);if(!$$CM.isEmpty(f)){var e=this.getTermDescriptionKey(f);if($$CM.isEmpty(e)){e=0}}if($$CM.isNumber(c)&&c>0){if($$CM.isArray(this.getClientTermsArray())){if($$CM.isNumber(c)&&c>0){var b=this.getClientTermsArray().find(function(h){return h.TermConstant==c});if(!$$CM.isNull(b)){if($$CM.isEmpty(e)){return b}else{if(!$$CM.isNull(b)&&$$CM.isArray(b.TermVariants)){var g=b.TermVariants.find(function(h){return h.Key==e});if(!$$CM.isNull(g)&&!$$CM.isEmpty(g.Value)){return g.Value}}}}}}}}catch(a){}return null}});"cm".namespace();$$USER=cm.User={_htP:new cm.ui.Hashtable(),GetPermissionLevel:function(b){var a=this._htP.get(b);if($$CM.isNumber(a)){return parseInt(a)}else{return 0}},Bind:function(a){var b=this;if(!$$CM.isNull(a)){if(!$$CM.isNull(a.DefaultReturnEmail)){b.DefaultReturnEmail=a.DefaultReturnEmail}if(!$$CM.isNull(a.Email)){b.Email=a.Email}if(!$$CM.isNull(a.FullName)){b.FullName=a.FullName}if(!$$CM.isNull(a.FirstName)){b.FirstName=a.FirstName}if(!$$CM.isNull(a.LastName)){b.LastName=a.LastName}if(!$$CM.isNull(a.MiddleName)){b.MiddleName=a.MiddleName}if(!$$CM.isNull(a.Nickname)){b.Nickname=a.Nickname}if(!$$CM.isNull(a.MaidenName)){b.MaidenName=a.MaidenName}if(!$$CM.isNull(a.TitleID)){b.TitleID=a.TitleID}if(!$$CM.isNull(a.SuffixID)){b.SuffixID=a.SuffixID}if(!$$CM.isNull(a.AvatarURL)){b.AvatarURL=a.AvatarURL}if(!$$CM.isNull(a.ProfilePhotoURL)){b.ProfilePhotoURL=a.ProfilePhotoURL}if(!$$CM.isNull(a.ProfilePhotoMaxURL)){b.ProfilePhotoMaxURL=a.ProfilePhotoMaxURL}if(!$$CM.isNull(a.ID)){b.ID=a.ID}if(!$$CM.isNull(a.PersonID)){b.PersonID=a.PersonID}if(!$$CM.isNull(a.TOSLatestID)){b.TOSLatestID=a.TOSLatestID}if(!$$CM.isNull(a.UserTypeFlag)){b.UserTypeFlag=a.UserTypeFlag}if(!$$CM.isNull(a.TokenString)){b.TokenString=a.TokenString}if(!$$CM.isNull(a.Name)){b.Name=a.Name}}}};