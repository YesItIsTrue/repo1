"cm.validation".namespace();cm.validation.ValidationError=Class.create({_message:null,initialize:function(a){this._message=a},ID:function(){return this._id},Message:function(){return this._message},Target:function(){return this._target}});"cm.validation".namespace();cm.validation.ValidationResult=Class.create({_isValid:null,_message:null,_errorArray:null,_errorOverride:null,_fieldName:null,initialize:function(b,a){this._fieldName=!$$CM.isNull(b)?b:"Field";this._isValid=true;this._errorArray=$A();this._errorOverride=a;this.populateMessage()},AddError:function(a){this._isValid=false;this.populateMessage();if(!$$CM.isEmpty(this._errorOverride)){a+=" ("+this._errorOverride+")"}if(!$$CM.isEmpty(this._fieldName)){this._errorArray.push(new cm.validation.ValidationError("<b>"+this._fieldName+":</b> "+a))}else{this._errorArray.push(new cm.validation.ValidationError(a))}},AppendResult:function(a){this._isValid=(this._isValid==true&&a.IsValid()==true);if($$CM.isArray(a.ErrorArray())){this._errorArray=this._errorArray.concat(a.ErrorArray())}},AppendError:function(a){this._isValid=false;this.populateMessage();this._errorArray.push(a)},populateMessage:function(){if($$CM.isEmpty(this._message)||(!this._isValid==true&&this._message=="Success")){this.SetMessage((this._isValid==true)?"Success":"An error occurred.")}},SetMessage:function(a){this._message=a},IsValid:function(){return this._isValid},Message:function(){return this._message},ErrorArray:function(){return this._errorArray}});"cm.validation".namespace();cm.validation.ValidationConfigOptions=Class.create(cm.ConfigOptions,{FieldName:null,IsRequired:false,IgnoreValidation:false,MinLength:null,MaxLength:null,DisAllow:null,DataTrim:null,AlwaysEvaluate:false,AllowMultiple:false,AllowMultipleSeparator:"\n",AllowMultipleSeparatorArray:$A(),ErrorMessage:"",__meta:{IsRequired:{priority:1},FieldName:{displayName:"Display Name",priority:10},IgnoreValidation:{hidden:true},AlwaysEvaluate:{hidden:true},AllowMultiple:{hidden:true},AllowMultipleSeparator:{hidden:true},DataTrim:{hidden:true},MaxLength:{hidden:true},MinLength:{hidden:true},DisAllow:{hidden:true},name:{hidden:true}}});cm.validation.Evaluator=Class.create({Validator:null,Type:null,_configOptions:null,_result:null,initialize:function(a){this._configOptions=this.configureDefaultOptions();this._result=new cm.validation.ValidationResult(null,this.GetConfigOptions().ErrorMessage);this._errorState=true;this.Type=this.getType();if(!$$CM.isNull(a)){this._configOptions.embed(a)}},Reset:function(){this._result=new cm.validation.ValidationResult(this.getFieldLabel(),this.GetConfigOptions().ErrorMessage)},validate:function(a){this.Reset();if(this._configOptions.IgnoreValidation||(this._configOptions.IsRequired!=true&&$$CM.isEmpty(a))){return this._result}if(($$CM.isNull(a)||a.length<=0)&&this._configOptions.IsRequired==true){this._result.AddError("Field is required");return this._result}if(this._configOptions.DataTrim){a=a.trim()}if(!$$CM.isNull(this._configOptions.MaxLength)&&a.length>this._configOptions.MaxLength){this._result.AddError("Field exceeds maximum length (Max length: "+this._configOptions.MaxLength+")");return this._result}if(!$$CM.isNull(this._configOptions.MinLength)&&a.length<this._configOptions.MinLength){this._result.AddError("Field does not meet minimum length (Min length: "+this._configOptions.MinLength+")");return this._result}if(!$$CM.isNull(this._configOptions.DisAllow)&&a.indexOf(this._configOptions.DisAllow)!=-1){this._result.AddError("Field must not contain: "+this._configOptions.DisAllow);return this._result}var c=this.GetConfigOptions().ErrorMessage;var e=null;if(this.GetConfigOptions().AllowMultiple){var d=true;var b=null;if($$CM.isFunction(a.split)){if($$CM.isArray(this.GetConfigOptions().AllowMultipleSeparatorArray)&&this.GetConfigOptions().AllowMultipleSeparatorArray.length>0){this.GetConfigOptions().AllowMultipleSeparatorArray.each(function(f){b=$A(a.split(f));if(b.length>1){throw $break}},this)}else{b=$A(a.split(this.GetConfigOptions().AllowMultipleSeparator))}}else{if($$CM.isArray(a)){b=a}}b.each(function(f){if(d){if(this.GetConfigOptions().DataTrim==true){e=this.evaluate(f.trim())}else{e=this.evaluate(f)}if(!e.IsValid()){d=false}}},this)}else{e=this.evaluate(a)}return e},evaluate:function(a){return this._result},configureDefaultOptions:function(){return new cm.validation.ValidationConfigOptions()},getValidatorControl:function(){return this.Validator.getControl()},GetConfigOptions:function(){return this._configOptions},IsValid:function(){return this._result.IsValid()},getType:function(){return null},getFieldName:function(){if(!$$CM.isNull(this.GetConfigOptions().FieldName)){return this.GetConfigOptions().FieldName}if(!$$CM.isNull(this.getValidatorControl().GetName())){return this.getValidatorControl().GetName()}return"Field"},getFieldLabel:function(){if(!$$CM.isNull(this.GetConfigOptions().FieldName)){return this.GetConfigOptions().FieldName}var a=this.getValidatorControl();if(!$$CM.isNull(a.GetCustomLabel)&&!$$CM.isNull(a.GetCustomLabel())){return a.GetCustomLabel()}return this.getFieldName()},setFieldLabel:function(a){this.GetConfigOptions().FieldName=a}});"cm.validation".namespace();cm.validation.DataValidator=Class.create({_result:null,_control:null,_evaluators:null,_enabled:true,_hidden:false,_dialog:null,_fieldName:null,_locked:false,ValidationComplete:null,initialize:function(a){this._result=new cm.validation.ValidationResult();this._evaluators=$A();this._control=a;this._enabled=true;this._hidden=false;this.ValidationComplete=new cm.event()},RemoveAll:function(a){this.Clear(a);this._evaluators=$A();if(a!=false){this._control.ChildControls().each(function(b){b.Validator.RemoveAll(a)},this)}},Clear:function(a){this._control.RemoveClassName("cmValidationError");this._evaluators.each(function(b){b.Reset()});if(a!=false){this._control.ChildControls().each(function(b){b.Validator.Clear(a)},this)}},SetEnabled:function(b,a){this._enabled=(b==true);if(a!=false){this._control.ChildControls().each(function(c){if(this._enabled==true){c.Validator.Enable(a)}else{c.Validator.Disable(a)}},this)}},Enable:function(a){this._enabled=true;if(a!=false){this._control.ChildControls().each(function(b){b.Validator.Enable(a)},this)}},setHidden:function(a){this._hidden=a;if(a==true){this.Clear(false)}this._control.ChildControls().each(function(b){b.Validator.setHidden(a)},this)},Disable:function(a){this._enabled=false;if(a!=false){this._control.ChildControls().each(function(b){b.Validator.Disable(a)},this)}},addEvaluator:function(a,b){if(!$$CM.isNull(a)){a.Validator=this;this._evaluators.push(a)}if(!$$CM.isNull(b)){if($$CM.isArray(b)){b.each(function(c){c.subscribe(this.validateEventResponse,this)},this)}else{b.subscribe(this.validateEventResponse,this)}}},SetEvaluator:function(a){this._evaluators=$A();if(!$$CM.isNull(a)){a.Validator=this;this._evaluators.push(a)}},SetLocked:function(a){this._locked=(a==true)},IsLocked:function(){return this._locked==true},GetEvaluator:function(){if(!$$CM.isNull(this._evaluators)&&$$CM.isArray(this._evaluators)&&this._evaluators.length>0){return this._evaluators[0]}else{return null}},validateEventResponse:function(){this.validate(false,true)},validate:function(b,a){this._result=new cm.validation.ValidationResult();if(!$$CM.isNull(this._control)&&this._enabled==true&&this._control.IsVisible()==true&&this._control.IsDisabled()!=true){this._evaluators.each(function(c){if(!a||(a&&!c.IsValid())||(!$$CM.isNull(c.GetConfigOptions().AlwaysEvaluate)&&c.GetConfigOptions().AlwaysEvaluate)){this._result.AppendResult(c.validate(this._control.GetData()))}},this);if(!this._result.IsValid()){this._control.AddClassName("cmValidationError")}else{this._control.RemoveClassName("cmValidationError")}if($$CM.isFunction(this._control.onValidate)){this._result.AppendResult(this._control.onValidate())}else{this._control.ChildControls().each(function(c){this._result.AppendResult(c.Validator.validate())},this)}this.ValidationComplete.fire(this,this._result)}if(b==true){this.ShowErrors(this._result)}return this._result},ShowErrors:function(d,a){if(!$$CM.isNull(d)&&!d.IsValid()){var c="";d.ErrorArray().each(function(f){c+="<li>"+f.Message()+"</li>"});var b={title:"Validation Error",header:"Please correct the following error(s):",message:'<ul class="mt0px">'+c+"</ul>",width:500};if(!$$CM.isNull(a)){if(!$$CM.isEmpty(a.title)){b.title=a.title}if(!$$CM.isEmpty(a.width)){b.width=a.width}}this._dialog=$$CMD.Alert(b)}},onDialogHide:function(b,a){this._dialog.Destroy()},getControl:function(){return this._control}});$$V=function(a){return a.Validator};$$EVAL={TEXT:function(a){return new cm.validation.evaluator.TextEvaluator(a)},STRING:function(a){return new cm.validation.evaluator.TextEvaluator(a)},NUMBER:function(a){return new cm.validation.evaluator.NumberEvaluator(a)},EMAIL:function(a){return new cm.validation.evaluator.EmailEvaluator(a)},URL:function(a){return new cm.validation.evaluator.UrlEvaluator(a)},CC:function(a){return new cm.validation.evaluator.CreditCardEvaluator(a)},DATE:function(a){return new cm.validation.evaluator.DateTimeEvaluator(a)},BIRTHDATE:function(a){a.DataType="birthdate";return new cm.validation.evaluator.DateTimeEvaluator(a)},SELECT:function(a){return new cm.validation.evaluator.SelectEvaluator(a)},MULTISELECT:function(a){return new cm.validation.evaluator.MultiSelectEvaluator(a)},GROUP:function(a){return new cm.validation.evaluator.GroupEvaluator(a)},BOOL:function(a){return new cm.validation.evaluator.BooleanEvaluator(a)},COMPARE:function(a){return new cm.validation.evaluator.ComparisonEvaluator(a)},HASCHILDREN:function(a){return new cm.validation.evaluator.HasChildrenEvaluator(a)},MERGEFIELD:function(a){return new cm.validation.evaluator.MergeFieldEvaluator(a)},UNIQUE:function(a){return new cm.validation.evaluator.UniqueEvaluator(a)},JSON:function(a){return new cm.validation.evaluator.JsonEvaluator(a)},AGERANGECONINUOUS:function(a){return new cm.validation.evaluator.AgeRangeContinuousEvaluator(a)},INTEGERRANGECONINUOUS:function(a){return new cm.validation.evaluator.IntegerRangeContinuousEvaluator(a)},ACHACCOUNTNUMBERREPEATING:function(a){return new cm.validation.evaluator.achAccount.AccountNumberRepeatingEvaluator(a)},ACHACCOUNTNUMBERSEQUENTIAL:function(a){return new cm.validation.evaluator.achAccount.AccountNumberSequentialEvaluator(a)},ACHROUTINGNUMBER:function(a){return new cm.validation.evaluator.achAccount.RoutingNumberChecksumEvaluator(a)},GetEnumList:function(){var a=$A();for(var b in this){if(b!="GetEnumList"&&b!="GetEvaluator"){a.push({ID:b,Name:b})}}return a},GetEvaluator:function(b,a){b=b.toLowerCase();switch(b){case"text":case"string":return $$EVAL.TEXT(a);break;case"number":return $$EVAL.NUMBER(a);break;case"email":return $$EVAL.EMAIL(a);break;case"url":return $$EVAL.URL(a);break;case"cc":return $$EVAL.CC(a);break;case"date":return $$EVAL.DATE(a);break;case"birthdate":return $$EVAL.BIRTHDATE(a);break;case"select":return $$EVAL.SELECT(a);break;case"group":return $$EVAL.GROUP(a);break;case"bool":return $$EVAL.BOOL(a);break;case"ageRangeContinuous":return $$EVAL.AGERANGECONINUOUS(a);break;case"integerRangeContinuous":return $$EVAL.INTEGERRANGECONINUOUS(a);break}}};